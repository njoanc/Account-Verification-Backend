{"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressSession = _interopRequireDefault(require(\"express-session\"));\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _db = _interopRequireDefault(require(\"./config/db\"));\nvar _users = _interopRequireDefault(require(\"./routes/users\"));\nvar _swaggerUiExpress = _interopRequireDefault(require(\"swagger-ui-express\"));\nvar _swagger = _interopRequireDefault(require(\"../swagger.json\"));\nvar _passport = _interopRequireDefault(require(\"./config/passport\"));\nvar _path = _interopRequireDefault(require(\"path\"));\n// import auth from \"./routes/auth\";\n\nconst app = (0, _express.default)();\n_dotenv.default.config();\n(0, _db.default)();\napp.use(_express.default.json());\n\n// Middlewares\napp.use(_bodyParser.default.json());\napp.use(_bodyParser.default.urlencoded({\n  extended: true\n}));\napp.use((0, _cors.default)());\n\n// configure the session middleware\napp.use((0, _expressSession.default)({\n  secret: process.env.JWT_SECRET_KEY,\n  resave: false,\n  saveUninitialized: false\n}));\napp.use(_passport.default.initialize());\napp.use(_passport.default.session());\napp.set(\"views\", _path.default.join(__dirname, \"views\"));\n\n// Set the view engine to use\napp.set(\"view engine\", \"ejs\");\n\n// Configure the view engine to look for views in the 'views/pages' directory\napp.engine(\"ejs\", require(\"ejs\").renderFile);\napp.set(\"views\", _path.default.join(__dirname, \"views\", \"pages\"));\n\n// Serialize user\n_passport.default.serializeUser(function (user, done) {\n  done(null, user);\n});\n\n// Deserialize user\n_passport.default.deserializeUser(function (user, done) {\n  done(null, user);\n});\n// Routes\napp.use(\"/users\", _users.default);\napp.use(\"/api-docs\", _swaggerUiExpress.default.serve, _swaggerUiExpress.default.setup(_swagger.default));\n\n/*  Google AUTH  */\n\n// Start server\nconst PORT = process.env.PORT || 5000;\napp.listen(PORT, () => console.log(`Server started on port ${PORT}`));\nvar _default = app;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2V4cHJlc3NTZXNzaW9uIiwiX2JvZHlQYXJzZXIiLCJfY29ycyIsIl9kb3RlbnYiLCJfZGIiLCJfdXNlcnMiLCJfc3dhZ2dlclVpRXhwcmVzcyIsIl9zd2FnZ2VyIiwiX3Bhc3Nwb3J0IiwiX3BhdGgiLCJhcHAiLCJleHByZXNzIiwiZG90ZW52IiwiY29uZmlnIiwiY29ubmVjdERCIiwidXNlIiwianNvbiIsImJvZHlQYXJzZXIiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJjb3JzIiwic2Vzc2lvbiIsInNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUX0tFWSIsInJlc2F2ZSIsInNhdmVVbmluaXRpYWxpemVkIiwicGFzc3BvcnQiLCJpbml0aWFsaXplIiwic2V0IiwicGF0aCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJlbmdpbmUiLCJyZW5kZXJGaWxlIiwic2VyaWFsaXplVXNlciIsInVzZXIiLCJkb25lIiwiZGVzZXJpYWxpemVVc2VyIiwidXNlcnMiLCJzd2FnZ2VyVWkiLCJzZXJ2ZSIsInNldHVwIiwic3dhZ2dlckRvY3VtZW50IiwiUE9SVCIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvamVhbm5lZGFyY255aXJhbXdpemEvRG93bmxvYWRzL0FjY291bnQtVmVyaWZpY2F0aW9uLUJhY2tlbmQvc3JjLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCBzZXNzaW9uIGZyb20gXCJleHByZXNzLXNlc3Npb25cIjtcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gXCJib2R5LXBhcnNlclwiO1xuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xuaW1wb3J0IGNvbm5lY3REQiBmcm9tIFwiLi9jb25maWcvZGJcIjtcbmltcG9ydCB1c2VycyBmcm9tIFwiLi9yb3V0ZXMvdXNlcnNcIjtcbi8vIGltcG9ydCBhdXRoIGZyb20gXCIuL3JvdXRlcy9hdXRoXCI7XG5pbXBvcnQgc3dhZ2dlclVpIGZyb20gXCJzd2FnZ2VyLXVpLWV4cHJlc3NcIjtcbmltcG9ydCBzd2FnZ2VyRG9jdW1lbnQgZnJvbSBcIi4uL3N3YWdnZXIuanNvblwiO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCIuL2NvbmZpZy9wYXNzcG9ydFwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5kb3RlbnYuY29uZmlnKCk7XG5jb25uZWN0REIoKTtcblxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG5cbi8vIE1pZGRsZXdhcmVzXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xuYXBwLnVzZShjb3JzKCkpO1xuXG4vLyBjb25maWd1cmUgdGhlIHNlc3Npb24gbWlkZGxld2FyZVxuYXBwLnVzZShcbiAgc2Vzc2lvbih7XG4gICAgc2VjcmV0OiBwcm9jZXNzLmVudi5KV1RfU0VDUkVUX0tFWSxcbiAgICByZXNhdmU6IGZhbHNlLFxuICAgIHNhdmVVbmluaXRpYWxpemVkOiBmYWxzZSxcbiAgfSlcbik7XG5cbmFwcC51c2UocGFzc3BvcnQuaW5pdGlhbGl6ZSgpKTtcbmFwcC51c2UocGFzc3BvcnQuc2Vzc2lvbigpKTtcblxuYXBwLnNldChcInZpZXdzXCIsIHBhdGguam9pbihfX2Rpcm5hbWUsIFwidmlld3NcIikpO1xuXG4vLyBTZXQgdGhlIHZpZXcgZW5naW5lIHRvIHVzZVxuYXBwLnNldChcInZpZXcgZW5naW5lXCIsIFwiZWpzXCIpO1xuXG4vLyBDb25maWd1cmUgdGhlIHZpZXcgZW5naW5lIHRvIGxvb2sgZm9yIHZpZXdzIGluIHRoZSAndmlld3MvcGFnZXMnIGRpcmVjdG9yeVxuYXBwLmVuZ2luZShcImVqc1wiLCByZXF1aXJlKFwiZWpzXCIpLnJlbmRlckZpbGUpO1xuYXBwLnNldChcInZpZXdzXCIsIHBhdGguam9pbihfX2Rpcm5hbWUsIFwidmlld3NcIiwgXCJwYWdlc1wiKSk7XG5cbi8vIFNlcmlhbGl6ZSB1c2VyXG5wYXNzcG9ydC5zZXJpYWxpemVVc2VyKGZ1bmN0aW9uICh1c2VyLCBkb25lKSB7XG4gIGRvbmUobnVsbCwgdXNlcik7XG59KTtcblxuLy8gRGVzZXJpYWxpemUgdXNlclxucGFzc3BvcnQuZGVzZXJpYWxpemVVc2VyKGZ1bmN0aW9uICh1c2VyLCBkb25lKSB7XG4gIGRvbmUobnVsbCwgdXNlcik7XG59KTtcbi8vIFJvdXRlc1xuYXBwLnVzZShcIi91c2Vyc1wiLCB1c2Vycyk7XG5hcHAudXNlKFwiL2FwaS1kb2NzXCIsIHN3YWdnZXJVaS5zZXJ2ZSwgc3dhZ2dlclVpLnNldHVwKHN3YWdnZXJEb2N1bWVudCkpO1xuXG4vKiAgR29vZ2xlIEFVVEggICovXG5cbi8vIFN0YXJ0IHNlcnZlclxuY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgNTAwMDtcbmFwcC5saXN0ZW4oUE9SVCwgKCkgPT4gY29uc29sZS5sb2coYFNlcnZlciBzdGFydGVkIG9uIHBvcnQgJHtQT1JUfWApKTtcblxuZXhwb3J0IGRlZmF1bHQgYXBwO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsUUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsZUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsV0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsS0FBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksT0FBQSxHQUFBTCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUssR0FBQSxHQUFBTixzQkFBQSxDQUFB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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_expressSession","_bodyParser","_cors","_dotenv","_db","_users","_swaggerUiExpress","_swagger","_passport","_path","app","express","dotenv","config","connectDB","use","json","bodyParser","urlencoded","extended","cors","session","secret","process","env","JWT_SECRET_KEY","resave","saveUninitialized","passport","initialize","set","path","join","__dirname","engine","renderFile","serializeUser","user","done","deserializeUser","users","swaggerUi","serve","setup","swaggerDocument","PORT","listen","console","log","_default","exports","default"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/","sources":["index.js"],"sourcesContent":["import express from \"express\";\nimport session from \"express-session\";\nimport bodyParser from \"body-parser\";\nimport cors from \"cors\";\nimport dotenv from \"dotenv\";\nimport connectDB from \"./config/db\";\nimport users from \"./routes/users\";\n// import auth from \"./routes/auth\";\nimport swaggerUi from \"swagger-ui-express\";\nimport swaggerDocument from \"../swagger.json\";\nimport passport from \"./config/passport\";\nimport path from \"path\";\n\nconst app = express();\n\ndotenv.config();\nconnectDB();\n\napp.use(express.json());\n\n// Middlewares\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(cors());\n\n// configure the session middleware\napp.use(\n  session({\n    secret: process.env.JWT_SECRET_KEY,\n    resave: false,\n    saveUninitialized: false,\n  })\n);\n\napp.use(passport.initialize());\napp.use(passport.session());\n\napp.set(\"views\", path.join(__dirname, \"views\"));\n\n// Set the view engine to use\napp.set(\"view engine\", \"ejs\");\n\n// Configure the view engine to look for views in the 'views/pages' directory\napp.engine(\"ejs\", require(\"ejs\").renderFile);\napp.set(\"views\", path.join(__dirname, \"views\", \"pages\"));\n\n// Serialize user\npassport.serializeUser(function (user, done) {\n  done(null, user);\n});\n\n// Deserialize user\npassport.deserializeUser(function (user, done) {\n  done(null, user);\n});\n// Routes\napp.use(\"/users\", users);\napp.use(\"/api-docs\", swaggerUi.serve, swaggerUi.setup(swaggerDocument));\n\n/*  Google AUTH  */\n\n// Start server\nconst PORT = process.env.PORT || 5000;\napp.listen(PORT, () => console.log(`Server started on port ${PORT}`));\n\nexport default app;\n"],"mappings":"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"}},"mtime":1682849470020},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n_dotenv.default.config();\nlet dbUrl;\nif (process.env.NODE_ENV === \"test\") {\n  dbUrl = process.env.MONGODB_URL_TEST;\n} else {\n  dbUrl = process.env.MONGODB_URL;\n}\nconst connectDB = async () => {\n  try {\n    await _mongoose.default.connect(dbUrl, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true\n    });\n    console.log(\"MongoDB connected successfully\");\n  } catch (error) {\n    console.error(\"MongoDB connection error:\", error);\n  }\n};\nvar _default = connectDB;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9kb3RlbnYiLCJkb3RlbnYiLCJjb25maWciLCJkYlVybCIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsIk1PTkdPREJfVVJMX1RFU1QiLCJNT05HT0RCX1VSTCIsImNvbm5lY3REQiIsIm1vbmdvb3NlIiwiY29ubmVjdCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qZWFubmVkYXJjbnlpcmFtd2l6YS9Eb3dubG9hZHMvQWNjb3VudC1WZXJpZmljYXRpb24tQmFja2VuZC9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsiZGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuaW1wb3J0IGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XG5kb3RlbnYuY29uZmlnKCk7XG5cbmxldCBkYlVybDtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInRlc3RcIikge1xuICBkYlVybCA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJMX1RFU1Q7XG59IGVsc2Uge1xuICBkYlVybCA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJMO1xufVxuXG5jb25zdCBjb25uZWN0REIgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdChkYlVybCwge1xuICAgICAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxuICAgICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKFwiTW9uZ29EQiBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJNb25nb0RCIGNvbm5lY3Rpb24gZXJyb3I6XCIsIGVycm9yKTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdERCO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0FFLGVBQU0sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7QUFFZixJQUFJQyxLQUFLO0FBRVQsSUFBSUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxNQUFNLEVBQUU7RUFDbkNILEtBQUssR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNFLGdCQUFnQjtBQUN0QyxDQUFDLE1BQU07RUFDTEosS0FBSyxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csV0FBVztBQUNqQztBQUVBLE1BQU1DLFNBQVMsR0FBRyxNQUFBQSxDQUFBLEtBQVk7RUFDNUIsSUFBSTtJQUNGLE1BQU1DLGlCQUFRLENBQUNDLE9BQU8sQ0FBQ1IsS0FBSyxFQUFFO01BQzVCUyxlQUFlLEVBQUUsSUFBSTtNQUNyQkMsa0JBQWtCLEVBQUU7SUFDdEIsQ0FBQyxDQUFDO0lBQ0ZDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdDQUFnQyxDQUFDO0VBQy9DLENBQUMsQ0FBQyxPQUFPQyxLQUFLLEVBQUU7SUFDZEYsT0FBTyxDQUFDRSxLQUFLLENBQUMsMkJBQTJCLEVBQUVBLEtBQUssQ0FBQztFQUNuRDtBQUNGLENBQUM7QUFBQyxJQUFBQyxRQUFBLEdBRWFSLFNBQVM7QUFBQVMsT0FBQSxDQUFBQyxPQUFBLEdBQUFGLFFBQUEifQ==","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_dotenv","dotenv","config","dbUrl","process","env","NODE_ENV","MONGODB_URL_TEST","MONGODB_URL","connectDB","mongoose","connect","useNewUrlParser","useUnifiedTopology","console","log","error","_default","exports","default"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/","sources":["db.js"],"sourcesContent":["import mongoose from \"mongoose\";\nimport dotenv from \"dotenv\";\ndotenv.config();\n\nlet dbUrl;\n\nif (process.env.NODE_ENV === \"test\") {\n  dbUrl = process.env.MONGODB_URL_TEST;\n} else {\n  dbUrl = process.env.MONGODB_URL;\n}\n\nconst connectDB = async () => {\n  try {\n    await mongoose.connect(dbUrl, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true,\n    });\n    console.log(\"MongoDB connected successfully\");\n  } catch (error) {\n    console.error(\"MongoDB connection error:\", error);\n  }\n};\n\nexport default connectDB;\n"],"mappings":";;;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACAE,eAAM,CAACC,MAAM,CAAC,CAAC;AAEf,IAAIC,KAAK;AAET,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,MAAM,EAAE;EACnCH,KAAK,GAAGC,OAAO,CAACC,GAAG,CAACE,gBAAgB;AACtC,CAAC,MAAM;EACLJ,KAAK,GAAGC,OAAO,CAACC,GAAG,CAACG,WAAW;AACjC;AAEA,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;EAC5B,IAAI;IACF,MAAMC,iBAAQ,CAACC,OAAO,CAACR,KAAK,EAAE;MAC5BS,eAAe,EAAE,IAAI;MACrBC,kBAAkB,EAAE;IACtB,CAAC,CAAC;IACFC,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;EAC/C,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdF,OAAO,CAACE,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;EACnD;AACF,CAAC;AAAC,IAAAC,QAAA,GAEaR,SAAS;AAAAS,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1682778608834},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/routes/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _users = _interopRequireDefault(require(\"../controllers/users.js\"));\nvar _auth = _interopRequireDefault(require(\"../controllers/auth.js\"));\nvar _passport = _interopRequireDefault(require(\"../config/passport\"));\nconst router = _express.default.Router();\nrouter.post(\"/signup\", _users.default.createUser);\nrouter.get(\"/verify/:id/:token\", _users.default.verifyEmail);\nrouter.post(\"/login\", _auth.default.login);\n\n// Route handler for /success\nrouter.get(\"/success\", function (req, res) {\n  res.render(\"success\");\n});\nrouter.get(\"/google\", _passport.default.authenticate(\"google\", {\n  scope: [\"profile\", \"email\"]\n}));\nrouter.get(\"/auth/google/callback\", _passport.default.authenticate(\"google\", {\n  failureRedirect: \"/error\"\n}), function (req, res) {\n  // Successful authentication, redirect success.\n  res.redirect(\"/users/success\");\n});\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3VzZXJzIiwiX2F1dGgiLCJfcGFzc3BvcnQiLCJyb3V0ZXIiLCJleHByZXNzIiwiUm91dGVyIiwicG9zdCIsInVzZXJzIiwiY3JlYXRlVXNlciIsImdldCIsInZlcmlmeUVtYWlsIiwiYXV0aCIsImxvZ2luIiwicmVxIiwicmVzIiwicmVuZGVyIiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzY29wZSIsImZhaWx1cmVSZWRpcmVjdCIsInJlZGlyZWN0IiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2plYW5uZWRhcmNueWlyYW13aXphL0Rvd25sb2Fkcy9BY2NvdW50LVZlcmlmaWNhdGlvbi1CYWNrZW5kL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJ1c2Vycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHVzZXJzIGZyb20gXCIuLi9jb250cm9sbGVycy91c2Vycy5qc1wiO1xuaW1wb3J0IGF1dGggZnJvbSBcIi4uL2NvbnRyb2xsZXJzL2F1dGguanNcIjtcbmltcG9ydCBwYXNzcG9ydCBmcm9tIFwiLi4vY29uZmlnL3Bhc3Nwb3J0XCI7XG5cbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbnJvdXRlci5wb3N0KFwiL3NpZ251cFwiLCB1c2Vycy5jcmVhdGVVc2VyKTtcbnJvdXRlci5nZXQoXCIvdmVyaWZ5LzppZC86dG9rZW5cIiwgdXNlcnMudmVyaWZ5RW1haWwpO1xucm91dGVyLnBvc3QoXCIvbG9naW5cIiwgYXV0aC5sb2dpbik7XG5cbi8vIFJvdXRlIGhhbmRsZXIgZm9yIC9zdWNjZXNzXG5yb3V0ZXIuZ2V0KFwiL3N1Y2Nlc3NcIiwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gIHJlcy5yZW5kZXIoXCJzdWNjZXNzXCIpO1xufSk7XG5yb3V0ZXIuZ2V0KFxuICBcIi9nb29nbGVcIixcbiAgcGFzc3BvcnQuYXV0aGVudGljYXRlKFwiZ29vZ2xlXCIsIHsgc2NvcGU6IFtcInByb2ZpbGVcIiwgXCJlbWFpbFwiXSB9KVxuKTtcblxucm91dGVyLmdldChcbiAgXCIvYXV0aC9nb29nbGUvY2FsbGJhY2tcIixcbiAgcGFzc3BvcnQuYXV0aGVudGljYXRlKFwiZ29vZ2xlXCIsIHsgZmFpbHVyZVJlZGlyZWN0OiBcIi9lcnJvclwiIH0pLFxuICBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgICAvLyBTdWNjZXNzZnVsIGF1dGhlbnRpY2F0aW9uLCByZWRpcmVjdCBzdWNjZXNzLlxuICAgIHJlcy5yZWRpcmVjdChcIi91c2Vycy9zdWNjZXNzXCIpO1xuICB9XG4pO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxNQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxLQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxTQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNSSxNQUFNLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0FBRS9CRixNQUFNLENBQUNHLElBQUksQ0FBQyxTQUFTLEVBQUVDLGNBQUssQ0FBQ0MsVUFBVSxDQUFDO0FBQ3hDTCxNQUFNLENBQUNNLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRUYsY0FBSyxDQUFDRyxXQUFXLENBQUM7QUFDbkRQLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLFFBQVEsRUFBRUssYUFBSSxDQUFDQyxLQUFLLENBQUM7O0FBRWpDO0FBQ0FULE1BQU0sQ0FBQ00sR0FBRyxDQUFDLFVBQVUsRUFBRSxVQUFVSSxHQUFHLEVBQUVDLEdBQUcsRUFBRTtFQUN6Q0EsR0FBRyxDQUFDQyxNQUFNLENBQUMsU0FBUyxDQUFDO0FBQ3ZCLENBQUMsQ0FBQztBQUNGWixNQUFNLENBQUNNLEdBQUcsQ0FDUixTQUFTLEVBQ1RPLGlCQUFRLENBQUNDLFlBQVksQ0FBQyxRQUFRLEVBQUU7RUFBRUMsS0FBSyxFQUFFLENBQUMsU0FBUyxFQUFFLE9BQU87QUFBRSxDQUFDLENBQ2pFLENBQUM7QUFFRGYsTUFBTSxDQUFDTSxHQUFHLENBQ1IsdUJBQXVCLEVBQ3ZCTyxpQkFBUSxDQUFDQyxZQUFZLENBQUMsUUFBUSxFQUFFO0VBQUVFLGVBQWUsRUFBRTtBQUFTLENBQUMsQ0FBQyxFQUM5RCxVQUFVTixHQUFHLEVBQUVDLEdBQUcsRUFBRTtFQUNsQjtFQUNBQSxHQUFHLENBQUNNLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQztBQUNoQyxDQUNGLENBQUM7QUFBQyxJQUFBQyxRQUFBLEdBRWFsQixNQUFNO0FBQUFtQixPQUFBLENBQUFDLE9BQUEsR0FBQUYsUUFBQSJ9","map":{"version":3,"names":["_express","_interopRequireDefault","require","_users","_auth","_passport","router","express","Router","post","users","createUser","get","verifyEmail","auth","login","req","res","render","passport","authenticate","scope","failureRedirect","redirect","_default","exports","default"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/routes/","sources":["users.js"],"sourcesContent":["import express from \"express\";\nimport users from \"../controllers/users.js\";\nimport auth from \"../controllers/auth.js\";\nimport passport from \"../config/passport\";\n\nconst router = express.Router();\n\nrouter.post(\"/signup\", users.createUser);\nrouter.get(\"/verify/:id/:token\", users.verifyEmail);\nrouter.post(\"/login\", auth.login);\n\n// Route handler for /success\nrouter.get(\"/success\", function (req, res) {\n  res.render(\"success\");\n});\nrouter.get(\n  \"/google\",\n  passport.authenticate(\"google\", { scope: [\"profile\", \"email\"] })\n);\n\nrouter.get(\n  \"/auth/google/callback\",\n  passport.authenticate(\"google\", { failureRedirect: \"/error\" }),\n  function (req, res) {\n    // Successful authentication, redirect success.\n    res.redirect(\"/users/success\");\n  }\n);\n\nexport default router;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,KAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,SAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAEA,MAAMI,MAAM,GAAGC,gBAAO,CAACC,MAAM,CAAC,CAAC;AAE/BF,MAAM,CAACG,IAAI,CAAC,SAAS,EAAEC,cAAK,CAACC,UAAU,CAAC;AACxCL,MAAM,CAACM,GAAG,CAAC,oBAAoB,EAAEF,cAAK,CAACG,WAAW,CAAC;AACnDP,MAAM,CAACG,IAAI,CAAC,QAAQ,EAAEK,aAAI,CAACC,KAAK,CAAC;;AAEjC;AACAT,MAAM,CAACM,GAAG,CAAC,UAAU,EAAE,UAAUI,GAAG,EAAEC,GAAG,EAAE;EACzCA,GAAG,CAACC,MAAM,CAAC,SAAS,CAAC;AACvB,CAAC,CAAC;AACFZ,MAAM,CAACM,GAAG,CACR,SAAS,EACTO,iBAAQ,CAACC,YAAY,CAAC,QAAQ,EAAE;EAAEC,KAAK,EAAE,CAAC,SAAS,EAAE,OAAO;AAAE,CAAC,CACjE,CAAC;AAEDf,MAAM,CAACM,GAAG,CACR,uBAAuB,EACvBO,iBAAQ,CAACC,YAAY,CAAC,QAAQ,EAAE;EAAEE,eAAe,EAAE;AAAS,CAAC,CAAC,EAC9D,UAAUN,GAAG,EAAEC,GAAG,EAAE;EAClB;EACAA,GAAG,CAACM,QAAQ,CAAC,gBAAgB,CAAC;AAChC,CACF,CAAC;AAAC,IAAAC,QAAA,GAEalB,MAAM;AAAAmB,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1682849298478},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _httpStatus = _interopRequireDefault(require(\"http-status\"));\nvar _user = _interopRequireDefault(require(\"../models/user\"));\nvar _token = _interopRequireDefault(require(\"../models/token\"));\nvar _sendMail = _interopRequireDefault(require(\"../utils/sendMail\"));\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\nvar _accountState = require(\"../utils/enum/accountState\");\n// Create User\nconst createUser = async (req, res) => {\n  try {\n    const {\n      name,\n      email,\n      password,\n      gender,\n      age,\n      dateOfBirth,\n      maritalStatus,\n      nationality\n    } = req.body;\n\n    // Check if email is already taken\n    const existingUser = await _user.default.findOne({\n      email\n    });\n    if (existingUser) {\n      return res.status(400).json({\n        error: \"Email already taken\"\n      });\n    }\n\n    // Hash password\n    const saltRounds = 10;\n    const hashedPassword = await _bcrypt.default.hash(password, saltRounds);\n\n    // Create new user\n    const newUser = new _user.default({\n      name,\n      email,\n      password: hashedPassword,\n      // Use the correct field name\n      gender,\n      age,\n      dateOfBirth,\n      maritalStatus,\n      nationality\n    });\n    await newUser.save();\n    let newToken = await new _token.default({\n      // Use the correct variable name\n      userId: newUser._id,\n      token: _crypto.default.randomBytes(32).toString(\"hex\")\n    }).save();\n    const message = `${process.env.BASE_URL}/users/verify/${newUser.id}/${newToken.token}`;\n    await (0, _sendMail.default)(newUser.email, \"Verify Email\", message);\n    res.send(\"An email has been sent to your account, please verify your email\");\n  } catch (error) {\n    res.status(400).send(\"An error occurred\");\n  }\n};\nconst verifyEmail = async (req, res) => {\n  try {\n    const user = await _user.default.findOne({\n      _id: req.params.id\n    });\n    if (!user) return res.status(400).send(\"Invalid link\");\n    const token = await _token.default.findOne({\n      userId: user._id,\n      token: req.params.token\n    });\n    if (!token) return res.status(400).send(\"Invalid link\");\n    await _user.default.updateOne({\n      _id: user._id\n    }, {\n      isEmailVerified: true\n    });\n    await _token.default.findByIdAndRemove(token._id);\n    res.send(\"Email verified successfully\");\n  } catch (error) {\n    res.status(400).send(\"An error occurred\");\n  }\n};\nconst accountVerification = async (req, res) => {\n  const {\n    userId\n  } = req.params;\n  const {\n    nationalId,\n    passportNumber\n  } = req.body;\n  const {\n    nationalIdPic,\n    passportPic\n  } = req.files || {};\n  try {\n    let updatedFields = {\n      nationalId: nationalId,\n      passportNumber: passportNumber,\n      accountState: _accountState.AccountState.PENDING\n    };\n    if (nationalIdPic) {\n      const nationalIdPicLocation = nationalIdPic[0].Location;\n      updatedFields.nationalIdPic = nationalIdPicLocation;\n      updatedFields.accountState = _accountState.AccountState.VERIFIED;\n      await saveFileLocationToDatabase(userId, \"nationalIdPic\", nationalIdPicLocation);\n    }\n    if (passportPic) {\n      const passportPicLocation = passportPic[0].Location;\n      updatedFields.passportPic = passportPicLocation;\n      updatedFields.accountState = _accountState.AccountState.VERIFIED;\n      await saveFileLocationToDatabase(userId, \"passportPic\", passportPicLocation);\n    }\n    const updatedUser = await _user.default.findByIdAndUpdate(userId, updatedFields, {\n      new: true\n    });\n    const message = `Dear ${updatedUser.name},Your account has been verified`;\n    await (0, _sendMail.default)(updatedUser.email, \"Account Verification\", message);\n    return res.status(200).json({\n      messaged: \"Your account has been verified\"\n    });\n  } catch (err) {\n    console.error(err);\n    return res.status(500).json({\n      message: \"Server error\"\n    });\n  }\n};\nasync function saveFileLocationToDatabase(userId, fieldName, fileLocation) {\n  try {\n    const user = await _user.default.findById(userId);\n    if (!user) {\n      console.error(`User with id ${userId} not found`);\n      return;\n    }\n    user[fieldName] = fileLocation;\n    await user.save();\n  } catch (err) {\n    console.error(`Error saving ${fieldName} location to database for user ${userId}`, err);\n  }\n}\nvar _default = {\n  createUser,\n  verifyEmail,\n  accountVerification\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYmNyeXB0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfaHR0cFN0YXR1cyIsIl91c2VyIiwiX3Rva2VuIiwiX3NlbmRNYWlsIiwiX2NyeXB0byIsIl9hY2NvdW50U3RhdGUiLCJjcmVhdGVVc2VyIiwicmVxIiwicmVzIiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJnZW5kZXIiLCJhZ2UiLCJkYXRlT2ZCaXJ0aCIsIm1hcml0YWxTdGF0dXMiLCJuYXRpb25hbGl0eSIsImJvZHkiLCJleGlzdGluZ1VzZXIiLCJVc2VyIiwiZmluZE9uZSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInNhbHRSb3VuZHMiLCJoYXNoZWRQYXNzd29yZCIsImJjcnlwdCIsImhhc2giLCJuZXdVc2VyIiwic2F2ZSIsIm5ld1Rva2VuIiwiVG9rZW4iLCJ1c2VySWQiLCJfaWQiLCJ0b2tlbiIsImNyeXB0byIsInJhbmRvbUJ5dGVzIiwidG9TdHJpbmciLCJtZXNzYWdlIiwicHJvY2VzcyIsImVudiIsIkJBU0VfVVJMIiwiaWQiLCJzZW5kTWFpbCIsInNlbmQiLCJ2ZXJpZnlFbWFpbCIsInVzZXIiLCJwYXJhbXMiLCJ1cGRhdGVPbmUiLCJpc0VtYWlsVmVyaWZpZWQiLCJmaW5kQnlJZEFuZFJlbW92ZSIsImFjY291bnRWZXJpZmljYXRpb24iLCJuYXRpb25hbElkIiwicGFzc3BvcnROdW1iZXIiLCJuYXRpb25hbElkUGljIiwicGFzc3BvcnRQaWMiLCJmaWxlcyIsInVwZGF0ZWRGaWVsZHMiLCJhY2NvdW50U3RhdGUiLCJBY2NvdW50U3RhdGUiLCJQRU5ESU5HIiwibmF0aW9uYWxJZFBpY0xvY2F0aW9uIiwiTG9jYXRpb24iLCJWRVJJRklFRCIsInNhdmVGaWxlTG9jYXRpb25Ub0RhdGFiYXNlIiwicGFzc3BvcnRQaWNMb2NhdGlvbiIsInVwZGF0ZWRVc2VyIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJuZXciLCJtZXNzYWdlZCIsImVyciIsImNvbnNvbGUiLCJmaWVsZE5hbWUiLCJmaWxlTG9jYXRpb24iLCJmaW5kQnlJZCIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qZWFubmVkYXJjbnlpcmFtd2l6YS9Eb3dubG9hZHMvQWNjb3VudC1WZXJpZmljYXRpb24tQmFja2VuZC9zcmMvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJ1c2Vycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcbmltcG9ydCBodHRwU3RhdHVzIGZyb20gXCJodHRwLXN0YXR1c1wiO1xuaW1wb3J0IFVzZXIgZnJvbSBcIi4uL21vZGVscy91c2VyXCI7XG5pbXBvcnQgVG9rZW4gZnJvbSBcIi4uL21vZGVscy90b2tlblwiO1xuaW1wb3J0IHNlbmRNYWlsIGZyb20gXCIuLi91dGlscy9zZW5kTWFpbFwiO1xuaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgeyBBY2NvdW50U3RhdGUgfSBmcm9tIFwiLi4vdXRpbHMvZW51bS9hY2NvdW50U3RhdGVcIjtcblxuLy8gQ3JlYXRlIFVzZXJcbmNvbnN0IGNyZWF0ZVVzZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7XG4gICAgICBuYW1lLFxuICAgICAgZW1haWwsXG4gICAgICBwYXNzd29yZCxcbiAgICAgIGdlbmRlcixcbiAgICAgIGFnZSxcbiAgICAgIGRhdGVPZkJpcnRoLFxuICAgICAgbWFyaXRhbFN0YXR1cyxcbiAgICAgIG5hdGlvbmFsaXR5LFxuICAgIH0gPSByZXEuYm9keTtcblxuICAgIC8vIENoZWNrIGlmIGVtYWlsIGlzIGFscmVhZHkgdGFrZW5cbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KTtcbiAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJFbWFpbCBhbHJlYWR5IHRha2VuXCIgfSk7XG4gICAgfVxuXG4gICAgLy8gSGFzaCBwYXNzd29yZFxuICAgIGNvbnN0IHNhbHRSb3VuZHMgPSAxMDtcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0Um91bmRzKTtcblxuICAgIC8vIENyZWF0ZSBuZXcgdXNlclxuICAgIGNvbnN0IG5ld1VzZXIgPSBuZXcgVXNlcih7XG4gICAgICBuYW1lLFxuICAgICAgZW1haWwsXG4gICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsIC8vIFVzZSB0aGUgY29ycmVjdCBmaWVsZCBuYW1lXG4gICAgICBnZW5kZXIsXG4gICAgICBhZ2UsXG4gICAgICBkYXRlT2ZCaXJ0aCxcbiAgICAgIG1hcml0YWxTdGF0dXMsXG4gICAgICBuYXRpb25hbGl0eSxcbiAgICB9KTtcbiAgICBhd2FpdCBuZXdVc2VyLnNhdmUoKTtcblxuICAgIGxldCBuZXdUb2tlbiA9IGF3YWl0IG5ldyBUb2tlbih7XG4gICAgICAvLyBVc2UgdGhlIGNvcnJlY3QgdmFyaWFibGUgbmFtZVxuICAgICAgdXNlcklkOiBuZXdVc2VyLl9pZCxcbiAgICAgIHRva2VuOiBjcnlwdG8ucmFuZG9tQnl0ZXMoMzIpLnRvU3RyaW5nKFwiaGV4XCIpLFxuICAgIH0pLnNhdmUoKTtcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBgJHtwcm9jZXNzLmVudi5CQVNFX1VSTH0vdXNlcnMvdmVyaWZ5LyR7bmV3VXNlci5pZH0vJHtuZXdUb2tlbi50b2tlbn1gO1xuICAgIGF3YWl0IHNlbmRNYWlsKG5ld1VzZXIuZW1haWwsIFwiVmVyaWZ5IEVtYWlsXCIsIG1lc3NhZ2UpO1xuXG4gICAgcmVzLnNlbmQoXG4gICAgICBcIkFuIGVtYWlsIGhhcyBiZWVuIHNlbnQgdG8geW91ciBhY2NvdW50LCBwbGVhc2UgdmVyaWZ5IHlvdXIgZW1haWxcIlxuICAgICk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoXCJBbiBlcnJvciBvY2N1cnJlZFwiKTtcbiAgfVxufTtcblxuY29uc3QgdmVyaWZ5RW1haWwgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgX2lkOiByZXEucGFyYW1zLmlkIH0pO1xuICAgIGlmICghdXNlcikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKFwiSW52YWxpZCBsaW5rXCIpO1xuXG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBUb2tlbi5maW5kT25lKHtcbiAgICAgIHVzZXJJZDogdXNlci5faWQsXG4gICAgICB0b2tlbjogcmVxLnBhcmFtcy50b2tlbixcbiAgICB9KTtcbiAgICBpZiAoIXRva2VuKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoXCJJbnZhbGlkIGxpbmtcIik7XG5cbiAgICBhd2FpdCBVc2VyLnVwZGF0ZU9uZSh7IF9pZDogdXNlci5faWQgfSwgeyBpc0VtYWlsVmVyaWZpZWQ6IHRydWUgfSk7XG4gICAgYXdhaXQgVG9rZW4uZmluZEJ5SWRBbmRSZW1vdmUodG9rZW4uX2lkKTtcblxuICAgIHJlcy5zZW5kKFwiRW1haWwgdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKFwiQW4gZXJyb3Igb2NjdXJyZWRcIik7XG4gIH1cbn07XG5cbmNvbnN0IGFjY291bnRWZXJpZmljYXRpb24gPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXM7XG4gIGNvbnN0IHsgbmF0aW9uYWxJZCwgcGFzc3BvcnROdW1iZXIgfSA9IHJlcS5ib2R5O1xuICBjb25zdCB7IG5hdGlvbmFsSWRQaWMsIHBhc3Nwb3J0UGljIH0gPSByZXEuZmlsZXMgfHwge307XG5cbiAgdHJ5IHtcbiAgICBsZXQgdXBkYXRlZEZpZWxkcyA9IHtcbiAgICAgIG5hdGlvbmFsSWQ6IG5hdGlvbmFsSWQsXG4gICAgICBwYXNzcG9ydE51bWJlcjogcGFzc3BvcnROdW1iZXIsXG4gICAgICBhY2NvdW50U3RhdGU6IEFjY291bnRTdGF0ZS5QRU5ESU5HLFxuICAgIH07XG5cbiAgICBpZiAobmF0aW9uYWxJZFBpYykge1xuICAgICAgY29uc3QgbmF0aW9uYWxJZFBpY0xvY2F0aW9uID0gbmF0aW9uYWxJZFBpY1swXS5Mb2NhdGlvbjtcbiAgICAgIHVwZGF0ZWRGaWVsZHMubmF0aW9uYWxJZFBpYyA9IG5hdGlvbmFsSWRQaWNMb2NhdGlvbjtcbiAgICAgIHVwZGF0ZWRGaWVsZHMuYWNjb3VudFN0YXRlID0gQWNjb3VudFN0YXRlLlZFUklGSUVEO1xuICAgICAgYXdhaXQgc2F2ZUZpbGVMb2NhdGlvblRvRGF0YWJhc2UoXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgXCJuYXRpb25hbElkUGljXCIsXG4gICAgICAgIG5hdGlvbmFsSWRQaWNMb2NhdGlvblxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAocGFzc3BvcnRQaWMpIHtcbiAgICAgIGNvbnN0IHBhc3Nwb3J0UGljTG9jYXRpb24gPSBwYXNzcG9ydFBpY1swXS5Mb2NhdGlvbjtcbiAgICAgIHVwZGF0ZWRGaWVsZHMucGFzc3BvcnRQaWMgPSBwYXNzcG9ydFBpY0xvY2F0aW9uO1xuICAgICAgdXBkYXRlZEZpZWxkcy5hY2NvdW50U3RhdGUgPSBBY2NvdW50U3RhdGUuVkVSSUZJRUQ7XG4gICAgICBhd2FpdCBzYXZlRmlsZUxvY2F0aW9uVG9EYXRhYmFzZShcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBcInBhc3Nwb3J0UGljXCIsXG4gICAgICAgIHBhc3Nwb3J0UGljTG9jYXRpb25cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHVzZXJJZCwgdXBkYXRlZEZpZWxkcywge1xuICAgICAgbmV3OiB0cnVlLFxuICAgIH0pO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBgRGVhciAke3VwZGF0ZWRVc2VyLm5hbWV9LFlvdXIgYWNjb3VudCBoYXMgYmVlbiB2ZXJpZmllZGA7XG4gICAgYXdhaXQgc2VuZE1haWwodXBkYXRlZFVzZXIuZW1haWwsIFwiQWNjb3VudCBWZXJpZmljYXRpb25cIiwgbWVzc2FnZSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZWQ6IFwiWW91ciBhY2NvdW50IGhhcyBiZWVuIHZlcmlmaWVkXCIgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIlNlcnZlciBlcnJvclwiIH0pO1xuICB9XG59O1xuXG5hc3luYyBmdW5jdGlvbiBzYXZlRmlsZUxvY2F0aW9uVG9EYXRhYmFzZSh1c2VySWQsIGZpZWxkTmFtZSwgZmlsZUxvY2F0aW9uKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVzZXIgd2l0aCBpZCAke3VzZXJJZH0gbm90IGZvdW5kYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdXNlcltmaWVsZE5hbWVdID0gZmlsZUxvY2F0aW9uO1xuICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgYEVycm9yIHNhdmluZyAke2ZpZWxkTmFtZX0gbG9jYXRpb24gdG8gZGF0YWJhc2UgZm9yIHVzZXIgJHt1c2VySWR9YCxcbiAgICAgIGVyclxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgeyBjcmVhdGVVc2VyLCB2ZXJpZnlFbWFpbCwgYWNjb3VudFZlcmlmaWNhdGlvbiB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFB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","map":{"version":3,"names":["_bcrypt","_interopRequireDefault","require","_httpStatus","_user","_token","_sendMail","_crypto","_accountState","createUser","req","res","name","email","password","gender","age","dateOfBirth","maritalStatus","nationality","body","existingUser","User","findOne","status","json","error","saltRounds","hashedPassword","bcrypt","hash","newUser","save","newToken","Token","userId","_id","token","crypto","randomBytes","toString","message","process","env","BASE_URL","id","sendMail","send","verifyEmail","user","params","updateOne","isEmailVerified","findByIdAndRemove","accountVerification","nationalId","passportNumber","nationalIdPic","passportPic","files","updatedFields","accountState","AccountState","PENDING","nationalIdPicLocation","Location","VERIFIED","saveFileLocationToDatabase","passportPicLocation","updatedUser","findByIdAndUpdate","new","messaged","err","console","fieldName","fileLocation","findById","_default","exports","default"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/","sources":["users.js"],"sourcesContent":["import bcrypt from \"bcrypt\";\nimport httpStatus from \"http-status\";\nimport User from \"../models/user\";\nimport Token from \"../models/token\";\nimport sendMail from \"../utils/sendMail\";\nimport crypto from \"crypto\";\nimport { AccountState } from \"../utils/enum/accountState\";\n\n// Create User\nconst createUser = async (req, res) => {\n  try {\n    const {\n      name,\n      email,\n      password,\n      gender,\n      age,\n      dateOfBirth,\n      maritalStatus,\n      nationality,\n    } = req.body;\n\n    // Check if email is already taken\n    const existingUser = await User.findOne({ email });\n    if (existingUser) {\n      return res.status(400).json({ error: \"Email already taken\" });\n    }\n\n    // Hash password\n    const saltRounds = 10;\n    const hashedPassword = await bcrypt.hash(password, saltRounds);\n\n    // Create new user\n    const newUser = new User({\n      name,\n      email,\n      password: hashedPassword, // Use the correct field name\n      gender,\n      age,\n      dateOfBirth,\n      maritalStatus,\n      nationality,\n    });\n    await newUser.save();\n\n    let newToken = await new Token({\n      // Use the correct variable name\n      userId: newUser._id,\n      token: crypto.randomBytes(32).toString(\"hex\"),\n    }).save();\n\n    const message = `${process.env.BASE_URL}/users/verify/${newUser.id}/${newToken.token}`;\n    await sendMail(newUser.email, \"Verify Email\", message);\n\n    res.send(\n      \"An email has been sent to your account, please verify your email\"\n    );\n  } catch (error) {\n    res.status(400).send(\"An error occurred\");\n  }\n};\n\nconst verifyEmail = async (req, res) => {\n  try {\n    const user = await User.findOne({ _id: req.params.id });\n    if (!user) return res.status(400).send(\"Invalid link\");\n\n    const token = await Token.findOne({\n      userId: user._id,\n      token: req.params.token,\n    });\n    if (!token) return res.status(400).send(\"Invalid link\");\n\n    await User.updateOne({ _id: user._id }, { isEmailVerified: true });\n    await Token.findByIdAndRemove(token._id);\n\n    res.send(\"Email verified successfully\");\n  } catch (error) {\n    res.status(400).send(\"An error occurred\");\n  }\n};\n\nconst accountVerification = async (req, res) => {\n  const { userId } = req.params;\n  const { nationalId, passportNumber } = req.body;\n  const { nationalIdPic, passportPic } = req.files || {};\n\n  try {\n    let updatedFields = {\n      nationalId: nationalId,\n      passportNumber: passportNumber,\n      accountState: AccountState.PENDING,\n    };\n\n    if (nationalIdPic) {\n      const nationalIdPicLocation = nationalIdPic[0].Location;\n      updatedFields.nationalIdPic = nationalIdPicLocation;\n      updatedFields.accountState = AccountState.VERIFIED;\n      await saveFileLocationToDatabase(\n        userId,\n        \"nationalIdPic\",\n        nationalIdPicLocation\n      );\n    }\n\n    if (passportPic) {\n      const passportPicLocation = passportPic[0].Location;\n      updatedFields.passportPic = passportPicLocation;\n      updatedFields.accountState = AccountState.VERIFIED;\n      await saveFileLocationToDatabase(\n        userId,\n        \"passportPic\",\n        passportPicLocation\n      );\n    }\n\n    const updatedUser = await User.findByIdAndUpdate(userId, updatedFields, {\n      new: true,\n    });\n    const message = `Dear ${updatedUser.name},Your account has been verified`;\n    await sendMail(updatedUser.email, \"Account Verification\", message);\n    return res.status(200).json({ messaged: \"Your account has been verified\" });\n  } catch (err) {\n    console.error(err);\n    return res.status(500).json({ message: \"Server error\" });\n  }\n};\n\nasync function saveFileLocationToDatabase(userId, fieldName, fileLocation) {\n  try {\n    const user = await User.findById(userId);\n    if (!user) {\n      console.error(`User with id ${userId} not found`);\n      return;\n    }\n\n    user[fieldName] = fileLocation;\n    await user.save();\n  } catch (err) {\n    console.error(\n      `Error saving ${fieldName} location to database for user ${userId}`,\n      err\n    );\n  }\n}\n\nexport default { createUser, verifyEmail, accountVerification };\n"],"mappings":"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"}},"mtime":1683147956342},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/routes/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _users = _interopRequireDefault(require(\"../controllers/users.js\"));\nvar _auth = _interopRequireDefault(require(\"../controllers/auth.js\"));\nvar _passport = _interopRequireDefault(require(\"../config/passport\"));\nvar _authMiddleware = require(\"../middleware/authMiddleware.js\");\nvar _multer = _interopRequireDefault(require(\"multer\"));\nvar _multerS = _interopRequireDefault(require(\"multer-s3\"));\nvar _clientS = require(\"@aws-sdk/client-s3\");\nconst router = _express.default.Router();\nconst s3 = new _clientS.S3({\n  accessKeyId: process.env.AWS_ACCESS_KEY_ID,\n  secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY,\n  region: process.env.AWS_DEFAULT_REGION\n});\nconst upload = (0, _multer.default)({\n  storage: (0, _multerS.default)({\n    s3: s3,\n    bucket: process.env.AWS_S3_BUCKET,\n    metadata: function (req, file, cb) {\n      cb(null, {\n        fieldName: file.fieldname\n      });\n    },\n    key: function (req, file, cb) {\n      cb(null, Date.now().toString());\n    }\n  })\n});\nrouter.post(\"/signup\", _users.default.createUser);\nrouter.get(\"/verify/:id/:token\", _users.default.verifyEmail);\nrouter.post(\"/login\", _auth.default.login);\n\n// Route handler for /success\nrouter.get(\"/success\", function (req, res) {\n  res.render(\"success\");\n});\nrouter.get(\"/google\", _passport.default.authenticate(\"google\", {\n  scope: [\"profile\", \"email\"]\n}));\nrouter.get(\"/auth/google/callback\", _passport.default.authenticate(\"google\", {\n  failureRedirect: \"/error\"\n}), function (req, res) {\n  // Successful authentication, redirect success.\n  res.redirect(\"/users/success\");\n});\nrouter.post(\"/reset-password\", _authMiddleware.isAuthenticated, _auth.default.resetPassword);\nrouter.post(\"/reset-password/:token\", _authMiddleware.isAuthenticated, _auth.default.resetLink);\nrouter.patch(\"/:userId\", _authMiddleware.isAuthenticated, upload.fields([{\n  name: \"nationalIdPic\",\n  maxCount: 1\n}, {\n  name: \"passportPic\",\n  maxCount: 1\n}]), _users.default.accountVerification);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3VzZXJzIiwiX2F1dGgiLCJfcGFzc3BvcnQiLCJfYXV0aE1pZGRsZXdhcmUiLCJfbXVsdGVyIiwiX211bHRlclMiLCJfY2xpZW50UyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJzMyIsIlMzIiwiYWNjZXNzS2V5SWQiLCJwcm9jZXNzIiwiZW52IiwiQVdTX0FDQ0VTU19LRVlfSUQiLCJzZWNyZXRBY2Nlc3NLZXkiLCJBV1NfU0VDUkVUX0FDQ0VTU19LRVkiLCJyZWdpb24iLCJBV1NfREVGQVVMVF9SRUdJT04iLCJ1cGxvYWQiLCJtdWx0ZXIiLCJzdG9yYWdlIiwibXVsdGVyUzMiLCJidWNrZXQiLCJBV1NfUzNfQlVDS0VUIiwibWV0YWRhdGEiLCJyZXEiLCJmaWxlIiwiY2IiLCJmaWVsZE5hbWUiLCJmaWVsZG5hbWUiLCJrZXkiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJwb3N0IiwidXNlcnMiLCJjcmVhdGVVc2VyIiwiZ2V0IiwidmVyaWZ5RW1haWwiLCJhdXRoIiwibG9naW4iLCJyZXMiLCJyZW5kZXIiLCJwYXNzcG9ydCIsImF1dGhlbnRpY2F0ZSIsInNjb3BlIiwiZmFpbHVyZVJlZGlyZWN0IiwicmVkaXJlY3QiLCJpc0F1dGhlbnRpY2F0ZWQiLCJyZXNldFBhc3N3b3JkIiwicmVzZXRMaW5rIiwicGF0Y2giLCJmaWVsZHMiLCJuYW1lIiwibWF4Q291bnQiLCJhY2NvdW50VmVyaWZpY2F0aW9uIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2plYW5uZWRhcmNueWlyYW13aXphL0Rvd25sb2Fkcy9BY2NvdW50LVZlcmlmaWNhdGlvbi1CYWNrZW5kL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJ1c2Vycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHVzZXJzIGZyb20gXCIuLi9jb250cm9sbGVycy91c2Vycy5qc1wiO1xuaW1wb3J0IGF1dGggZnJvbSBcIi4uL2NvbnRyb2xsZXJzL2F1dGguanNcIjtcbmltcG9ydCBwYXNzcG9ydCBmcm9tIFwiLi4vY29uZmlnL3Bhc3Nwb3J0XCI7XG5pbXBvcnQgeyBpc0F1dGhlbnRpY2F0ZWQgfSBmcm9tIFwiLi4vbWlkZGxld2FyZS9hdXRoTWlkZGxld2FyZS5qc1wiO1xuaW1wb3J0IG11bHRlciBmcm9tIFwibXVsdGVyXCI7XG5pbXBvcnQgbXVsdGVyUzMgZnJvbSBcIm11bHRlci1zM1wiO1xuaW1wb3J0IHsgUzMgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LXMzXCI7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5jb25zdCBzMyA9IG5ldyBTMyh7XG4gIGFjY2Vzc0tleUlkOiBwcm9jZXNzLmVudi5BV1NfQUNDRVNTX0tFWV9JRCxcbiAgc2VjcmV0QWNjZXNzS2V5OiBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVksXG4gIHJlZ2lvbjogcHJvY2Vzcy5lbnYuQVdTX0RFRkFVTFRfUkVHSU9OLFxufSk7XG5cbmNvbnN0IHVwbG9hZCA9IG11bHRlcih7XG4gIHN0b3JhZ2U6IG11bHRlclMzKHtcbiAgICBzMzogczMsXG4gICAgYnVja2V0OiBwcm9jZXNzLmVudi5BV1NfUzNfQlVDS0VULFxuICAgIG1ldGFkYXRhOiBmdW5jdGlvbiAocmVxLCBmaWxlLCBjYikge1xuICAgICAgY2IobnVsbCwgeyBmaWVsZE5hbWU6IGZpbGUuZmllbGRuYW1lIH0pO1xuICAgIH0sXG4gICAga2V5OiBmdW5jdGlvbiAocmVxLCBmaWxlLCBjYikge1xuICAgICAgY2IobnVsbCwgRGF0ZS5ub3coKS50b1N0cmluZygpKTtcbiAgICB9LFxuICB9KSxcbn0pO1xuXG5yb3V0ZXIucG9zdChcIi9zaWdudXBcIiwgdXNlcnMuY3JlYXRlVXNlcik7XG5yb3V0ZXIuZ2V0KFwiL3ZlcmlmeS86aWQvOnRva2VuXCIsIHVzZXJzLnZlcmlmeUVtYWlsKTtcbnJvdXRlci5wb3N0KFwiL2xvZ2luXCIsIGF1dGgubG9naW4pO1xuXG4vLyBSb3V0ZSBoYW5kbGVyIGZvciAvc3VjY2Vzc1xucm91dGVyLmdldChcIi9zdWNjZXNzXCIsIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICByZXMucmVuZGVyKFwic3VjY2Vzc1wiKTtcbn0pO1xucm91dGVyLmdldChcbiAgXCIvZ29vZ2xlXCIsXG4gIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZShcImdvb2dsZVwiLCB7IHNjb3BlOiBbXCJwcm9maWxlXCIsIFwiZW1haWxcIl0gfSlcbik7XG5cbnJvdXRlci5nZXQoXG4gIFwiL2F1dGgvZ29vZ2xlL2NhbGxiYWNrXCIsXG4gIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZShcImdvb2dsZVwiLCB7IGZhaWx1cmVSZWRpcmVjdDogXCIvZXJyb3JcIiB9KSxcbiAgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gICAgLy8gU3VjY2Vzc2Z1bCBhdXRoZW50aWNhdGlvbiwgcmVkaXJlY3Qgc3VjY2Vzcy5cbiAgICByZXMucmVkaXJlY3QoXCIvdXNlcnMvc3VjY2Vzc1wiKTtcbiAgfVxuKTtcblxucm91dGVyLnBvc3QoXCIvcmVzZXQtcGFzc3dvcmRcIiwgaXNBdXRoZW50aWNhdGVkLCBhdXRoLnJlc2V0UGFzc3dvcmQpO1xucm91dGVyLnBvc3QoXCIvcmVzZXQtcGFzc3dvcmQvOnRva2VuXCIsIGlzQXV0aGVudGljYXRlZCwgYXV0aC5yZXNldExpbmspO1xucm91dGVyLnBhdGNoKFxuICBcIi86dXNlcklkXCIsXG4gIGlzQXV0aGVudGljYXRlZCxcbiAgdXBsb2FkLmZpZWxkcyhbXG4gICAgeyBuYW1lOiBcIm5hdGlvbmFsSWRQaWNcIiwgbWF4Q291bnQ6IDEgfSxcbiAgICB7IG5hbWU6IFwicGFzc3BvcnRQaWNcIiwgbWF4Q291bnQ6IDEgfSxcbiAgXSksXG4gIHVzZXJzLmFjY291bnRWZXJpZmljYXRpb25cbik7XG5leHBvcnQgZGVmYXVsdCBy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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_users","_auth","_passport","_authMiddleware","_multer","_multerS","_clientS","router","express","Router","s3","S3","accessKeyId","process","env","AWS_ACCESS_KEY_ID","secretAccessKey","AWS_SECRET_ACCESS_KEY","region","AWS_DEFAULT_REGION","upload","multer","storage","multerS3","bucket","AWS_S3_BUCKET","metadata","req","file","cb","fieldName","fieldname","key","Date","now","toString","post","users","createUser","get","verifyEmail","auth","login","res","render","passport","authenticate","scope","failureRedirect","redirect","isAuthenticated","resetPassword","resetLink","patch","fields","name","maxCount","accountVerification","_default","exports","default"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/routes/","sources":["users.js"],"sourcesContent":["import express from \"express\";\nimport users from \"../controllers/users.js\";\nimport auth from \"../controllers/auth.js\";\nimport passport from \"../config/passport\";\nimport { isAuthenticated } from \"../middleware/authMiddleware.js\";\nimport multer from \"multer\";\nimport multerS3 from \"multer-s3\";\nimport { S3 } from \"@aws-sdk/client-s3\";\nconst router = express.Router();\n\nconst s3 = new S3({\n  accessKeyId: process.env.AWS_ACCESS_KEY_ID,\n  secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY,\n  region: process.env.AWS_DEFAULT_REGION,\n});\n\nconst upload = multer({\n  storage: multerS3({\n    s3: s3,\n    bucket: process.env.AWS_S3_BUCKET,\n    metadata: function (req, file, cb) {\n      cb(null, { fieldName: file.fieldname });\n    },\n    key: function (req, file, cb) {\n      cb(null, Date.now().toString());\n    },\n  }),\n});\n\nrouter.post(\"/signup\", users.createUser);\nrouter.get(\"/verify/:id/:token\", users.verifyEmail);\nrouter.post(\"/login\", auth.login);\n\n// Route handler for /success\nrouter.get(\"/success\", function (req, res) {\n  res.render(\"success\");\n});\nrouter.get(\n  \"/google\",\n  passport.authenticate(\"google\", { scope: [\"profile\", \"email\"] })\n);\n\nrouter.get(\n  \"/auth/google/callback\",\n  passport.authenticate(\"google\", { failureRedirect: \"/error\" }),\n  function (req, res) {\n    // Successful authentication, redirect success.\n    res.redirect(\"/users/success\");\n  }\n);\n\nrouter.post(\"/reset-password\", isAuthenticated, auth.resetPassword);\nrouter.post(\"/reset-password/:token\", isAuthenticated, auth.resetLink);\nrouter.patch(\n  \"/:userId\",\n  isAuthenticated,\n  upload.fields([\n    { name: \"nationalIdPic\", maxCount: 1 },\n    { name: \"passportPic\", maxCount: 1 },\n  ]),\n  users.accountVerification\n);\nexport default router;\n"],"mappings":"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"}},"mtime":1683150802752},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/models/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _maritalStatus = require(\"../utils/enum/maritalStatus.enum\");\nvar _gender = require(\"../utils/gender.enum\");\nvar _accountState = require(\"../utils/enum/accountState\");\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n// Define user schema\nconst userSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    unique: true,\n    required: true\n  },\n  password: {\n    type: String,\n    required: true,\n    password: {\n      type: String,\n      required: true,\n      validate: {\n        validator: function (v) {\n          return /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,12}$/.test(v);\n        },\n        message: props => `${props.value} is not a valid password. Password must be alphanumeric and between 8 and 12 characters.`\n      }\n    }\n  },\n  profilePicture: {\n    type: String\n  },\n  gender: {\n    type: String,\n    enum: _gender.GenderStatus\n  },\n  age: {\n    type: Number\n  },\n  accountState: {\n    type: String,\n    enum: _accountState.AccountState,\n    default: _accountState.AccountState.UNVERIFIED\n  },\n  dateOfBirth: {\n    type: String\n  },\n  maritalStatus: {\n    type: String,\n    enum: _maritalStatus.MaritalStatus\n  },\n  nationality: {\n    type: String\n  },\n  nationalId: {\n    type: String,\n    validate: {\n      validator: function (v) {\n        return /^1([9][5-9]|[0-9][0-9])\\d{8}$/.test(v);\n      },\n      message: \"Invalid Rwandan national ID format\"\n    }\n  },\n  passportNumber: {\n    type: String,\n    validate: {\n      validator: function (v) {\n        return /^[A-Z]{2}[A-Z0-9]{3,20}$/.test(v);\n      },\n      message: \"Invalid passport ID format\"\n    }\n  },\n  nationalIdPicture: {\n    type: String\n  },\n  passportPicture: {\n    type: String\n  },\n  isEmailVerified: {\n    type: Boolean,\n    default: false\n  },\n  resetToken: {\n    type: String\n  },\n  resetExpires: {\n    type: String\n  }\n});\nuserSchema.methods.verifyPassword = async function (password) {\n  return await _bcrypt.default.compare(password, this.password);\n};\nconst User = _mongoose.default.model(\"User\", userSchema);\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9tYXJpdGFsU3RhdHVzIiwiX2dlbmRlciIsIl9hY2NvdW50U3RhdGUiLCJfYmNyeXB0IiwidXNlclNjaGVtYSIsIm1vbmdvb3NlIiwiU2NoZW1hIiwibmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsImVtYWlsIiwidW5pcXVlIiwicGFzc3dvcmQiLCJ2YWxpZGF0ZSIsInZhbGlkYXRvciIsInYiLCJ0ZXN0IiwibWVzc2FnZSIsInByb3BzIiwidmFsdWUiLCJwcm9maWxlUGljdHVyZSIsImdlbmRlciIsImVudW0iLCJHZW5kZXJTdGF0dXMiLCJhZ2UiLCJOdW1iZXIiLCJhY2NvdW50U3RhdGUiLCJBY2NvdW50U3RhdGUiLCJkZWZhdWx0IiwiVU5WRVJJRklFRCIsImRhdGVPZkJpcnRoIiwibWFyaXRhbFN0YXR1cyIsIk1hcml0YWxTdGF0dXMiLCJuYXRpb25hbGl0eSIsIm5hdGlvbmFsSWQiLCJwYXNzcG9ydE51bWJlciIsIm5hdGlvbmFsSWRQaWN0dXJlIiwicGFzc3BvcnRQaWN0dXJlIiwiaXNFbWFpbFZlcmlmaWVkIiwiQm9vbGVhbiIsInJlc2V0VG9rZW4iLCJyZXNldEV4cGlyZXMiLCJtZXRob2RzIiwidmVyaWZ5UGFzc3dvcmQiLCJiY3J5cHQiLCJjb21wYXJlIiwiVXNlciIsIm1vZGVsIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvamVhbm5lZGFyY255aXJhbXdpemEvRG93bmxvYWRzL0FjY291bnQtVmVyaWZpY2F0aW9uLUJhY2tlbmQvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbInVzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuaW1wb3J0IHsgTWFyaXRhbFN0YXR1cyB9IGZyb20gXCIuLi91dGlscy9lbnVtL21hcml0YWxTdGF0dXMuZW51bVwiO1xuaW1wb3J0IHsgR2VuZGVyU3RhdHVzIH0gZnJvbSBcIi4uL3V0aWxzL2dlbmRlci5lbnVtXCI7XG5pbXBvcnQgeyBBY2NvdW50U3RhdGUgfSBmcm9tIFwiLi4vdXRpbHMvZW51bS9hY2NvdW50U3RhdGVcIjtcbmltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xuXG4vLyBEZWZpbmUgdXNlciBzY2hlbWFcbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgbmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGVtYWlsOiB7IHR5cGU6IFN0cmluZywgdW5pcXVlOiB0cnVlLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBwYXNzd29yZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICBwYXNzd29yZDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICB2YWxpZGF0ZToge1xuICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgcmV0dXJuIC9eKD89LipbQS1aYS16XSkoPz0uKlxcZClbQS1aYS16XFxkXXs4LDEyfSQvLnRlc3Qodik7XG4gICAgICAgIH0sXG4gICAgICAgIG1lc3NhZ2U6IChwcm9wcykgPT5cbiAgICAgICAgICBgJHtwcm9wcy52YWx1ZX0gaXMgbm90IGEgdmFsaWQgcGFzc3dvcmQuIFBhc3N3b3JkIG11c3QgYmUgYWxwaGFudW1lcmljIGFuZCBiZXR3ZWVuIDggYW5kIDEyIGNoYXJhY3RlcnMuYCxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAgcHJvZmlsZVBpY3R1cmU6IHsgdHlwZTogU3RyaW5nIH0sXG4gIGdlbmRlcjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBlbnVtOiBHZW5kZXJTdGF0dXMsXG4gIH0sXG4gIGFnZTogeyB0eXBlOiBOdW1iZXIgfSxcbiAgYWNjb3VudFN0YXRlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGVudW06IEFjY291bnRTdGF0ZSxcbiAgICBkZWZhdWx0OiBBY2NvdW50U3RhdGUuVU5WRVJJRklFRCxcbiAgfSxcbiAgZGF0ZU9mQmlydGg6IHsgdHlwZTogU3RyaW5nIH0sXG4gIG1hcml0YWxTdGF0dXM6IHsgdHlwZTogU3RyaW5nLCBlbnVtOiBNYXJpdGFsU3RhdHVzIH0sXG4gIG5hdGlvbmFsaXR5OiB7IHR5cGU6IFN0cmluZyB9LFxuICBuYXRpb25hbElkOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHZhbGlkYXRlOiB7XG4gICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiAvXjEoWzldWzUtOV18WzAtOV1bMC05XSlcXGR7OH0kLy50ZXN0KHYpO1xuICAgICAgfSxcbiAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBSd2FuZGFuIG5hdGlvbmFsIElEIGZvcm1hdFwiLFxuICAgIH0sXG4gIH0sXG4gIHBhc3Nwb3J0TnVtYmVyOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHZhbGlkYXRlOiB7XG4gICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiAvXltBLVpdezJ9W0EtWjAtOV17MywyMH0kLy50ZXN0KHYpO1xuICAgICAgfSxcbiAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBwYXNzcG9ydCBJRCBmb3JtYXRcIixcbiAgICB9LFxuICB9LFxuXG4gIG5hdGlvbmFsSWRQaWN0dXJlOiB7IHR5cGU6IFN0cmluZyB9LFxuICBwYXNzcG9ydFBpY3R1cmU6IHsgdHlwZTogU3RyaW5nIH0sXG4gIGlzRW1haWxWZXJpZmllZDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuICByZXNldFRva2VuOiB7IHR5cGU6IFN0cmluZyB9LFxuICByZXNldEV4cGlyZXM6IHsgdHlwZTogU3RyaW5nIH0sXG59KTtcblxudXNlclNjaGVtYS5tZXRob2RzLnZlcmlmeVBhc3N3b3JkID0gYXN5bmMgZnVuY3Rpb24gKHBhc3N3b3JkKSB7XG4gIHJldHVybiBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdGhpcy5wYXNzd29yZCk7XG59O1xuY29uc3QgVXNlciA9IG1vbmdvb3NlLm1vZGVsKFwiVXNlclwiLCB1c2VyU2NoZW1hKTtcblxuZXhwb3J0IGRlZmF1bHQgVXNlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLFNBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLE9BQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLGFBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLE9BQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBO0FBQ0EsTUFBTUssVUFBVSxHQUFHLElBQUlDLGlCQUFRLENBQUNDLE1BQU0sQ0FBQztFQUNyQ0MsSUFBSSxFQUFFO0lBQUVDLElBQUksRUFBRUMsTUFBTTtJQUFFQyxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3RDQyxLQUFLLEVBQUU7SUFBRUgsSUFBSSxFQUFFQyxNQUFNO0lBQUVHLE1BQU0sRUFBRSxJQUFJO0lBQUVGLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDckRHLFFBQVEsRUFBRTtJQUNSTCxJQUFJLEVBQUVDLE1BQU07SUFDWkMsUUFBUSxFQUFFLElBQUk7SUFDZEcsUUFBUSxFQUFFO01BQ1JMLElBQUksRUFBRUMsTUFBTTtNQUNaQyxRQUFRLEVBQUUsSUFBSTtNQUNkSSxRQUFRLEVBQUU7UUFDUkMsU0FBUyxFQUFFLFNBQUFBLENBQVVDLENBQUMsRUFBRTtVQUN0QixPQUFPLDBDQUEwQyxDQUFDQyxJQUFJLENBQUNELENBQUMsQ0FBQztRQUMzRCxDQUFDO1FBQ0RFLE9BQU8sRUFBR0MsS0FBSyxJQUNaLEdBQUVBLEtBQUssQ0FBQ0MsS0FBTTtNQUNuQjtJQUNGO0VBQ0YsQ0FBQztFQUNEQyxjQUFjLEVBQUU7SUFBRWIsSUFBSSxFQUFFQztFQUFPLENBQUM7RUFDaENhLE1BQU0sRUFBRTtJQUNOZCxJQUFJLEVBQUVDLE1BQU07SUFDWmMsSUFBSSxFQUFFQztFQUNSLENBQUM7RUFDREMsR0FBRyxFQUFFO0lBQUVqQixJQUFJLEVBQUVrQjtFQUFPLENBQUM7RUFDckJDLFlBQVksRUFBRTtJQUNabkIsSUFBSSxFQUFFQyxNQUFNO0lBQ1pjLElBQUksRUFBRUssMEJBQVk7SUFDbEJDLE9BQU8sRUFBRUQsMEJBQVksQ0FBQ0U7RUFDeEIsQ0FBQztFQUNEQyxXQUFXLEVBQUU7SUFBRXZCLElBQUksRUFBRUM7RUFBTyxDQUFDO0VBQzdCdUIsYUFBYSxFQUFFO0lBQUV4QixJQUFJLEVBQUVDLE1BQU07SUFBRWMsSUFBSSxFQUFFVTtFQUFjLENBQUM7RUFDcERDLFdBQVcsRUFBRTtJQUFFMUIsSUFBSSxFQUFFQztFQUFPLENBQUM7RUFDN0IwQixVQUFVLEVBQUU7SUFDVjNCLElBQUksRUFBRUMsTUFBTTtJQUNaSyxRQUFRLEVBQUU7TUFDUkMsU0FBUyxFQUFFLFNBQUFBLENBQVVDLENBQUMsRUFBRTtRQUN0QixPQUFPLCtCQUErQixDQUFDQyxJQUFJLENBQUNELENBQUMsQ0FBQztNQUNoRCxDQUFDO01BQ0RFLE9BQU8sRUFBRTtJQUNYO0VBQ0YsQ0FBQztFQUNEa0IsY0FBYyxFQUFFO0lBQ2Q1QixJQUFJLEVBQUVDLE1BQU07SUFDWkssUUFBUSxFQUFFO01BQ1JDLFNBQVMsRUFBRSxTQUFBQSxDQUFVQyxDQUFDLEVBQUU7UUFDdEIsT0FBTywwQkFBMEIsQ0FBQ0MsSUFBSSxDQUFDRCxDQUFDLENBQUM7TUFDM0MsQ0FBQztNQUNERSxPQUFPLEVBQUU7SUFDWDtFQUNGLENBQUM7RUFFRG1CLGlCQUFpQixFQUFFO0lBQUU3QixJQUFJLEVBQUVDO0VBQU8sQ0FBQztFQUNuQzZCLGVBQWUsRUFBRTtJQUFFOUIsSUFBSSxFQUFFQztFQUFPLENBQUM7RUFDakM4QixlQUFlLEVBQUU7SUFBRS9CLElBQUksRUFBRWdDLE9BQU87SUFBRVgsT0FBTyxFQUFFO0VBQU0sQ0FBQztFQUNsRFksVUFBVSxFQUFFO0lBQUVqQyxJQUFJLEVBQUVDO0VBQU8sQ0FBQztFQUM1QmlDLFlBQVksRUFBRTtJQUFFbEMsSUFBSSxFQUFFQztFQUFPO0FBQy9CLENBQUMsQ0FBQztBQUVGTCxVQUFVLENBQUN1QyxPQUFPLENBQUNDLGNBQWMsR0FBRyxnQkFBZ0IvQixRQUFRLEVBQUU7RUFDNUQsT0FBTyxNQUFNZ0MsZUFBTSxDQUFDQyxPQUFPLENBQUNqQyxRQUFRLEVBQUUsSUFBSSxDQUFDQSxRQUFRLENBQUM7QUFDdEQsQ0FBQztBQUNELE1BQU1rQyxJQUFJLEdBQUcxQyxpQkFBUSxDQUFDMkMsS0FBSyxDQUFDLE1BQU0sRUFBRTVDLFVBQVUsQ0FBQztBQUFDLElBQUE2QyxRQUFBLEdBRWpDRixJQUFJO0FBQUFHLE9BQUEsQ0FBQXJCLE9BQUEsR0FBQW9CLFFBQUEifQ==","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_maritalStatus","_gender","_accountState","_bcrypt","userSchema","mongoose","Schema","name","type","String","required","email","unique","password","validate","validator","v","test","message","props","value","profilePicture","gender","enum","GenderStatus","age","Number","accountState","AccountState","default","UNVERIFIED","dateOfBirth","maritalStatus","MaritalStatus","nationality","nationalId","passportNumber","nationalIdPicture","passportPicture","isEmailVerified","Boolean","resetToken","resetExpires","methods","verifyPassword","bcrypt","compare","User","model","_default","exports"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/models/","sources":["user.js"],"sourcesContent":["import mongoose from \"mongoose\";\nimport { MaritalStatus } from \"../utils/enum/maritalStatus.enum\";\nimport { GenderStatus } from \"../utils/gender.enum\";\nimport { AccountState } from \"../utils/enum/accountState\";\nimport bcrypt from \"bcrypt\";\n\n// Define user schema\nconst userSchema = new mongoose.Schema({\n  name: { type: String, required: true },\n  email: { type: String, unique: true, required: true },\n  password: {\n    type: String,\n    required: true,\n    password: {\n      type: String,\n      required: true,\n      validate: {\n        validator: function (v) {\n          return /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,12}$/.test(v);\n        },\n        message: (props) =>\n          `${props.value} is not a valid password. Password must be alphanumeric and between 8 and 12 characters.`,\n      },\n    },\n  },\n  profilePicture: { type: String },\n  gender: {\n    type: String,\n    enum: GenderStatus,\n  },\n  age: { type: Number },\n  accountState: {\n    type: String,\n    enum: AccountState,\n    default: AccountState.UNVERIFIED,\n  },\n  dateOfBirth: { type: String },\n  maritalStatus: { type: String, enum: MaritalStatus },\n  nationality: { type: String },\n  nationalId: {\n    type: String,\n    validate: {\n      validator: function (v) {\n        return /^1([9][5-9]|[0-9][0-9])\\d{8}$/.test(v);\n      },\n      message: \"Invalid Rwandan national ID format\",\n    },\n  },\n  passportNumber: {\n    type: String,\n    validate: {\n      validator: function (v) {\n        return /^[A-Z]{2}[A-Z0-9]{3,20}$/.test(v);\n      },\n      message: \"Invalid passport ID format\",\n    },\n  },\n\n  nationalIdPicture: { type: String },\n  passportPicture: { type: String },\n  isEmailVerified: { type: Boolean, default: false },\n  resetToken: { type: String },\n  resetExpires: { type: String },\n});\n\nuserSchema.methods.verifyPassword = async function (password) {\n  return await bcrypt.compare(password, this.password);\n};\nconst User = mongoose.model(\"User\", userSchema);\n\nexport default User;\n"],"mappings":";;;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,cAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAF,OAAA;AACA,IAAAG,aAAA,GAAAH,OAAA;AACA,IAAAI,OAAA,GAAAL,sBAAA,CAAAC,OAAA;AAEA;AACA,MAAMK,UAAU,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACrCC,IAAI,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EACtCC,KAAK,EAAE;IAAEH,IAAI,EAAEC,MAAM;IAAEG,MAAM,EAAE,IAAI;IAAEF,QAAQ,EAAE;EAAK,CAAC;EACrDG,QAAQ,EAAE;IACRL,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,IAAI;IACdG,QAAQ,EAAE;MACRL,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE,IAAI;MACdI,QAAQ,EAAE;QACRC,SAAS,EAAE,SAAAA,CAAUC,CAAC,EAAE;UACtB,OAAO,0CAA0C,CAACC,IAAI,CAACD,CAAC,CAAC;QAC3D,CAAC;QACDE,OAAO,EAAGC,KAAK,IACZ,GAAEA,KAAK,CAACC,KAAM;MACnB;IACF;EACF,CAAC;EACDC,cAAc,EAAE;IAAEb,IAAI,EAAEC;EAAO,CAAC;EAChCa,MAAM,EAAE;IACNd,IAAI,EAAEC,MAAM;IACZc,IAAI,EAAEC;EACR,CAAC;EACDC,GAAG,EAAE;IAAEjB,IAAI,EAAEkB;EAAO,CAAC;EACrBC,YAAY,EAAE;IACZnB,IAAI,EAAEC,MAAM;IACZc,IAAI,EAAEK,0BAAY;IAClBC,OAAO,EAAED,0BAAY,CAACE;EACxB,CAAC;EACDC,WAAW,EAAE;IAAEvB,IAAI,EAAEC;EAAO,CAAC;EAC7BuB,aAAa,EAAE;IAAExB,IAAI,EAAEC,MAAM;IAAEc,IAAI,EAAEU;EAAc,CAAC;EACpDC,WAAW,EAAE;IAAE1B,IAAI,EAAEC;EAAO,CAAC;EAC7B0B,UAAU,EAAE;IACV3B,IAAI,EAAEC,MAAM;IACZK,QAAQ,EAAE;MACRC,SAAS,EAAE,SAAAA,CAAUC,CAAC,EAAE;QACtB,OAAO,+BAA+B,CAACC,IAAI,CAACD,CAAC,CAAC;MAChD,CAAC;MACDE,OAAO,EAAE;IACX;EACF,CAAC;EACDkB,cAAc,EAAE;IACd5B,IAAI,EAAEC,MAAM;IACZK,QAAQ,EAAE;MACRC,SAAS,EAAE,SAAAA,CAAUC,CAAC,EAAE;QACtB,OAAO,0BAA0B,CAACC,IAAI,CAACD,CAAC,CAAC;MAC3C,CAAC;MACDE,OAAO,EAAE;IACX;EACF,CAAC;EAEDmB,iBAAiB,EAAE;IAAE7B,IAAI,EAAEC;EAAO,CAAC;EACnC6B,eAAe,EAAE;IAAE9B,IAAI,EAAEC;EAAO,CAAC;EACjC8B,eAAe,EAAE;IAAE/B,IAAI,EAAEgC,OAAO;IAAEX,OAAO,EAAE;EAAM,CAAC;EAClDY,UAAU,EAAE;IAAEjC,IAAI,EAAEC;EAAO,CAAC;EAC5BiC,YAAY,EAAE;IAAElC,IAAI,EAAEC;EAAO;AAC/B,CAAC,CAAC;AAEFL,UAAU,CAACuC,OAAO,CAACC,cAAc,GAAG,gBAAgB/B,QAAQ,EAAE;EAC5D,OAAO,MAAMgC,eAAM,CAACC,OAAO,CAACjC,QAAQ,EAAE,IAAI,CAACA,QAAQ,CAAC;AACtD,CAAC;AACD,MAAMkC,IAAI,GAAG1C,iBAAQ,CAAC2C,KAAK,CAAC,MAAM,EAAE5C,UAAU,CAAC;AAAC,IAAA6C,QAAA,GAEjCF,IAAI;AAAAG,OAAA,CAAArB,OAAA,GAAAoB,QAAA"}},"mtime":1683074843026},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/enum/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/enum/maritalStatus.enum.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nconst MaritalStatus = {\n  MARRIED: \"MARRIED\",\n  SINGLE: \"SINGLE\",\n  WINDOWED: \"WIDOWED\",\n  DIVORCED: \"DIVORCED\"\n};\nmodule.exports = {\n  MaritalStatus\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNYXJpdGFsU3RhdHVzIiwiTUFSUklFRCIsIlNJTkdMRSIsIldJTkRPV0VEIiwiRElWT1JDRUQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvamVhbm5lZGFyY255aXJhbXdpemEvRG93bmxvYWRzL0FjY291bnQtVmVyaWZpY2F0aW9uLUJhY2tlbmQvc3JjL3V0aWxzL2VudW0vIiwic291cmNlcyI6WyJtYXJpdGFsU3RhdHVzLmVudW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgTWFyaXRhbFN0YXR1cyA9IHtcbiAgTUFSUklFRDogXCJNQVJSSUVEXCIsXG4gIFNJTkdMRTogXCJTSU5HTEVcIixcbiAgV0lORE9XRUQ6IFwiV0lET1dFRFwiLFxuICBESVZPUkNFRDogXCJESVZPUkNFRFwiLFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IE1hcml0YWxTdGF0dXMgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxhQUFhLEdBQUc7RUFDcEJDLE9BQU8sRUFBRSxTQUFTO0VBQ2xCQyxNQUFNLEVBQUUsUUFBUTtFQUNoQkMsUUFBUSxFQUFFLFNBQVM7RUFDbkJDLFFBQVEsRUFBRTtBQUNaLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFBRU47QUFBYyxDQUFDIn0=","map":{"version":3,"names":["MaritalStatus","MARRIED","SINGLE","WINDOWED","DIVORCED","module","exports"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/enum/","sources":["maritalStatus.enum.js"],"sourcesContent":["const MaritalStatus = {\n  MARRIED: \"MARRIED\",\n  SINGLE: \"SINGLE\",\n  WINDOWED: \"WIDOWED\",\n  DIVORCED: \"DIVORCED\",\n};\n\nmodule.exports = { MaritalStatus };\n"],"mappings":";;AAAA,MAAMA,aAAa,GAAG;EACpBC,OAAO,EAAE,SAAS;EAClBC,MAAM,EAAE,QAAQ;EAChBC,QAAQ,EAAE,SAAS;EACnBC,QAAQ,EAAE;AACZ,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAG;EAAEN;AAAc,CAAC"}},"mtime":1682546525073},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/gender.enum.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nconst GenderStatus = {\n  FEMALE: \"FEMALE\",\n  MALE: \"MALE\",\n  NON_BINARY: \"NON_BINARY\"\n};\nmodule.exports = {\n  GenderStatus\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJHZW5kZXJTdGF0dXMiLCJGRU1BTEUiLCJNQUxFIiwiTk9OX0JJTkFSWSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qZWFubmVkYXJjbnlpcmFtd2l6YS9Eb3dubG9hZHMvQWNjb3VudC1WZXJpZmljYXRpb24tQmFja2VuZC9zcmMvdXRpbHMvIiwic291cmNlcyI6WyJnZW5kZXIuZW51bS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBHZW5kZXJTdGF0dXMgPSB7XG4gIEZFTUFMRTogXCJGRU1BTEVcIixcbiAgTUFMRTogXCJNQUxFXCIsXG4gIE5PTl9CSU5BUlk6IFwiTk9OX0JJTkFSWVwiLFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IEdlbmRlclN0YXR1cyB9O1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLFlBQVksR0FBRztFQUNuQkMsTUFBTSxFQUFFLFFBQVE7RUFDaEJDLElBQUksRUFBRSxNQUFNO0VBQ1pDLFVBQVUsRUFBRTtBQUNkLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFBRUw7QUFBYSxDQUFDIn0=","map":{"version":3,"names":["GenderStatus","FEMALE","MALE","NON_BINARY","module","exports"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/","sources":["gender.enum.js"],"sourcesContent":["const GenderStatus = {\n  FEMALE: \"FEMALE\",\n  MALE: \"MALE\",\n  NON_BINARY: \"NON_BINARY\",\n};\n\nmodule.exports = { GenderStatus };\n"],"mappings":";;AAAA,MAAMA,YAAY,GAAG;EACnBC,MAAM,EAAE,QAAQ;EAChBC,IAAI,EAAE,MAAM;EACZC,UAAU,EAAE;AACd,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAG;EAAEL;AAAa,CAAC"}},"mtime":1682546573141},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _httpStatus = _interopRequireDefault(require(\"http-status\"));\nvar _user = _interopRequireDefault(require(\"../models/user\"));\nvar _token = _interopRequireDefault(require(\"../models/token\"));\nvar _sendMail = _interopRequireDefault(require(\"../utils/sendMail\"));\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\nvar _accountState = require(\"../utils/enum/accountState\");\n// Create User\nconst createUser = async (req, res) => {\n  try {\n    const {\n      name,\n      email,\n      password,\n      gender,\n      age,\n      dateOfBirth,\n      maritalStatus,\n      nationality\n    } = req.body;\n\n    // Check if email is already taken\n    const existingUser = await _user.default.findOne({\n      email\n    });\n    if (existingUser) {\n      return res.status(400).json({\n        error: \"Email already taken\"\n      });\n    }\n\n    // Hash password\n    const saltRounds = 10;\n    const hashedPassword = await _bcrypt.default.hash(password, saltRounds);\n\n    // Create new user\n    const newUser = new _user.default({\n      name,\n      email,\n      password: hashedPassword,\n      // Use the correct field name\n      gender,\n      age,\n      dateOfBirth,\n      maritalStatus,\n      nationality\n    });\n    await newUser.save();\n    let newToken = await new _token.default({\n      // Use the correct variable name\n      userId: newUser._id,\n      token: _crypto.default.randomBytes(32).toString(\"hex\")\n    }).save();\n    const message = `${process.env.BASE_URL}/users/verify/${newUser.id}/${newToken.token}`;\n    await (0, _sendMail.default)(newUser.email, \"Verify Email\", message);\n    res.send(\"An email has been sent to your account, please verify your email\");\n  } catch (error) {\n    res.status(400).send(\"An error occurred\");\n  }\n};\nconst verifyEmail = async (req, res) => {\n  try {\n    const user = await _user.default.findOne({\n      _id: req.params.id\n    });\n    if (!user) return res.status(400).send(\"Invalid link\");\n    const token = await _token.default.findOne({\n      userId: user._id,\n      token: req.params.token\n    });\n    if (!token) return res.status(400).send(\"Invalid link\");\n    await _user.default.updateOne({\n      _id: user._id\n    }, {\n      isEmailVerified: true\n    });\n    await _token.default.findByIdAndRemove(token._id);\n    res.send(\"Email verified successfully\");\n  } catch (error) {\n    res.status(400).send(\"An error occurred\");\n  }\n};\nconst accountVerification = async (req, res) => {\n  const {\n    userId\n  } = req.params;\n  const {\n    nationalId,\n    passportNumber\n  } = req.body;\n  const {\n    nationalIdPic,\n    passportPic\n  } = req.files || {};\n  try {\n    let updatedFields = {\n      nationalId: nationalId,\n      passportNumber: passportNumber,\n      accountState: _accountState.AccountState.PENDING\n    };\n    if (nationalIdPic) {\n      const nationalIdPicLocation = nationalIdPic[0].Location;\n      updatedFields.nationalIdPic = nationalIdPicLocation;\n      updatedFields.accountState = _accountState.AccountState.VERIFIED;\n      await saveFileLocationToDatabase(userId, \"nationalIdPic\", nationalIdPicLocation);\n    }\n    if (passportPic) {\n      const passportPicLocation = passportPic[0].Location;\n      updatedFields.passportPic = passportPicLocation;\n      updatedFields.accountState = _accountState.AccountState.VERIFIED;\n      await saveFileLocationToDatabase(userId, \"passportPic\", passportPicLocation);\n    }\n    const updatedUser = await _user.default.findByIdAndUpdate(userId, updatedFields, {\n      new: true\n    });\n    const message = `Dear ${updatedUser.name},Your account has been verified`;\n    await (0, _sendMail.default)(updatedUser.email, \"Account Verification\", message);\n    return res.status(200).json({\n      messaged: \"Your account has been verified\"\n    });\n  } catch (err) {\n    console.error(err);\n    return res.status(500).json({\n      message: \"Server error\"\n    });\n  }\n};\nasync function saveFileLocationToDatabase(userId, fieldName, fileLocation) {\n  try {\n    const user = await _user.default.findById(userId);\n    if (!user) {\n      console.error(`User with id ${userId} not found`);\n      return;\n    }\n    user[fieldName] = fileLocation;\n    await user.save();\n  } catch (err) {\n    console.error(`Error saving ${fieldName} location to database for user ${userId}`, err);\n  }\n}\nvar _default = {\n  createUser,\n  verifyEmail,\n  accountVerification\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYmNyeXB0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfaHR0cFN0YXR1cyIsIl91c2VyIiwiX3Rva2VuIiwiX3NlbmRNYWlsIiwiX2NyeXB0byIsIl9hY2NvdW50U3RhdGUiLCJjcmVhdGVVc2VyIiwicmVxIiwicmVzIiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJnZW5kZXIiLCJhZ2UiLCJkYXRlT2ZCaXJ0aCIsIm1hcml0YWxTdGF0dXMiLCJuYXRpb25hbGl0eSIsImJvZHkiLCJleGlzdGluZ1VzZXIiLCJVc2VyIiwiZmluZE9uZSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInNhbHRSb3VuZHMiLCJoYXNoZWRQYXNzd29yZCIsImJjcnlwdCIsImhhc2giLCJuZXdVc2VyIiwic2F2ZSIsIm5ld1Rva2VuIiwiVG9rZW4iLCJ1c2VySWQiLCJfaWQiLCJ0b2tlbiIsImNyeXB0byIsInJhbmRvbUJ5dGVzIiwidG9TdHJpbmciLCJtZXNzYWdlIiwicHJvY2VzcyIsImVudiIsIkJBU0VfVVJMIiwiaWQiLCJzZW5kTWFpbCIsInNlbmQiLCJ2ZXJpZnlFbWFpbCIsInVzZXIiLCJwYXJhbXMiLCJ1cGRhdGVPbmUiLCJpc0VtYWlsVmVyaWZpZWQiLCJmaW5kQnlJZEFuZFJlbW92ZSIsImFjY291bnRWZXJpZmljYXRpb24iLCJuYXRpb25hbElkIiwicGFzc3BvcnROdW1iZXIiLCJuYXRpb25hbElkUGljIiwicGFzc3BvcnRQaWMiLCJmaWxlcyIsInVwZGF0ZWRGaWVsZHMiLCJhY2NvdW50U3RhdGUiLCJBY2NvdW50U3RhdGUiLCJQRU5ESU5HIiwibmF0aW9uYWxJZFBpY0xvY2F0aW9uIiwiTG9jYXRpb24iLCJWRVJJRklFRCIsInNhdmVGaWxlTG9jYXRpb25Ub0RhdGFiYXNlIiwicGFzc3BvcnRQaWNMb2NhdGlvbiIsInVwZGF0ZWRVc2VyIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJuZXciLCJtZXNzYWdlZCIsImVyciIsImNvbnNvbGUiLCJmaWVsZE5hbWUiLCJmaWxlTG9jYXRpb24iLCJmaW5kQnlJZCIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qZWFubmVkYXJjbnlpcmFtd2l6YS9Eb3dubG9hZHMvQWNjb3VudC1WZXJpZmljYXRpb24tQmFja2VuZC9zcmMvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJ1c2Vycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcbmltcG9ydCBodHRwU3RhdHVzIGZyb20gXCJodHRwLXN0YXR1c1wiO1xuaW1wb3J0IFVzZXIgZnJvbSBcIi4uL21vZGVscy91c2VyXCI7XG5pbXBvcnQgVG9rZW4gZnJvbSBcIi4uL21vZGVscy90b2tlblwiO1xuaW1wb3J0IHNlbmRNYWlsIGZyb20gXCIuLi91dGlscy9zZW5kTWFpbFwiO1xuaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgeyBBY2NvdW50U3RhdGUgfSBmcm9tIFwiLi4vdXRpbHMvZW51bS9hY2NvdW50U3RhdGVcIjtcblxuLy8gQ3JlYXRlIFVzZXJcbmNvbnN0IGNyZWF0ZVVzZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7XG4gICAgICBuYW1lLFxuICAgICAgZW1haWwsXG4gICAgICBwYXNzd29yZCxcbiAgICAgIGdlbmRlcixcbiAgICAgIGFnZSxcbiAgICAgIGRhdGVPZkJpcnRoLFxuICAgICAgbWFyaXRhbFN0YXR1cyxcbiAgICAgIG5hdGlvbmFsaXR5LFxuICAgIH0gPSByZXEuYm9keTtcblxuICAgIC8vIENoZWNrIGlmIGVtYWlsIGlzIGFscmVhZHkgdGFrZW5cbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KTtcbiAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJFbWFpbCBhbHJlYWR5IHRha2VuXCIgfSk7XG4gICAgfVxuXG4gICAgLy8gSGFzaCBwYXNzd29yZFxuICAgIGNvbnN0IHNhbHRSb3VuZHMgPSAxMDtcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0Um91bmRzKTtcblxuICAgIC8vIENyZWF0ZSBuZXcgdXNlclxuICAgIGNvbnN0IG5ld1VzZXIgPSBuZXcgVXNlcih7XG4gICAgICBuYW1lLFxuICAgICAgZW1haWwsXG4gICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsIC8vIFVzZSB0aGUgY29ycmVjdCBmaWVsZCBuYW1lXG4gICAgICBnZW5kZXIsXG4gICAgICBhZ2UsXG4gICAgICBkYXRlT2ZCaXJ0aCxcbiAgICAgIG1hcml0YWxTdGF0dXMsXG4gICAgICBuYXRpb25hbGl0eSxcbiAgICB9KTtcbiAgICBhd2FpdCBuZXdVc2VyLnNhdmUoKTtcblxuICAgIGxldCBuZXdUb2tlbiA9IGF3YWl0IG5ldyBUb2tlbih7XG4gICAgICAvLyBVc2UgdGhlIGNvcnJlY3QgdmFyaWFibGUgbmFtZVxuICAgICAgdXNlcklkOiBuZXdVc2VyLl9pZCxcbiAgICAgIHRva2VuOiBjcnlwdG8ucmFuZG9tQnl0ZXMoMzIpLnRvU3RyaW5nKFwiaGV4XCIpLFxuICAgIH0pLnNhdmUoKTtcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBgJHtwcm9jZXNzLmVudi5CQVNFX1VSTH0vdXNlcnMvdmVyaWZ5LyR7bmV3VXNlci5pZH0vJHtuZXdUb2tlbi50b2tlbn1gO1xuICAgIGF3YWl0IHNlbmRNYWlsKG5ld1VzZXIuZW1haWwsIFwiVmVyaWZ5IEVtYWlsXCIsIG1lc3NhZ2UpO1xuXG4gICAgcmVzLnNlbmQoXG4gICAgICBcIkFuIGVtYWlsIGhhcyBiZWVuIHNlbnQgdG8geW91ciBhY2NvdW50LCBwbGVhc2UgdmVyaWZ5IHlvdXIgZW1haWxcIlxuICAgICk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoXCJBbiBlcnJvciBvY2N1cnJlZFwiKTtcbiAgfVxufTtcblxuY29uc3QgdmVyaWZ5RW1haWwgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgX2lkOiByZXEucGFyYW1zLmlkIH0pO1xuICAgIGlmICghdXNlcikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKFwiSW52YWxpZCBsaW5rXCIpO1xuXG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBUb2tlbi5maW5kT25lKHtcbiAgICAgIHVzZXJJZDogdXNlci5faWQsXG4gICAgICB0b2tlbjogcmVxLnBhcmFtcy50b2tlbixcbiAgICB9KTtcbiAgICBpZiAoIXRva2VuKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoXCJJbnZhbGlkIGxpbmtcIik7XG5cbiAgICBhd2FpdCBVc2VyLnVwZGF0ZU9uZSh7IF9pZDogdXNlci5faWQgfSwgeyBpc0VtYWlsVmVyaWZpZWQ6IHRydWUgfSk7XG4gICAgYXdhaXQgVG9rZW4uZmluZEJ5SWRBbmRSZW1vdmUodG9rZW4uX2lkKTtcblxuICAgIHJlcy5zZW5kKFwiRW1haWwgdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKFwiQW4gZXJyb3Igb2NjdXJyZWRcIik7XG4gIH1cbn07XG5cbmNvbnN0IGFjY291bnRWZXJpZmljYXRpb24gPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXM7XG4gIGNvbnN0IHsgbmF0aW9uYWxJZCwgcGFzc3BvcnROdW1iZXIgfSA9IHJlcS5ib2R5O1xuICBjb25zdCB7IG5hdGlvbmFsSWRQaWMsIHBhc3Nwb3J0UGljIH0gPSByZXEuZmlsZXMgfHwge307XG5cbiAgdHJ5IHtcbiAgICBsZXQgdXBkYXRlZEZpZWxkcyA9IHtcbiAgICAgIG5hdGlvbmFsSWQ6IG5hdGlvbmFsSWQsXG4gICAgICBwYXNzcG9ydE51bWJlcjogcGFzc3BvcnROdW1iZXIsXG4gICAgICBhY2NvdW50U3RhdGU6IEFjY291bnRTdGF0ZS5QRU5ESU5HLFxuICAgIH07XG5cbiAgICBpZiAobmF0aW9uYWxJZFBpYykge1xuICAgICAgY29uc3QgbmF0aW9uYWxJZFBpY0xvY2F0aW9uID0gbmF0aW9uYWxJZFBpY1swXS5Mb2NhdGlvbjtcbiAgICAgIHVwZGF0ZWRGaWVsZHMubmF0aW9uYWxJZFBpYyA9IG5hdGlvbmFsSWRQaWNMb2NhdGlvbjtcbiAgICAgIHVwZGF0ZWRGaWVsZHMuYWNjb3VudFN0YXRlID0gQWNjb3VudFN0YXRlLlZFUklGSUVEO1xuICAgICAgYXdhaXQgc2F2ZUZpbGVMb2NhdGlvblRvRGF0YWJhc2UoXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgXCJuYXRpb25hbElkUGljXCIsXG4gICAgICAgIG5hdGlvbmFsSWRQaWNMb2NhdGlvblxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAocGFzc3BvcnRQaWMpIHtcbiAgICAgIGNvbnN0IHBhc3Nwb3J0UGljTG9jYXRpb24gPSBwYXNzcG9ydFBpY1swXS5Mb2NhdGlvbjtcbiAgICAgIHVwZGF0ZWRGaWVsZHMucGFzc3BvcnRQaWMgPSBwYXNzcG9ydFBpY0xvY2F0aW9uO1xuICAgICAgdXBkYXRlZEZpZWxkcy5hY2NvdW50U3RhdGUgPSBBY2NvdW50U3RhdGUuVkVSSUZJRUQ7XG4gICAgICBhd2FpdCBzYXZlRmlsZUxvY2F0aW9uVG9EYXRhYmFzZShcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBcInBhc3Nwb3J0UGljXCIsXG4gICAgICAgIHBhc3Nwb3J0UGljTG9jYXRpb25cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHVzZXJJZCwgdXBkYXRlZEZpZWxkcywge1xuICAgICAgbmV3OiB0cnVlLFxuICAgIH0pO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBgRGVhciAke3VwZGF0ZWRVc2VyLm5hbWV9LFlvdXIgYWNjb3VudCBoYXMgYmVlbiB2ZXJpZmllZGA7XG4gICAgYXdhaXQgc2VuZE1haWwodXBkYXRlZFVzZXIuZW1haWwsIFwiQWNjb3VudCBWZXJpZmljYXRpb25cIiwgbWVzc2FnZSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZWQ6IFwiWW91ciBhY2NvdW50IGhhcyBiZWVuIHZlcmlmaWVkXCIgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIlNlcnZlciBlcnJvclwiIH0pO1xuICB9XG59O1xuXG5hc3luYyBmdW5jdGlvbiBzYXZlRmlsZUxvY2F0aW9uVG9EYXRhYmFzZSh1c2VySWQsIGZpZWxkTmFtZSwgZmlsZUxvY2F0aW9uKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVzZXIgd2l0aCBpZCAke3VzZXJJZH0gbm90IGZvdW5kYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdXNlcltmaWVsZE5hbWVdID0gZmlsZUxvY2F0aW9uO1xuICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgYEVycm9yIHNhdmluZyAke2ZpZWxkTmFtZX0gbG9jYXRpb24gdG8gZGF0YWJhc2UgZm9yIHVzZXIgJHt1c2VySWR9YCxcbiAgICAgIGVyclxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgeyBjcmVhdGVVc2VyLCB2ZXJpZnlFbWFpbCwgYWNjb3VudFZlcmlmaWNhdGlvbiB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFB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","map":{"version":3,"names":["_bcrypt","_interopRequireDefault","require","_httpStatus","_user","_token","_sendMail","_crypto","_accountState","createUser","req","res","name","email","password","gender","age","dateOfBirth","maritalStatus","nationality","body","existingUser","User","findOne","status","json","error","saltRounds","hashedPassword","bcrypt","hash","newUser","save","newToken","Token","userId","_id","token","crypto","randomBytes","toString","message","process","env","BASE_URL","id","sendMail","send","verifyEmail","user","params","updateOne","isEmailVerified","findByIdAndRemove","accountVerification","nationalId","passportNumber","nationalIdPic","passportPic","files","updatedFields","accountState","AccountState","PENDING","nationalIdPicLocation","Location","VERIFIED","saveFileLocationToDatabase","passportPicLocation","updatedUser","findByIdAndUpdate","new","messaged","err","console","fieldName","fileLocation","findById","_default","exports","default"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/","sources":["users.js"],"sourcesContent":["import bcrypt from \"bcrypt\";\nimport httpStatus from \"http-status\";\nimport User from \"../models/user\";\nimport Token from \"../models/token\";\nimport sendMail from \"../utils/sendMail\";\nimport crypto from \"crypto\";\nimport { AccountState } from \"../utils/enum/accountState\";\n\n// Create User\nconst createUser = async (req, res) => {\n  try {\n    const {\n      name,\n      email,\n      password,\n      gender,\n      age,\n      dateOfBirth,\n      maritalStatus,\n      nationality,\n    } = req.body;\n\n    // Check if email is already taken\n    const existingUser = await User.findOne({ email });\n    if (existingUser) {\n      return res.status(400).json({ error: \"Email already taken\" });\n    }\n\n    // Hash password\n    const saltRounds = 10;\n    const hashedPassword = await bcrypt.hash(password, saltRounds);\n\n    // Create new user\n    const newUser = new User({\n      name,\n      email,\n      password: hashedPassword, // Use the correct field name\n      gender,\n      age,\n      dateOfBirth,\n      maritalStatus,\n      nationality,\n    });\n    await newUser.save();\n\n    let newToken = await new Token({\n      // Use the correct variable name\n      userId: newUser._id,\n      token: crypto.randomBytes(32).toString(\"hex\"),\n    }).save();\n\n    const message = `${process.env.BASE_URL}/users/verify/${newUser.id}/${newToken.token}`;\n    await sendMail(newUser.email, \"Verify Email\", message);\n\n    res.send(\n      \"An email has been sent to your account, please verify your email\"\n    );\n  } catch (error) {\n    res.status(400).send(\"An error occurred\");\n  }\n};\n\nconst verifyEmail = async (req, res) => {\n  try {\n    const user = await User.findOne({ _id: req.params.id });\n    if (!user) return res.status(400).send(\"Invalid link\");\n\n    const token = await Token.findOne({\n      userId: user._id,\n      token: req.params.token,\n    });\n    if (!token) return res.status(400).send(\"Invalid link\");\n\n    await User.updateOne({ _id: user._id }, { isEmailVerified: true });\n    await Token.findByIdAndRemove(token._id);\n\n    res.send(\"Email verified successfully\");\n  } catch (error) {\n    res.status(400).send(\"An error occurred\");\n  }\n};\n\nconst accountVerification = async (req, res) => {\n  const { userId } = req.params;\n  const { nationalId, passportNumber } = req.body;\n  const { nationalIdPic, passportPic } = req.files || {};\n\n  try {\n    let updatedFields = {\n      nationalId: nationalId,\n      passportNumber: passportNumber,\n      accountState: AccountState.PENDING,\n    };\n\n    if (nationalIdPic) {\n      const nationalIdPicLocation = nationalIdPic[0].Location;\n      updatedFields.nationalIdPic = nationalIdPicLocation;\n      updatedFields.accountState = AccountState.VERIFIED;\n      await saveFileLocationToDatabase(\n        userId,\n        \"nationalIdPic\",\n        nationalIdPicLocation\n      );\n    }\n\n    if (passportPic) {\n      const passportPicLocation = passportPic[0].Location;\n      updatedFields.passportPic = passportPicLocation;\n      updatedFields.accountState = AccountState.VERIFIED;\n      await saveFileLocationToDatabase(\n        userId,\n        \"passportPic\",\n        passportPicLocation\n      );\n    }\n\n    const updatedUser = await User.findByIdAndUpdate(userId, updatedFields, {\n      new: true,\n    });\n    const message = `Dear ${updatedUser.name},Your account has been verified`;\n    await sendMail(updatedUser.email, \"Account Verification\", message);\n    return res.status(200).json({ messaged: \"Your account has been verified\" });\n  } catch (err) {\n    console.error(err);\n    return res.status(500).json({ message: \"Server error\" });\n  }\n};\n\nasync function saveFileLocationToDatabase(userId, fieldName, fileLocation) {\n  try {\n    const user = await User.findById(userId);\n    if (!user) {\n      console.error(`User with id ${userId} not found`);\n      return;\n    }\n\n    user[fieldName] = fileLocation;\n    await user.save();\n  } catch (err) {\n    console.error(\n      `Error saving ${fieldName} location to database for user ${userId}`,\n      err\n    );\n  }\n}\n\nexport default { createUser, verifyEmail, accountVerification };\n"],"mappings":"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"}},"mtime":1683147956342},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/models/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _maritalStatus = require(\"../utils/enum/maritalStatus.enum\");\nvar _gender = require(\"../utils/gender.enum\");\nvar _accountState = require(\"../utils/enum/accountState\");\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n// Define user schema\nconst userSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    unique: true,\n    required: true\n  },\n  password: {\n    type: String,\n    required: true,\n    password: {\n      type: String,\n      required: true,\n      validate: {\n        validator: function (v) {\n          return /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,12}$/.test(v);\n        },\n        message: props => `${props.value} is not a valid password. Password must be alphanumeric and between 8 and 12 characters.`\n      }\n    }\n  },\n  profilePicture: {\n    type: String\n  },\n  gender: {\n    type: String,\n    enum: _gender.GenderStatus\n  },\n  age: {\n    type: Number\n  },\n  accountState: {\n    type: String,\n    enum: _accountState.AccountState,\n    default: _accountState.AccountState.UNVERIFIED\n  },\n  dateOfBirth: {\n    type: String\n  },\n  maritalStatus: {\n    type: String,\n    enum: _maritalStatus.MaritalStatus\n  },\n  nationality: {\n    type: String\n  },\n  nationalId: {\n    type: String,\n    validate: {\n      validator: function (v) {\n        return /^1([9][5-9]|[0-9][0-9])\\d{8}$/.test(v);\n      },\n      message: \"Invalid Rwandan national ID format\"\n    }\n  },\n  passportNumber: {\n    type: String,\n    validate: {\n      validator: function (v) {\n        return /^[A-Z]{2}[A-Z0-9]{3,20}$/.test(v);\n      },\n      message: \"Invalid passport ID format\"\n    }\n  },\n  nationalIdPicture: {\n    type: String\n  },\n  passportPicture: {\n    type: String\n  },\n  isEmailVerified: {\n    type: Boolean,\n    default: false\n  },\n  resetToken: {\n    type: String\n  },\n  resetExpires: {\n    type: String\n  }\n});\nuserSchema.methods.verifyPassword = async function (password) {\n  return await _bcrypt.default.compare(password, this.password);\n};\nconst User = _mongoose.default.model(\"User\", userSchema);\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9tYXJpdGFsU3RhdHVzIiwiX2dlbmRlciIsIl9hY2NvdW50U3RhdGUiLCJfYmNyeXB0IiwidXNlclNjaGVtYSIsIm1vbmdvb3NlIiwiU2NoZW1hIiwibmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsImVtYWlsIiwidW5pcXVlIiwicGFzc3dvcmQiLCJ2YWxpZGF0ZSIsInZhbGlkYXRvciIsInYiLCJ0ZXN0IiwibWVzc2FnZSIsInByb3BzIiwidmFsdWUiLCJwcm9maWxlUGljdHVyZSIsImdlbmRlciIsImVudW0iLCJHZW5kZXJTdGF0dXMiLCJhZ2UiLCJOdW1iZXIiLCJhY2NvdW50U3RhdGUiLCJBY2NvdW50U3RhdGUiLCJkZWZhdWx0IiwiVU5WRVJJRklFRCIsImRhdGVPZkJpcnRoIiwibWFyaXRhbFN0YXR1cyIsIk1hcml0YWxTdGF0dXMiLCJuYXRpb25hbGl0eSIsIm5hdGlvbmFsSWQiLCJwYXNzcG9ydE51bWJlciIsIm5hdGlvbmFsSWRQaWN0dXJlIiwicGFzc3BvcnRQaWN0dXJlIiwiaXNFbWFpbFZlcmlmaWVkIiwiQm9vbGVhbiIsInJlc2V0VG9rZW4iLCJyZXNldEV4cGlyZXMiLCJtZXRob2RzIiwidmVyaWZ5UGFzc3dvcmQiLCJiY3J5cHQiLCJjb21wYXJlIiwiVXNlciIsIm1vZGVsIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvamVhbm5lZGFyY255aXJhbXdpemEvRG93bmxvYWRzL0FjY291bnQtVmVyaWZpY2F0aW9uLUJhY2tlbmQvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbInVzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuaW1wb3J0IHsgTWFyaXRhbFN0YXR1cyB9IGZyb20gXCIuLi91dGlscy9lbnVtL21hcml0YWxTdGF0dXMuZW51bVwiO1xuaW1wb3J0IHsgR2VuZGVyU3RhdHVzIH0gZnJvbSBcIi4uL3V0aWxzL2dlbmRlci5lbnVtXCI7XG5pbXBvcnQgeyBBY2NvdW50U3RhdGUgfSBmcm9tIFwiLi4vdXRpbHMvZW51bS9hY2NvdW50U3RhdGVcIjtcbmltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xuXG4vLyBEZWZpbmUgdXNlciBzY2hlbWFcbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgbmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGVtYWlsOiB7IHR5cGU6IFN0cmluZywgdW5pcXVlOiB0cnVlLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBwYXNzd29yZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICBwYXNzd29yZDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICB2YWxpZGF0ZToge1xuICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgcmV0dXJuIC9eKD89LipbQS1aYS16XSkoPz0uKlxcZClbQS1aYS16XFxkXXs4LDEyfSQvLnRlc3Qodik7XG4gICAgICAgIH0sXG4gICAgICAgIG1lc3NhZ2U6IChwcm9wcykgPT5cbiAgICAgICAgICBgJHtwcm9wcy52YWx1ZX0gaXMgbm90IGEgdmFsaWQgcGFzc3dvcmQuIFBhc3N3b3JkIG11c3QgYmUgYWxwaGFudW1lcmljIGFuZCBiZXR3ZWVuIDggYW5kIDEyIGNoYXJhY3RlcnMuYCxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAgcHJvZmlsZVBpY3R1cmU6IHsgdHlwZTogU3RyaW5nIH0sXG4gIGdlbmRlcjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBlbnVtOiBHZW5kZXJTdGF0dXMsXG4gIH0sXG4gIGFnZTogeyB0eXBlOiBOdW1iZXIgfSxcbiAgYWNjb3VudFN0YXRlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGVudW06IEFjY291bnRTdGF0ZSxcbiAgICBkZWZhdWx0OiBBY2NvdW50U3RhdGUuVU5WRVJJRklFRCxcbiAgfSxcbiAgZGF0ZU9mQmlydGg6IHsgdHlwZTogU3RyaW5nIH0sXG4gIG1hcml0YWxTdGF0dXM6IHsgdHlwZTogU3RyaW5nLCBlbnVtOiBNYXJpdGFsU3RhdHVzIH0sXG4gIG5hdGlvbmFsaXR5OiB7IHR5cGU6IFN0cmluZyB9LFxuICBuYXRpb25hbElkOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHZhbGlkYXRlOiB7XG4gICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiAvXjEoWzldWzUtOV18WzAtOV1bMC05XSlcXGR7OH0kLy50ZXN0KHYpO1xuICAgICAgfSxcbiAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBSd2FuZGFuIG5hdGlvbmFsIElEIGZvcm1hdFwiLFxuICAgIH0sXG4gIH0sXG4gIHBhc3Nwb3J0TnVtYmVyOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHZhbGlkYXRlOiB7XG4gICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiAvXltBLVpdezJ9W0EtWjAtOV17MywyMH0kLy50ZXN0KHYpO1xuICAgICAgfSxcbiAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBwYXNzcG9ydCBJRCBmb3JtYXRcIixcbiAgICB9LFxuICB9LFxuXG4gIG5hdGlvbmFsSWRQaWN0dXJlOiB7IHR5cGU6IFN0cmluZyB9LFxuICBwYXNzcG9ydFBpY3R1cmU6IHsgdHlwZTogU3RyaW5nIH0sXG4gIGlzRW1haWxWZXJpZmllZDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuICByZXNldFRva2VuOiB7IHR5cGU6IFN0cmluZyB9LFxuICByZXNldEV4cGlyZXM6IHsgdHlwZTogU3RyaW5nIH0sXG59KTtcblxudXNlclNjaGVtYS5tZXRob2RzLnZlcmlmeVBhc3N3b3JkID0gYXN5bmMgZnVuY3Rpb24gKHBhc3N3b3JkKSB7XG4gIHJldHVybiBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdGhpcy5wYXNzd29yZCk7XG59O1xuY29uc3QgVXNlciA9IG1vbmdvb3NlLm1vZGVsKFwiVXNlclwiLCB1c2VyU2NoZW1hKTtcblxuZXhwb3J0IGRlZmF1bHQgVXNlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLFNBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLE9BQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLGFBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLE9BQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBO0FBQ0EsTUFBTUssVUFBVSxHQUFHLElBQUlDLGlCQUFRLENBQUNDLE1BQU0sQ0FBQztFQUNyQ0MsSUFBSSxFQUFFO0lBQUVDLElBQUksRUFBRUMsTUFBTTtJQUFFQyxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3RDQyxLQUFLLEVBQUU7SUFBRUgsSUFBSSxFQUFFQyxNQUFNO0lBQUVHLE1BQU0sRUFBRSxJQUFJO0lBQUVGLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDckRHLFFBQVEsRUFBRTtJQUNSTCxJQUFJLEVBQUVDLE1BQU07SUFDWkMsUUFBUSxFQUFFLElBQUk7SUFDZEcsUUFBUSxFQUFFO01BQ1JMLElBQUksRUFBRUMsTUFBTTtNQUNaQyxRQUFRLEVBQUUsSUFBSTtNQUNkSSxRQUFRLEVBQUU7UUFDUkMsU0FBUyxFQUFFLFNBQUFBLENBQVVDLENBQUMsRUFBRTtVQUN0QixPQUFPLDBDQUEwQyxDQUFDQyxJQUFJLENBQUNELENBQUMsQ0FBQztRQUMzRCxDQUFDO1FBQ0RFLE9BQU8sRUFBR0MsS0FBSyxJQUNaLEdBQUVBLEtBQUssQ0FBQ0MsS0FBTTtNQUNuQjtJQUNGO0VBQ0YsQ0FBQztFQUNEQyxjQUFjLEVBQUU7SUFBRWIsSUFBSSxFQUFFQztFQUFPLENBQUM7RUFDaENhLE1BQU0sRUFBRTtJQUNOZCxJQUFJLEVBQUVDLE1BQU07SUFDWmMsSUFBSSxFQUFFQztFQUNSLENBQUM7RUFDREMsR0FBRyxFQUFFO0lBQUVqQixJQUFJLEVBQUVrQjtFQUFPLENBQUM7RUFDckJDLFlBQVksRUFBRTtJQUNabkIsSUFBSSxFQUFFQyxNQUFNO0lBQ1pjLElBQUksRUFBRUssMEJBQVk7SUFDbEJDLE9BQU8sRUFBRUQsMEJBQVksQ0FBQ0U7RUFDeEIsQ0FBQztFQUNEQyxXQUFXLEVBQUU7SUFBRXZCLElBQUksRUFBRUM7RUFBTyxDQUFDO0VBQzdCdUIsYUFBYSxFQUFFO0lBQUV4QixJQUFJLEVBQUVDLE1BQU07SUFBRWMsSUFBSSxFQUFFVTtFQUFjLENBQUM7RUFDcERDLFdBQVcsRUFBRTtJQUFFMUIsSUFBSSxFQUFFQztFQUFPLENBQUM7RUFDN0IwQixVQUFVLEVBQUU7SUFDVjNCLElBQUksRUFBRUMsTUFBTTtJQUNaSyxRQUFRLEVBQUU7TUFDUkMsU0FBUyxFQUFFLFNBQUFBLENBQVVDLENBQUMsRUFBRTtRQUN0QixPQUFPLCtCQUErQixDQUFDQyxJQUFJLENBQUNELENBQUMsQ0FBQztNQUNoRCxDQUFDO01BQ0RFLE9BQU8sRUFBRTtJQUNYO0VBQ0YsQ0FBQztFQUNEa0IsY0FBYyxFQUFFO0lBQ2Q1QixJQUFJLEVBQUVDLE1BQU07SUFDWkssUUFBUSxFQUFFO01BQ1JDLFNBQVMsRUFBRSxTQUFBQSxDQUFVQyxDQUFDLEVBQUU7UUFDdEIsT0FBTywwQkFBMEIsQ0FBQ0MsSUFBSSxDQUFDRCxDQUFDLENBQUM7TUFDM0MsQ0FBQztNQUNERSxPQUFPLEVBQUU7SUFDWDtFQUNGLENBQUM7RUFFRG1CLGlCQUFpQixFQUFFO0lBQUU3QixJQUFJLEVBQUVDO0VBQU8sQ0FBQztFQUNuQzZCLGVBQWUsRUFBRTtJQUFFOUIsSUFBSSxFQUFFQztFQUFPLENBQUM7RUFDakM4QixlQUFlLEVBQUU7SUFBRS9CLElBQUksRUFBRWdDLE9BQU87SUFBRVgsT0FBTyxFQUFFO0VBQU0sQ0FBQztFQUNsRFksVUFBVSxFQUFFO0lBQUVqQyxJQUFJLEVBQUVDO0VBQU8sQ0FBQztFQUM1QmlDLFlBQVksRUFBRTtJQUFFbEMsSUFBSSxFQUFFQztFQUFPO0FBQy9CLENBQUMsQ0FBQztBQUVGTCxVQUFVLENBQUN1QyxPQUFPLENBQUNDLGNBQWMsR0FBRyxnQkFBZ0IvQixRQUFRLEVBQUU7RUFDNUQsT0FBTyxNQUFNZ0MsZUFBTSxDQUFDQyxPQUFPLENBQUNqQyxRQUFRLEVBQUUsSUFBSSxDQUFDQSxRQUFRLENBQUM7QUFDdEQsQ0FBQztBQUNELE1BQU1rQyxJQUFJLEdBQUcxQyxpQkFBUSxDQUFDMkMsS0FBSyxDQUFDLE1BQU0sRUFBRTVDLFVBQVUsQ0FBQztBQUFDLElBQUE2QyxRQUFBLEdBRWpDRixJQUFJO0FBQUFHLE9BQUEsQ0FBQXJCLE9BQUEsR0FBQW9CLFFBQUEifQ==","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_maritalStatus","_gender","_accountState","_bcrypt","userSchema","mongoose","Schema","name","type","String","required","email","unique","password","validate","validator","v","test","message","props","value","profilePicture","gender","enum","GenderStatus","age","Number","accountState","AccountState","default","UNVERIFIED","dateOfBirth","maritalStatus","MaritalStatus","nationality","nationalId","passportNumber","nationalIdPicture","passportPicture","isEmailVerified","Boolean","resetToken","resetExpires","methods","verifyPassword","bcrypt","compare","User","model","_default","exports"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/models/","sources":["user.js"],"sourcesContent":["import mongoose from \"mongoose\";\nimport { MaritalStatus } from \"../utils/enum/maritalStatus.enum\";\nimport { GenderStatus } from \"../utils/gender.enum\";\nimport { AccountState } from \"../utils/enum/accountState\";\nimport bcrypt from \"bcrypt\";\n\n// Define user schema\nconst userSchema = new mongoose.Schema({\n  name: { type: String, required: true },\n  email: { type: String, unique: true, required: true },\n  password: {\n    type: String,\n    required: true,\n    password: {\n      type: String,\n      required: true,\n      validate: {\n        validator: function (v) {\n          return /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,12}$/.test(v);\n        },\n        message: (props) =>\n          `${props.value} is not a valid password. Password must be alphanumeric and between 8 and 12 characters.`,\n      },\n    },\n  },\n  profilePicture: { type: String },\n  gender: {\n    type: String,\n    enum: GenderStatus,\n  },\n  age: { type: Number },\n  accountState: {\n    type: String,\n    enum: AccountState,\n    default: AccountState.UNVERIFIED,\n  },\n  dateOfBirth: { type: String },\n  maritalStatus: { type: String, enum: MaritalStatus },\n  nationality: { type: String },\n  nationalId: {\n    type: String,\n    validate: {\n      validator: function (v) {\n        return /^1([9][5-9]|[0-9][0-9])\\d{8}$/.test(v);\n      },\n      message: \"Invalid Rwandan national ID format\",\n    },\n  },\n  passportNumber: {\n    type: String,\n    validate: {\n      validator: function (v) {\n        return /^[A-Z]{2}[A-Z0-9]{3,20}$/.test(v);\n      },\n      message: \"Invalid passport ID format\",\n    },\n  },\n\n  nationalIdPicture: { type: String },\n  passportPicture: { type: String },\n  isEmailVerified: { type: Boolean, default: false },\n  resetToken: { type: String },\n  resetExpires: { type: String },\n});\n\nuserSchema.methods.verifyPassword = async function (password) {\n  return await bcrypt.compare(password, this.password);\n};\nconst User = mongoose.model(\"User\", userSchema);\n\nexport default User;\n"],"mappings":";;;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,cAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAF,OAAA;AACA,IAAAG,aAAA,GAAAH,OAAA;AACA,IAAAI,OAAA,GAAAL,sBAAA,CAAAC,OAAA;AAEA;AACA,MAAMK,UAAU,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACrCC,IAAI,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EACtCC,KAAK,EAAE;IAAEH,IAAI,EAAEC,MAAM;IAAEG,MAAM,EAAE,IAAI;IAAEF,QAAQ,EAAE;EAAK,CAAC;EACrDG,QAAQ,EAAE;IACRL,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,IAAI;IACdG,QAAQ,EAAE;MACRL,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE,IAAI;MACdI,QAAQ,EAAE;QACRC,SAAS,EAAE,SAAAA,CAAUC,CAAC,EAAE;UACtB,OAAO,0CAA0C,CAACC,IAAI,CAACD,CAAC,CAAC;QAC3D,CAAC;QACDE,OAAO,EAAGC,KAAK,IACZ,GAAEA,KAAK,CAACC,KAAM;MACnB;IACF;EACF,CAAC;EACDC,cAAc,EAAE;IAAEb,IAAI,EAAEC;EAAO,CAAC;EAChCa,MAAM,EAAE;IACNd,IAAI,EAAEC,MAAM;IACZc,IAAI,EAAEC;EACR,CAAC;EACDC,GAAG,EAAE;IAAEjB,IAAI,EAAEkB;EAAO,CAAC;EACrBC,YAAY,EAAE;IACZnB,IAAI,EAAEC,MAAM;IACZc,IAAI,EAAEK,0BAAY;IAClBC,OAAO,EAAED,0BAAY,CAACE;EACxB,CAAC;EACDC,WAAW,EAAE;IAAEvB,IAAI,EAAEC;EAAO,CAAC;EAC7BuB,aAAa,EAAE;IAAExB,IAAI,EAAEC,MAAM;IAAEc,IAAI,EAAEU;EAAc,CAAC;EACpDC,WAAW,EAAE;IAAE1B,IAAI,EAAEC;EAAO,CAAC;EAC7B0B,UAAU,EAAE;IACV3B,IAAI,EAAEC,MAAM;IACZK,QAAQ,EAAE;MACRC,SAAS,EAAE,SAAAA,CAAUC,CAAC,EAAE;QACtB,OAAO,+BAA+B,CAACC,IAAI,CAACD,CAAC,CAAC;MAChD,CAAC;MACDE,OAAO,EAAE;IACX;EACF,CAAC;EACDkB,cAAc,EAAE;IACd5B,IAAI,EAAEC,MAAM;IACZK,QAAQ,EAAE;MACRC,SAAS,EAAE,SAAAA,CAAUC,CAAC,EAAE;QACtB,OAAO,0BAA0B,CAACC,IAAI,CAACD,CAAC,CAAC;MAC3C,CAAC;MACDE,OAAO,EAAE;IACX;EACF,CAAC;EAEDmB,iBAAiB,EAAE;IAAE7B,IAAI,EAAEC;EAAO,CAAC;EACnC6B,eAAe,EAAE;IAAE9B,IAAI,EAAEC;EAAO,CAAC;EACjC8B,eAAe,EAAE;IAAE/B,IAAI,EAAEgC,OAAO;IAAEX,OAAO,EAAE;EAAM,CAAC;EAClDY,UAAU,EAAE;IAAEjC,IAAI,EAAEC;EAAO,CAAC;EAC5BiC,YAAY,EAAE;IAAElC,IAAI,EAAEC;EAAO;AAC/B,CAAC,CAAC;AAEFL,UAAU,CAACuC,OAAO,CAACC,cAAc,GAAG,gBAAgB/B,QAAQ,EAAE;EAC5D,OAAO,MAAMgC,eAAM,CAACC,OAAO,CAACjC,QAAQ,EAAE,IAAI,CAACA,QAAQ,CAAC;AACtD,CAAC;AACD,MAAMkC,IAAI,GAAG1C,iBAAQ,CAAC2C,KAAK,CAAC,MAAM,EAAE5C,UAAU,CAAC;AAAC,IAAA6C,QAAA,GAEjCF,IAAI;AAAAG,OAAA,CAAArB,OAAA,GAAAoB,QAAA"}},"mtime":1683074843026},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/enum/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/enum/maritalStatus.enum.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nconst MaritalStatus = {\n  MARRIED: \"MARRIED\",\n  SINGLE: \"SINGLE\",\n  WINDOWED: \"WIDOWED\",\n  DIVORCED: \"DIVORCED\"\n};\nmodule.exports = {\n  MaritalStatus\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNYXJpdGFsU3RhdHVzIiwiTUFSUklFRCIsIlNJTkdMRSIsIldJTkRPV0VEIiwiRElWT1JDRUQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvamVhbm5lZGFyY255aXJhbXdpemEvRG93bmxvYWRzL0FjY291bnQtVmVyaWZpY2F0aW9uLUJhY2tlbmQvc3JjL3V0aWxzL2VudW0vIiwic291cmNlcyI6WyJtYXJpdGFsU3RhdHVzLmVudW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgTWFyaXRhbFN0YXR1cyA9IHtcbiAgTUFSUklFRDogXCJNQVJSSUVEXCIsXG4gIFNJTkdMRTogXCJTSU5HTEVcIixcbiAgV0lORE9XRUQ6IFwiV0lET1dFRFwiLFxuICBESVZPUkNFRDogXCJESVZPUkNFRFwiLFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IE1hcml0YWxTdGF0dXMgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxhQUFhLEdBQUc7RUFDcEJDLE9BQU8sRUFBRSxTQUFTO0VBQ2xCQyxNQUFNLEVBQUUsUUFBUTtFQUNoQkMsUUFBUSxFQUFFLFNBQVM7RUFDbkJDLFFBQVEsRUFBRTtBQUNaLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFBRU47QUFBYyxDQUFDIn0=","map":{"version":3,"names":["MaritalStatus","MARRIED","SINGLE","WINDOWED","DIVORCED","module","exports"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/enum/","sources":["maritalStatus.enum.js"],"sourcesContent":["const MaritalStatus = {\n  MARRIED: \"MARRIED\",\n  SINGLE: \"SINGLE\",\n  WINDOWED: \"WIDOWED\",\n  DIVORCED: \"DIVORCED\",\n};\n\nmodule.exports = { MaritalStatus };\n"],"mappings":";;AAAA,MAAMA,aAAa,GAAG;EACpBC,OAAO,EAAE,SAAS;EAClBC,MAAM,EAAE,QAAQ;EAChBC,QAAQ,EAAE,SAAS;EACnBC,QAAQ,EAAE;AACZ,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAG;EAAEN;AAAc,CAAC"}},"mtime":1682546525073},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n_dotenv.default.config();\nlet dbUrl;\nif (process.env.NODE_ENV === \"test\") {\n  dbUrl = process.env.MONGODB_URL_TEST;\n} else {\n  dbUrl = process.env.MONGODB_URL;\n}\nconst connectDB = async () => {\n  try {\n    await _mongoose.default.connect(dbUrl, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true\n    });\n    console.log(\"MongoDB connected successfully\");\n  } catch (error) {\n    console.error(\"MongoDB connection error:\", error);\n  }\n};\nvar _default = connectDB;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9kb3RlbnYiLCJkb3RlbnYiLCJjb25maWciLCJkYlVybCIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsIk1PTkdPREJfVVJMX1RFU1QiLCJNT05HT0RCX1VSTCIsImNvbm5lY3REQiIsIm1vbmdvb3NlIiwiY29ubmVjdCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qZWFubmVkYXJjbnlpcmFtd2l6YS9Eb3dubG9hZHMvQWNjb3VudC1WZXJpZmljYXRpb24tQmFja2VuZC9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsiZGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuaW1wb3J0IGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XG5kb3RlbnYuY29uZmlnKCk7XG5cbmxldCBkYlVybDtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInRlc3RcIikge1xuICBkYlVybCA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJMX1RFU1Q7XG59IGVsc2Uge1xuICBkYlVybCA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJMO1xufVxuXG5jb25zdCBjb25uZWN0REIgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdChkYlVybCwge1xuICAgICAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxuICAgICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKFwiTW9uZ29EQiBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJNb25nb0RCIGNvbm5lY3Rpb24gZXJyb3I6XCIsIGVycm9yKTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdERCO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0FFLGVBQU0sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7QUFFZixJQUFJQyxLQUFLO0FBRVQsSUFBSUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxNQUFNLEVBQUU7RUFDbkNILEtBQUssR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNFLGdCQUFnQjtBQUN0QyxDQUFDLE1BQU07RUFDTEosS0FBSyxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csV0FBVztBQUNqQztBQUVBLE1BQU1DLFNBQVMsR0FBRyxNQUFBQSxDQUFBLEtBQVk7RUFDNUIsSUFBSTtJQUNGLE1BQU1DLGlCQUFRLENBQUNDLE9BQU8sQ0FBQ1IsS0FBSyxFQUFFO01BQzVCUyxlQUFlLEVBQUUsSUFBSTtNQUNyQkMsa0JBQWtCLEVBQUU7SUFDdEIsQ0FBQyxDQUFDO0lBQ0ZDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdDQUFnQyxDQUFDO0VBQy9DLENBQUMsQ0FBQyxPQUFPQyxLQUFLLEVBQUU7SUFDZEYsT0FBTyxDQUFDRSxLQUFLLENBQUMsMkJBQTJCLEVBQUVBLEtBQUssQ0FBQztFQUNuRDtBQUNGLENBQUM7QUFBQyxJQUFBQyxRQUFBLEdBRWFSLFNBQVM7QUFBQVMsT0FBQSxDQUFBQyxPQUFBLEdBQUFGLFFBQUEifQ==","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_dotenv","dotenv","config","dbUrl","process","env","NODE_ENV","MONGODB_URL_TEST","MONGODB_URL","connectDB","mongoose","connect","useNewUrlParser","useUnifiedTopology","console","log","error","_default","exports","default"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/","sources":["db.js"],"sourcesContent":["import mongoose from \"mongoose\";\nimport dotenv from \"dotenv\";\ndotenv.config();\n\nlet dbUrl;\n\nif (process.env.NODE_ENV === \"test\") {\n  dbUrl = process.env.MONGODB_URL_TEST;\n} else {\n  dbUrl = process.env.MONGODB_URL;\n}\n\nconst connectDB = async () => {\n  try {\n    await mongoose.connect(dbUrl, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true,\n    });\n    console.log(\"MongoDB connected successfully\");\n  } catch (error) {\n    console.error(\"MongoDB connection error:\", error);\n  }\n};\n\nexport default connectDB;\n"],"mappings":";;;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACAE,eAAM,CAACC,MAAM,CAAC,CAAC;AAEf,IAAIC,KAAK;AAET,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,MAAM,EAAE;EACnCH,KAAK,GAAGC,OAAO,CAACC,GAAG,CAACE,gBAAgB;AACtC,CAAC,MAAM;EACLJ,KAAK,GAAGC,OAAO,CAACC,GAAG,CAACG,WAAW;AACjC;AAEA,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;EAC5B,IAAI;IACF,MAAMC,iBAAQ,CAACC,OAAO,CAACR,KAAK,EAAE;MAC5BS,eAAe,EAAE,IAAI;MACrBC,kBAAkB,EAAE;IACtB,CAAC,CAAC;IACFC,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;EAC/C,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdF,OAAO,CAACE,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;EACnD;AACF,CAAC;AAAC,IAAAC,QAAA,GAEaR,SAAS;AAAAS,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1682778608834},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/gender.enum.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nconst GenderStatus = {\n  FEMALE: \"FEMALE\",\n  MALE: \"MALE\",\n  NON_BINARY: \"NON_BINARY\"\n};\nmodule.exports = {\n  GenderStatus\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJHZW5kZXJTdGF0dXMiLCJGRU1BTEUiLCJNQUxFIiwiTk9OX0JJTkFSWSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qZWFubmVkYXJjbnlpcmFtd2l6YS9Eb3dubG9hZHMvQWNjb3VudC1WZXJpZmljYXRpb24tQmFja2VuZC9zcmMvdXRpbHMvIiwic291cmNlcyI6WyJnZW5kZXIuZW51bS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBHZW5kZXJTdGF0dXMgPSB7XG4gIEZFTUFMRTogXCJGRU1BTEVcIixcbiAgTUFMRTogXCJNQUxFXCIsXG4gIE5PTl9CSU5BUlk6IFwiTk9OX0JJTkFSWVwiLFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IEdlbmRlclN0YXR1cyB9O1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLFlBQVksR0FBRztFQUNuQkMsTUFBTSxFQUFFLFFBQVE7RUFDaEJDLElBQUksRUFBRSxNQUFNO0VBQ1pDLFVBQVUsRUFBRTtBQUNkLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFBRUw7QUFBYSxDQUFDIn0=","map":{"version":3,"names":["GenderStatus","FEMALE","MALE","NON_BINARY","module","exports"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/","sources":["gender.enum.js"],"sourcesContent":["const GenderStatus = {\n  FEMALE: \"FEMALE\",\n  MALE: \"MALE\",\n  NON_BINARY: \"NON_BINARY\",\n};\n\nmodule.exports = { GenderStatus };\n"],"mappings":";;AAAA,MAAMA,YAAY,GAAG;EACnBC,MAAM,EAAE,QAAQ;EAChBC,IAAI,EAAE,MAAM;EACZC,UAAU,EAAE;AACd,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAG;EAAEL;AAAa,CAAC"}},"mtime":1682546573141},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _user = _interopRequireDefault(require(\"../models/user\"));\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\nvar _token = _interopRequireDefault(require(\"../models/token\"));\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _sendMail = _interopRequireDefault(require(\"../utils/sendMail\"));\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nconst login = async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n\n  // Check if user exists\n  const user = await _user.default.findOne({\n    email\n  });\n  if (!user) {\n    return res.status(401).json({\n      message: \"Invalid email or password\"\n    });\n  }\n\n  // Verify password\n  const passwordMatch = await user.verifyPassword(password);\n  if (!passwordMatch) {\n    return res.status(401).json({\n      message: \"Invalid email or password\"\n    });\n  }\n  if (user.isEmailVerified === false) {\n    return res.status(401).json({\n      message: \"Verify your email\"\n    });\n  }\n\n  // Generate token\n  // Generate token\n  const token = _jsonwebtoken.default.sign({\n    userId: user._id\n  }, process.env.JWT_SECRET_KEY);\n\n  // Set token in response headers\n  res.set(\"Authorization\", `Bearer ${token}`);\n\n  // Return token and user information\n  return res.json({\n    token,\n    user: {\n      id: user._id,\n      email: user.email\n    }\n  });\n};\nconst resetPassword = async (req, res) => {\n  const {\n    email\n  } = req.body;\n  const existingUser = await _user.default.findOne({\n    email\n  });\n  if (!existingUser) {\n    return res.status(400).json({\n      error: \"Email does not exist\"\n    });\n  }\n  const newToken = _crypto.default.randomBytes(32).toString(\"hex\");\n  const token = new _token.default({\n    userId: existingUser._id,\n    token: newToken\n  });\n  const resetExpires = (0, _moment.default)().add(1, \"hour\").toDate();\n  // Store the reset token in the database\n  existingUser.resetToken = token.token;\n  existingUser.resetExpires = resetExpires;\n  await existingUser.save();\n\n  // Send an email to the user with the reset link\n  const resetLink = `${process.env.BASE_URL}/users/reset-password/${newToken}`;\n  const message = `Hello,\\n\\nYou have requested to reset your password. Please click the following link to reset your password:\\n\\n${resetLink}\\n\\nThis link will expire in 1 hour.\\n`;\n  (0, _sendMail.default)(existingUser.email, \"Password Reset Request\", message);\n  res.status(200).json({\n    message: \"Reset email sent\"\n  });\n};\nconst resetLink = async (req, res) => {\n  const {\n    password\n  } = req.body;\n  const {\n    token\n  } = req.params;\n\n  // Hash password\n  const saltRounds = 10;\n  const hashedPassword = await _bcrypt.default.hash(password, saltRounds);\n  try {\n    const user = await _user.default.findOne({\n      resetToken: token,\n      resetExpires: {\n        $gt: Date.now()\n      }\n    });\n    if (!user) {\n      // Reset token is invalid or has expired\n      res.status(400).json({\n        message: \"Invalid or expired reset token\"\n      });\n      return;\n    }\n\n    // Update the user's password and reset the resetToken and resetExpires fields in the database\n    user.password = hashedPassword;\n    user.resetToken = undefined;\n    user.resetExpires = undefined;\n    await user.save();\n    res.status(200).json({\n      message: \"Password reset successfully\"\n    });\n  } catch (err) {\n    console.error(err);\n    res.status(500).json({\n      message: \"Server error\"\n    });\n  }\n};\nvar _default = {\n  login,\n  resetPassword,\n  resetLink\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXNlciIsIl9jcnlwdG8iLCJfdG9rZW4iLCJfbW9tZW50IiwiX3NlbmRNYWlsIiwiX2JjcnlwdCIsImxvZ2luIiwicmVxIiwicmVzIiwiZW1haWwiLCJwYXNzd29yZCIsImJvZHkiLCJ1c2VyIiwiVXNlciIsImZpbmRPbmUiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsInBhc3N3b3JkTWF0Y2giLCJ2ZXJpZnlQYXNzd29yZCIsImlzRW1haWxWZXJpZmllZCIsInRva2VuIiwiand0Iiwic2lnbiIsInVzZXJJZCIsIl9pZCIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUX0tFWSIsInNldCIsImlkIiwicmVzZXRQYXNzd29yZCIsImV4aXN0aW5nVXNlciIsImVycm9yIiwibmV3VG9rZW4iLCJjcnlwdG8iLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIiwiVG9rZW4iLCJyZXNldEV4cGlyZXMiLCJtb21lbnQiLCJhZGQiLCJ0b0RhdGUiLCJyZXNldFRva2VuIiwic2F2ZSIsInJlc2V0TGluayIsIkJBU0VfVVJMIiwic2VuZE1haWwiLCJwYXJhbXMiLCJzYWx0Um91bmRzIiwiaGFzaGVkUGFzc3dvcmQiLCJiY3J5cHQiLCJoYXNoIiwiJGd0IiwiRGF0ZSIsIm5vdyIsInVuZGVmaW5lZCIsImVyciIsImNvbnNvbGUiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvamVhbm5lZGFyY255aXJhbXdpemEvRG93bmxvYWRzL0FjY291bnQtVmVyaWZpY2F0aW9uLUJhY2tlbmQvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiYXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcbmltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbHMvdXNlclwiO1xuaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgVG9rZW4gZnJvbSBcIi4uL21vZGVscy90b2tlblwiO1xuaW1wb3J0IG1vbWVudCBmcm9tIFwibW9tZW50XCI7XG5pbXBvcnQgc2VuZE1haWwgZnJvbSBcIi4uL3V0aWxzL3NlbmRNYWlsXCI7XG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcblxuY29uc3QgbG9naW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuXG4gIC8vIENoZWNrIGlmIHVzZXIgZXhpc3RzXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KTtcbiAgaWYgKCF1c2VyKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogXCJJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkXCIgfSk7XG4gIH1cblxuICAvLyBWZXJpZnkgcGFzc3dvcmRcbiAgY29uc3QgcGFzc3dvcmRNYXRjaCA9IGF3YWl0IHVzZXIudmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQpO1xuICBpZiAoIXBhc3N3b3JkTWF0Y2gpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiBcIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmRcIiB9KTtcbiAgfVxuICBpZiAodXNlci5pc0VtYWlsVmVyaWZpZWQgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogXCJWZXJpZnkgeW91ciBlbWFpbFwiIH0pO1xuICB9XG5cbiAgLy8gR2VuZXJhdGUgdG9rZW5cbiAgLy8gR2VuZXJhdGUgdG9rZW5cbiAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbih7IHVzZXJJZDogdXNlci5faWQgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVF9LRVkpO1xuXG4gIC8vIFNldCB0b2tlbiBpbiByZXNwb25zZSBoZWFkZXJzXG4gIHJlcy5zZXQoXCJBdXRob3JpemF0aW9uXCIsIGBCZWFyZXIgJHt0b2tlbn1gKTtcblxuICAvLyBSZXR1cm4gdG9rZW4gYW5kIHVzZXIgaW5mb3JtYXRpb25cbiAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICB0b2tlbixcbiAgICB1c2VyOiB7XG4gICAgICBpZDogdXNlci5faWQsXG4gICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICB9LFxuICB9KTtcbn07XG5cbmNvbnN0IHJlc2V0UGFzc3dvcmQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBlbWFpbCB9ID0gcmVxLmJvZHk7XG4gIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pO1xuICBpZiAoIWV4aXN0aW5nVXNlcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkVtYWlsIGRvZXMgbm90IGV4aXN0XCIgfSk7XG4gIH1cblxuICBjb25zdCBuZXdUb2tlbiA9IGNyeXB0by5yYW5kb21CeXRlcygzMikudG9TdHJpbmcoXCJoZXhcIik7XG4gIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHtcbiAgICB1c2VySWQ6IGV4aXN0aW5nVXNlci5faWQsXG4gICAgdG9rZW46IG5ld1Rva2VuLFxuICB9KTtcblxuICBjb25zdCByZXNldEV4cGlyZXMgPSBtb21lbnQoKS5hZGQoMSwgXCJob3VyXCIpLnRvRGF0ZSgpO1xuICAvLyBTdG9yZSB0aGUgcmVzZXQgdG9rZW4gaW4gdGhlIGRhdGFiYXNlXG4gIGV4aXN0aW5nVXNlci5yZXNldFRva2VuID0gdG9rZW4udG9rZW47XG4gIGV4aXN0aW5nVXNlci5yZXNldEV4cGlyZXMgPSByZXNldEV4cGlyZXM7XG4gIGF3YWl0IGV4aXN0aW5nVXNlci5zYXZlKCk7XG5cbiAgLy8gU2VuZCBhbiBlbWFpbCB0byB0aGUgdXNlciB3aXRoIHRoZSByZXNldCBsaW5rXG4gIGNvbnN0IHJlc2V0TGluayA9IGAke3Byb2Nlc3MuZW52LkJBU0VfVVJMfS91c2Vycy9yZXNldC1wYXNzd29yZC8ke25ld1Rva2VufWA7XG4gIGNvbnN0IG1lc3NhZ2UgPSBgSGVsbG8sXFxuXFxuWW91IGhhdmUgcmVxdWVzdGVkIHRvIHJlc2V0IHlvdXIgcGFzc3dvcmQuIFBsZWFzZSBjbGljayB0aGUgZm9sbG93aW5nIGxpbmsgdG8gcmVzZXQgeW91ciBwYXNzd29yZDpcXG5cXG4ke3Jlc2V0TGlua31cXG5cXG5UaGlzIGxpbmsgd2lsbCBleHBpcmUgaW4gMSBob3VyLlxcbmA7XG4gIHNlbmRNYWlsKGV4aXN0aW5nVXNlci5lbWFpbCwgXCJQYXNzd29yZCBSZXNldCBSZXF1ZXN0XCIsIG1lc3NhZ2UpO1xuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogXCJSZXNldCBlbWFpbCBzZW50XCIgfSk7XG59O1xuXG5jb25zdCByZXNldExpbmsgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gIGNvbnN0IHsgdG9rZW4gfSA9IHJlcS5wYXJhbXM7XG5cbiAgLy8gSGFzaCBwYXNzd29yZFxuICBjb25zdCBzYWx0Um91bmRzID0gMTA7XG4gIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHRSb3VuZHMpO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICByZXNldFRva2VuOiB0b2tlbixcbiAgICAgIHJlc2V0RXhwaXJlczogeyAkZ3Q6IERhdGUubm93KCkgfSxcbiAgICB9KTtcblxuICAgIGlmICghdXNlcikge1xuICAgICAgLy8gUmVzZXQgdG9rZW4gaXMgaW52YWxpZCBvciBoYXMgZXhwaXJlZFxuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIkludmFsaWQgb3IgZXhwaXJlZCByZXNldCB0b2tlblwiIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgdXNlcidzIHBhc3N3b3JkIGFuZCByZXNldCB0aGUgcmVzZXRUb2tlbiBhbmQgcmVzZXRFeHBpcmVzIGZpZWxkcyBpbiB0aGUgZGF0YWJhc2VcbiAgICB1c2VyLnBhc3N3b3JkID0gaGFzaGVkUGFzc3dvcmQ7XG4gICAgdXNlci5yZXNldFRva2VuID0gdW5kZWZpbmVkO1xuICAgIHVzZXIucmVzZXRFeHBpcmVzID0gdW5kZWZpbmVkO1xuXG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiUGFzc3dvcmQgcmVzZXQgc3VjY2Vzc2Z1bGx5XCIgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiU2VydmVyIGVycm9yXCIgfSk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHsgbG9naW4sIHJlc2V0UGFzc3dvcmQsIHJlc2V0TGluayB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsYUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsS0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsTUFBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksT0FBQSxHQUFBTCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUssU0FBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQU0sT0FBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTU8sS0FBSyxHQUFHLE1BQUFBLENBQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ2hDLE1BQU07SUFBRUMsS0FBSztJQUFFQztFQUFTLENBQUMsR0FBR0gsR0FBRyxDQUFDSSxJQUFJOztFQUVwQztFQUNBLE1BQU1DLElBQUks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","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_user","_crypto","_token","_moment","_sendMail","_bcrypt","login","req","res","email","password","body","user","User","findOne","status","json","message","passwordMatch","verifyPassword","isEmailVerified","token","jwt","sign","userId","_id","process","env","JWT_SECRET_KEY","set","id","resetPassword","existingUser","error","newToken","crypto","randomBytes","toString","Token","resetExpires","moment","add","toDate","resetToken","save","resetLink","BASE_URL","sendMail","params","saltRounds","hashedPassword","bcrypt","hash","$gt","Date","now","undefined","err","console","_default","exports","default"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/","sources":["auth.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\nimport User from \"../models/user\";\nimport crypto from \"crypto\";\nimport Token from \"../models/token\";\nimport moment from \"moment\";\nimport sendMail from \"../utils/sendMail\";\nimport bcrypt from \"bcrypt\";\n\nconst login = async (req, res) => {\n  const { email, password } = req.body;\n\n  // Check if user exists\n  const user = await User.findOne({ email });\n  if (!user) {\n    return res.status(401).json({ message: \"Invalid email or password\" });\n  }\n\n  // Verify password\n  const passwordMatch = await user.verifyPassword(password);\n  if (!passwordMatch) {\n    return res.status(401).json({ message: \"Invalid email or password\" });\n  }\n  if (user.isEmailVerified === false) {\n    return res.status(401).json({ message: \"Verify your email\" });\n  }\n\n  // Generate token\n  // Generate token\n  const token = jwt.sign({ userId: user._id }, process.env.JWT_SECRET_KEY);\n\n  // Set token in response headers\n  res.set(\"Authorization\", `Bearer ${token}`);\n\n  // Return token and user information\n  return res.json({\n    token,\n    user: {\n      id: user._id,\n      email: user.email,\n    },\n  });\n};\n\nconst resetPassword = async (req, res) => {\n  const { email } = req.body;\n  const existingUser = await User.findOne({ email });\n  if (!existingUser) {\n    return res.status(400).json({ error: \"Email does not exist\" });\n  }\n\n  const newToken = crypto.randomBytes(32).toString(\"hex\");\n  const token = new Token({\n    userId: existingUser._id,\n    token: newToken,\n  });\n\n  const resetExpires = moment().add(1, \"hour\").toDate();\n  // Store the reset token in the database\n  existingUser.resetToken = token.token;\n  existingUser.resetExpires = resetExpires;\n  await existingUser.save();\n\n  // Send an email to the user with the reset link\n  const resetLink = `${process.env.BASE_URL}/users/reset-password/${newToken}`;\n  const message = `Hello,\\n\\nYou have requested to reset your password. Please click the following link to reset your password:\\n\\n${resetLink}\\n\\nThis link will expire in 1 hour.\\n`;\n  sendMail(existingUser.email, \"Password Reset Request\", message);\n\n  res.status(200).json({ message: \"Reset email sent\" });\n};\n\nconst resetLink = async (req, res) => {\n  const { password } = req.body;\n  const { token } = req.params;\n\n  // Hash password\n  const saltRounds = 10;\n  const hashedPassword = await bcrypt.hash(password, saltRounds);\n\n  try {\n    const user = await User.findOne({\n      resetToken: token,\n      resetExpires: { $gt: Date.now() },\n    });\n\n    if (!user) {\n      // Reset token is invalid or has expired\n      res.status(400).json({ message: \"Invalid or expired reset token\" });\n      return;\n    }\n\n    // Update the user's password and reset the resetToken and resetExpires fields in the database\n    user.password = hashedPassword;\n    user.resetToken = undefined;\n    user.resetExpires = undefined;\n\n    await user.save();\n\n    res.status(200).json({ message: \"Password reset successfully\" });\n  } catch (err) {\n    console.error(err);\n    res.status(500).json({ message: \"Server error\" });\n  }\n};\n\nexport default { login, resetPassword, resetLink };\n"],"mappings":"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"}},"mtime":1682860528595},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/passport.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _passportGoogleOauth = require(\"passport-google-oauth20\");\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n_dotenv.default.config();\n_passport.default.use(new _passportGoogleOauth.Strategy({\n  clientID: process.env.GOOGLE_CLIENT_ID,\n  clientSecret: process.env.GOOGLE_CLIENT_SECRET,\n  callbackURL: \"http://127.0.0.1:4002/users/auth/google/callback\"\n}, function (accessToken, refreshToken, profile, done) {\n  const userProfile = profile;\n  return done(null, userProfile);\n}));\nvar _default = _passport.default;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcGFzc3BvcnQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9wYXNzcG9ydEdvb2dsZU9hdXRoIiwiX2RvdGVudiIsImRvdGVudiIsImNvbmZpZyIsInBhc3Nwb3J0IiwidXNlIiwiR29vZ2xlU3RyYXRlZ3kiLCJjbGllbnRJRCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJjYWxsYmFja1VSTCIsImFjY2Vzc1Rva2VuIiwicmVmcmVzaFRva2VuIiwicHJvZmlsZSIsImRvbmUiLCJ1c2VyUHJvZmlsZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qZWFubmVkYXJjbnlpcmFtd2l6YS9Eb3dubG9hZHMvQWNjb3VudC1WZXJpZmljYXRpb24tQmFja2VuZC9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsicGFzc3BvcnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xuaW1wb3J0IHsgU3RyYXRlZ3kgYXMgR29vZ2xlU3RyYXRlZ3kgfSBmcm9tIFwicGFzc3BvcnQtZ29vZ2xlLW9hdXRoMjBcIjtcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xuZG90ZW52LmNvbmZpZygpO1xuXG5wYXNzcG9ydC51c2UoXG4gIG5ldyBHb29nbGVTdHJhdGVneShcbiAgICB7XG4gICAgICBjbGllbnRJRDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCxcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9TRUNSRVQsXG4gICAgICBjYWxsYmFja1VSTDogXCJodHRwOi8vMTI3LjAuMC4xOjQwMDIvdXNlcnMvYXV0aC9nb29nbGUvY2FsbGJhY2tcIixcbiAgICB9LFxuICAgIGZ1bmN0aW9uIChhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBwcm9maWxlLCBkb25lKSB7XG4gICAgICBjb25zdCB1c2VyUHJvZmlsZSA9IHByb2ZpbGU7XG4gICAgICByZXR1cm4gZG9uZShudWxsLCB1c2VyUHJvZmlsZSk7XG4gICAgfVxuICApXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBwYXNzcG9ydDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLFNBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLG9CQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQUcsZUFBTSxDQUFDQyxNQUFNLENBQUMsQ0FBQztBQUVmQyxpQkFBUSxDQUFDQyxHQUFHLENBQ1YsSUFBSUMsNkJBQWMsQ0FDaEI7RUFDRUMsUUFBUSxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsZ0JBQWdCO0VBQ3RDQyxZQUFZLEVBQUVILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxvQkFBb0I7RUFDOUNDLFdBQVcsRUFBRTtBQUNmLENBQUMsRUFDRCxVQUFVQyxXQUFXLEVBQUVDLFlBQVksRUFBRUMsT0FBTyxFQUFFQyxJQUFJLEVBQUU7RUFDbEQsTUFBTUMsV0FBVyxHQUFHRixPQUFPO0VBQzNCLE9BQU9DLElBQUksQ0FBQyxJQUFJLEVBQUVDLFdBQVcsQ0FBQztBQUNoQyxDQUNGLENBQ0YsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FFYWYsaUJBQVE7QUFBQWdCLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBIn0=","map":{"version":3,"names":["_passport","_interopRequireDefault","require","_passportGoogleOauth","_dotenv","dotenv","config","passport","use","GoogleStrategy","clientID","process","env","GOOGLE_CLIENT_ID","clientSecret","GOOGLE_CLIENT_SECRET","callbackURL","accessToken","refreshToken","profile","done","userProfile","_default","exports","default"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/","sources":["passport.js"],"sourcesContent":["import passport from \"passport\";\nimport { Strategy as GoogleStrategy } from \"passport-google-oauth20\";\nimport dotenv from \"dotenv\";\ndotenv.config();\n\npassport.use(\n  new GoogleStrategy(\n    {\n      clientID: process.env.GOOGLE_CLIENT_ID,\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET,\n      callbackURL: \"http://127.0.0.1:4002/users/auth/google/callback\",\n    },\n    function (accessToken, refreshToken, profile, done) {\n      const userProfile = profile;\n      return done(null, userProfile);\n    }\n  )\n);\n\nexport default passport;\n"],"mappings":";;;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,oBAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AACAG,eAAM,CAACC,MAAM,CAAC,CAAC;AAEfC,iBAAQ,CAACC,GAAG,CACV,IAAIC,6BAAc,CAChB;EACEC,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC,gBAAgB;EACtCC,YAAY,EAAEH,OAAO,CAACC,GAAG,CAACG,oBAAoB;EAC9CC,WAAW,EAAE;AACf,CAAC,EACD,UAAUC,WAAW,EAAEC,YAAY,EAAEC,OAAO,EAAEC,IAAI,EAAE;EAClD,MAAMC,WAAW,GAAGF,OAAO;EAC3B,OAAOC,IAAI,CAAC,IAAI,EAAEC,WAAW,CAAC;AAChC,CACF,CACF,CAAC;AAAC,IAAAC,QAAA,GAEaf,iBAAQ;AAAAgB,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1682849015989},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _user = _interopRequireDefault(require(\"../models/user\"));\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\nvar _token = _interopRequireDefault(require(\"../models/token\"));\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _sendMail = _interopRequireDefault(require(\"../utils/sendMail\"));\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nconst login = async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n\n  // Check if user exists\n  const user = await _user.default.findOne({\n    email\n  });\n  if (!user) {\n    return res.status(401).json({\n      message: \"Invalid email or password\"\n    });\n  }\n\n  // Verify password\n  const passwordMatch = await user.verifyPassword(password);\n  if (!passwordMatch) {\n    return res.status(401).json({\n      message: \"Invalid email or password\"\n    });\n  }\n  if (user.isEmailVerified === false) {\n    return res.status(401).json({\n      message: \"Verify your email\"\n    });\n  }\n\n  // Generate token\n  const token = _jsonwebtoken.default.sign({\n    userId: user._id\n  }, process.env.JWT_SECRET_KEY);\n\n  // Set token in response headers\n  res.set(\"Authorization\", `Bearer ${token}`);\n\n  // Return token and user information\n  return res.json({\n    token,\n    user: {\n      id: user._id,\n      email: user.email\n    }\n  });\n};\nconst resetPassword = async (req, res) => {\n  const {\n    email\n  } = req.body;\n  const existingUser = await _user.default.findOne({\n    email\n  });\n  if (!existingUser) {\n    return res.status(400).json({\n      error: \"Email does not exist\"\n    });\n  }\n  const newToken = _crypto.default.randomBytes(32).toString(\"hex\");\n  const token = new _token.default({\n    userId: existingUser._id,\n    token: newToken\n  });\n  const resetExpires = (0, _moment.default)().add(1, \"hour\").toDate();\n  // Store the reset token in the database\n  existingUser.resetToken = token.token;\n  existingUser.resetExpires = resetExpires;\n  await existingUser.save();\n\n  // Send an email to the user with the reset link\n  const resetLink = `${process.env.BASE_URL}/users/reset-password/${newToken}`;\n  const message = `Hello,\\n\\nYou have requested to reset your password. Please click the following link to reset your password:\\n\\n${resetLink}\\n\\nThis link will expire in 1 hour.\\n`;\n  (0, _sendMail.default)(existingUser.email, \"Password Reset Request\", message);\n  res.status(200).json({\n    message: \"Reset email sent\"\n  });\n};\nconst resetLink = async (req, res) => {\n  const {\n    password\n  } = req.body;\n  const {\n    token\n  } = req.params;\n\n  // Hash password\n  const saltRounds = 10;\n  const hashedPassword = await _bcrypt.default.hash(password, saltRounds);\n  try {\n    const user = await _user.default.findOne({\n      resetToken: token,\n      resetExpires: {\n        $gt: Date.now()\n      }\n    });\n    if (!user) {\n      // Reset token is invalid or has expired\n      res.status(400).json({\n        message: \"Invalid or expired reset token\"\n      });\n      return;\n    }\n\n    // Update the user's password and reset the resetToken and resetExpires fields in the database\n    user.password = hashedPassword;\n    user.resetToken = undefined;\n    user.resetExpires = undefined;\n    await user.save();\n    res.status(200).json({\n      message: \"Password reset successfully\"\n    });\n  } catch (err) {\n    console.error(err);\n    res.status(500).json({\n      message: \"Server error\"\n    });\n  }\n};\nvar _default = {\n  login,\n  resetPassword,\n  resetLink\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXNlciIsIl9jcnlwdG8iLCJfdG9rZW4iLCJfbW9tZW50IiwiX3NlbmRNYWlsIiwiX2JjcnlwdCIsImxvZ2luIiwicmVxIiwicmVzIiwiZW1haWwiLCJwYXNzd29yZCIsImJvZHkiLCJ1c2VyIiwiVXNlciIsImZpbmRPbmUiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsInBhc3N3b3JkTWF0Y2giLCJ2ZXJpZnlQYXNzd29yZCIsImlzRW1haWxWZXJpZmllZCIsInRva2VuIiwiand0Iiwic2lnbiIsInVzZXJJZCIsIl9pZCIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUX0tFWSIsInNldCIsImlkIiwicmVzZXRQYXNzd29yZCIsImV4aXN0aW5nVXNlciIsImVycm9yIiwibmV3VG9rZW4iLCJjcnlwdG8iLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIiwiVG9rZW4iLCJyZXNldEV4cGlyZXMiLCJtb21lbnQiLCJhZGQiLCJ0b0RhdGUiLCJyZXNldFRva2VuIiwic2F2ZSIsInJlc2V0TGluayIsIkJBU0VfVVJMIiwic2VuZE1haWwiLCJwYXJhbXMiLCJzYWx0Um91bmRzIiwiaGFzaGVkUGFzc3dvcmQiLCJiY3J5cHQiLCJoYXNoIiwiJGd0IiwiRGF0ZSIsIm5vdyIsInVuZGVmaW5lZCIsImVyciIsImNvbnNvbGUiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvamVhbm5lZGFyY255aXJhbXdpemEvRG93bmxvYWRzL0FjY291bnQtVmVyaWZpY2F0aW9uLUJhY2tlbmQvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiYXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcbmltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbHMvdXNlclwiO1xuaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgVG9rZW4gZnJvbSBcIi4uL21vZGVscy90b2tlblwiO1xuaW1wb3J0IG1vbWVudCBmcm9tIFwibW9tZW50XCI7XG5pbXBvcnQgc2VuZE1haWwgZnJvbSBcIi4uL3V0aWxzL3NlbmRNYWlsXCI7XG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcblxuY29uc3QgbG9naW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuXG4gIC8vIENoZWNrIGlmIHVzZXIgZXhpc3RzXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KTtcbiAgaWYgKCF1c2VyKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogXCJJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkXCIgfSk7XG4gIH1cblxuICAvLyBWZXJpZnkgcGFzc3dvcmRcbiAgY29uc3QgcGFzc3dvcmRNYXRjaCA9IGF3YWl0IHVzZXIudmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQpO1xuICBpZiAoIXBhc3N3b3JkTWF0Y2gpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiBcIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmRcIiB9KTtcbiAgfVxuICBpZiAodXNlci5pc0VtYWlsVmVyaWZpZWQgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogXCJWZXJpZnkgeW91ciBlbWFpbFwiIH0pO1xuICB9XG5cbiAgLy8gR2VuZXJhdGUgdG9rZW5cbiAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbih7IHVzZXJJZDogdXNlci5faWQgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVF9LRVkpO1xuXG4gIC8vIFNldCB0b2tlbiBpbiByZXNwb25zZSBoZWFkZXJzXG4gIHJlcy5zZXQoXCJBdXRob3JpemF0aW9uXCIsIGBCZWFyZXIgJHt0b2tlbn1gKTtcblxuICAvLyBSZXR1cm4gdG9rZW4gYW5kIHVzZXIgaW5mb3JtYXRpb25cbiAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICB0b2tlbixcbiAgICB1c2VyOiB7XG4gICAgICBpZDogdXNlci5faWQsXG4gICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICB9LFxuICB9KTtcbn07XG5cbmNvbnN0IHJlc2V0UGFzc3dvcmQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBlbWFpbCB9ID0gcmVxLmJvZHk7XG4gIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pO1xuICBpZiAoIWV4aXN0aW5nVXNlcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkVtYWlsIGRvZXMgbm90IGV4aXN0XCIgfSk7XG4gIH1cblxuICBjb25zdCBuZXdUb2tlbiA9IGNyeXB0by5yYW5kb21CeXRlcygzMikudG9TdHJpbmcoXCJoZXhcIik7XG4gIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHtcbiAgICB1c2VySWQ6IGV4aXN0aW5nVXNlci5faWQsXG4gICAgdG9rZW46IG5ld1Rva2VuLFxuICB9KTtcblxuICBjb25zdCByZXNldEV4cGlyZXMgPSBtb21lbnQoKS5hZGQoMSwgXCJob3VyXCIpLnRvRGF0ZSgpO1xuICAvLyBTdG9yZSB0aGUgcmVzZXQgdG9rZW4gaW4gdGhlIGRhdGFiYXNlXG4gIGV4aXN0aW5nVXNlci5yZXNldFRva2VuID0gdG9rZW4udG9rZW47XG4gIGV4aXN0aW5nVXNlci5yZXNldEV4cGlyZXMgPSByZXNldEV4cGlyZXM7XG4gIGF3YWl0IGV4aXN0aW5nVXNlci5zYXZlKCk7XG5cbiAgLy8gU2VuZCBhbiBlbWFpbCB0byB0aGUgdXNlciB3aXRoIHRoZSByZXNldCBsaW5rXG4gIGNvbnN0IHJlc2V0TGluayA9IGAke3Byb2Nlc3MuZW52LkJBU0VfVVJMfS91c2Vycy9yZXNldC1wYXNzd29yZC8ke25ld1Rva2VufWA7XG4gIGNvbnN0IG1lc3NhZ2UgPSBgSGVsbG8sXFxuXFxuWW91IGhhdmUgcmVxdWVzdGVkIHRvIHJlc2V0IHlvdXIgcGFzc3dvcmQuIFBsZWFzZSBjbGljayB0aGUgZm9sbG93aW5nIGxpbmsgdG8gcmVzZXQgeW91ciBwYXNzd29yZDpcXG5cXG4ke3Jlc2V0TGlua31cXG5cXG5UaGlzIGxpbmsgd2lsbCBleHBpcmUgaW4gMSBob3VyLlxcbmA7XG4gIHNlbmRNYWlsKGV4aXN0aW5nVXNlci5lbWFpbCwgXCJQYXNzd29yZCBSZXNldCBSZXF1ZXN0XCIsIG1lc3NhZ2UpO1xuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogXCJSZXNldCBlbWFpbCBzZW50XCIgfSk7XG59O1xuXG5jb25zdCByZXNldExpbmsgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gIGNvbnN0IHsgdG9rZW4gfSA9IHJlcS5wYXJhbXM7XG5cbiAgLy8gSGFzaCBwYXNzd29yZFxuICBjb25zdCBzYWx0Um91bmRzID0gMTA7XG4gIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHRSb3VuZHMpO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICByZXNldFRva2VuOiB0b2tlbixcbiAgICAgIHJlc2V0RXhwaXJlczogeyAkZ3Q6IERhdGUubm93KCkgfSxcbiAgICB9KTtcblxuICAgIGlmICghdXNlcikge1xuICAgICAgLy8gUmVzZXQgdG9rZW4gaXMgaW52YWxpZCBvciBoYXMgZXhwaXJlZFxuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIkludmFsaWQgb3IgZXhwaXJlZCByZXNldCB0b2tlblwiIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgdXNlcidzIHBhc3N3b3JkIGFuZCByZXNldCB0aGUgcmVzZXRUb2tlbiBhbmQgcmVzZXRFeHBpcmVzIGZpZWxkcyBpbiB0aGUgZGF0YWJhc2VcbiAgICB1c2VyLnBhc3N3b3JkID0gaGFzaGVkUGFzc3dvcmQ7XG4gICAgdXNlci5yZXNldFRva2VuID0gdW5kZWZpbmVkO1xuICAgIHVzZXIucmVzZXRFeHBpcmVzID0gdW5kZWZpbmVkO1xuXG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiUGFzc3dvcmQgcmVzZXQgc3VjY2Vzc2Z1bGx5XCIgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiU2VydmVyIGVycm9yXCIgfSk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHsgbG9naW4sIHJlc2V0UGFzc3dvcmQsIHJlc2V0TGluayB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsYUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsS0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsTUFBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksT0FBQSxHQUFBTCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUssU0FBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQU0sT0FBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTU8sS0FBSyxHQUFHLE1BQUFBLENBQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ2hDLE1BQU07SUFBRUMsS0FBSztJQUFFQztFQUFTLENBQUMsR0FBR0gsR0FBRyxDQUFDSSxJQUFJOztFQUVwQztFQUNBLE1BQU1DLElBQUksR0FBRyxNQUFNQyxhQUFJLENBQUND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","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_user","_crypto","_token","_moment","_sendMail","_bcrypt","login","req","res","email","password","body","user","User","findOne","status","json","message","passwordMatch","verifyPassword","isEmailVerified","token","jwt","sign","userId","_id","process","env","JWT_SECRET_KEY","set","id","resetPassword","existingUser","error","newToken","crypto","randomBytes","toString","Token","resetExpires","moment","add","toDate","resetToken","save","resetLink","BASE_URL","sendMail","params","saltRounds","hashedPassword","bcrypt","hash","$gt","Date","now","undefined","err","console","_default","exports","default"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/","sources":["auth.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\nimport User from \"../models/user\";\nimport crypto from \"crypto\";\nimport Token from \"../models/token\";\nimport moment from \"moment\";\nimport sendMail from \"../utils/sendMail\";\nimport bcrypt from \"bcrypt\";\n\nconst login = async (req, res) => {\n  const { email, password } = req.body;\n\n  // Check if user exists\n  const user = await User.findOne({ email });\n  if (!user) {\n    return res.status(401).json({ message: \"Invalid email or password\" });\n  }\n\n  // Verify password\n  const passwordMatch = await user.verifyPassword(password);\n  if (!passwordMatch) {\n    return res.status(401).json({ message: \"Invalid email or password\" });\n  }\n  if (user.isEmailVerified === false) {\n    return res.status(401).json({ message: \"Verify your email\" });\n  }\n\n  // Generate token\n  const token = jwt.sign({ userId: user._id }, process.env.JWT_SECRET_KEY);\n\n  // Set token in response headers\n  res.set(\"Authorization\", `Bearer ${token}`);\n\n  // Return token and user information\n  return res.json({\n    token,\n    user: {\n      id: user._id,\n      email: user.email,\n    },\n  });\n};\n\nconst resetPassword = async (req, res) => {\n  const { email } = req.body;\n  const existingUser = await User.findOne({ email });\n  if (!existingUser) {\n    return res.status(400).json({ error: \"Email does not exist\" });\n  }\n\n  const newToken = crypto.randomBytes(32).toString(\"hex\");\n  const token = new Token({\n    userId: existingUser._id,\n    token: newToken,\n  });\n\n  const resetExpires = moment().add(1, \"hour\").toDate();\n  // Store the reset token in the database\n  existingUser.resetToken = token.token;\n  existingUser.resetExpires = resetExpires;\n  await existingUser.save();\n\n  // Send an email to the user with the reset link\n  const resetLink = `${process.env.BASE_URL}/users/reset-password/${newToken}`;\n  const message = `Hello,\\n\\nYou have requested to reset your password. Please click the following link to reset your password:\\n\\n${resetLink}\\n\\nThis link will expire in 1 hour.\\n`;\n  sendMail(existingUser.email, \"Password Reset Request\", message);\n\n  res.status(200).json({ message: \"Reset email sent\" });\n};\n\nconst resetLink = async (req, res) => {\n  const { password } = req.body;\n  const { token } = req.params;\n\n  // Hash password\n  const saltRounds = 10;\n  const hashedPassword = await bcrypt.hash(password, saltRounds);\n\n  try {\n    const user = await User.findOne({\n      resetToken: token,\n      resetExpires: { $gt: Date.now() },\n    });\n\n    if (!user) {\n      // Reset token is invalid or has expired\n      res.status(400).json({ message: \"Invalid or expired reset token\" });\n      return;\n    }\n\n    // Update the user's password and reset the resetToken and resetExpires fields in the database\n    user.password = hashedPassword;\n    user.resetToken = undefined;\n    user.resetExpires = undefined;\n\n    await user.save();\n\n    res.status(200).json({ message: \"Password reset successfully\" });\n  } catch (err) {\n    console.error(err);\n    res.status(500).json({ message: \"Server error\" });\n  }\n};\n\nexport default { login, resetPassword, resetLink };\n"],"mappings":"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"}},"mtime":1683150812722},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/loginWithGoolge.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIvVXNlcnMvamVhbm5lZGFyY255aXJhbXdpemEvRG93bmxvYWRzL0FjY291bnQtVmVyaWZpY2F0aW9uLUJhY2tlbmQvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsibG9naW5XaXRoR29vbGdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuIl0sIm1hcHBpbmdzIjoiIn0=","map":{"version":3,"names":[],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/","sources":["loginWithGoolge.js"],"sourcesContent":["\n"],"mappings":""}},"mtime":1682834196434},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/googleAuth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _passportGoogleOauth = require(\"passport-google-oauth\");\nconst GOOGLE_CLIENT_ID = process.env.GOOGLE_CLIENT_ID;\nconst GOOGLE_CLIENT_SECRET = process.env.GOOGLE_CLIENT_SECRET;\nconst googleAuth = _passport.default.use(new _passportGoogleOauth.Strategy({\n  clientID: GOOGLE_CLIENT_ID,\n  clientSecret: GOOGLE_CLIENT_SECRET,\n  callbackURL: process.env.GOOGLE_CALLBACK_URL\n}, function (accessToken, refreshToken, profile, done) {\n  const userProfile = profile;\n  return done(null, userProfile);\n}));\nvar _default = {\n  googleAuth\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcGFzc3BvcnQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9wYXNzcG9ydEdvb2dsZU9hdXRoIiwiR09PR0xFX0NMSUVOVF9JRCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX1NFQ1JFVCIsImdvb2dsZUF1dGgiLCJwYXNzcG9ydCIsInVzZSIsIkdvb2dsZVN0cmF0ZWd5IiwiY2xpZW50SUQiLCJjbGllbnRTZWNyZXQiLCJjYWxsYmFja1VSTCIsIkdPT0dMRV9DQUxMQkFDS19VUkwiLCJhY2Nlc3NUb2tlbiIsInJlZnJlc2hUb2tlbiIsInByb2ZpbGUiLCJkb25lIiwidXNlclByb2ZpbGUiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvamVhbm5lZGFyY255aXJhbXdpemEvRG93bmxvYWRzL0FjY291bnQtVmVyaWZpY2F0aW9uLUJhY2tlbmQvc3JjL2NvbmZpZy8iLCJzb3VyY2VzIjpbImdvb2dsZUF1dGguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xuaW1wb3J0IHsgU3RyYXRlZ3kgYXMgR29vZ2xlU3RyYXRlZ3kgfSBmcm9tIFwicGFzc3BvcnQtZ29vZ2xlLW9hdXRoXCI7XG5cbmNvbnN0IEdPT0dMRV9DTElFTlRfSUQgPSBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX0lEO1xuY29uc3QgR09PR0xFX0NMSUVOVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVDtcblxuY29uc3QgZ29vZ2xlQXV0aCA9IHBhc3Nwb3J0LnVzZShcbiAgbmV3IEdvb2dsZVN0cmF0ZWd5KFxuICAgIHtcbiAgICAgIGNsaWVudElEOiBHT09HTEVfQ0xJRU5UX0lELFxuICAgICAgY2xpZW50U2VjcmV0OiBHT09HTEVfQ0xJRU5UX1NFQ1JFVCxcbiAgICAgIGNhbGxiYWNrVVJMOiBwcm9jZXNzLmVudi5HT09HTEVfQ0FMTEJBQ0tfVVJMLFxuICAgIH0sXG4gICAgZnVuY3Rpb24gKGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW4sIHByb2ZpbGUsIGRvbmUpIHtcbiAgICAgIGNvbnN0IHVzZXJQcm9maWxlID0gcHJvZmlsZTtcbiAgICAgIHJldHVybiBkb25lKG51bGwsIHVzZXJQcm9maWxlKTtcbiAgICB9XG4gIClcbik7XG5cbmV4cG9ydCBkZWZhdWx0IHsgZ29vZ2xlQXV0aCB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsb0JBQUEsR0FBQUQsT0FBQTtBQUVBLE1BQU1FLGdCQUFnQixHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0YsZ0JBQWdCO0FBQ3JELE1BQU1HLG9CQUFvQixHQUFHRixPQUFPLENBQUNDLEdBQUcsQ0FBQ0Msb0JBQW9CO0FBRTdELE1BQU1DLFVBQVUsR0FBR0MsaUJBQVEsQ0FBQ0MsR0FBRyxDQUM3QixJQUFJQyw2QkFBYyxDQUNoQjtFQUNFQyxRQUFRLEVBQUVSLGdCQUFnQjtFQUMxQlMsWUFBWSxFQUFFTixvQkFBb0I7RUFDbENPLFdBQVcsRUFBRVQsT0FBTyxDQUFDQyxHQUFHLENBQUNTO0FBQzNCLENBQUMsRUFDRCxVQUFVQyxXQUFXLEVBQUVDLFlBQVksRUFBRUMsT0FBTyxFQUFFQyxJQUFJLEVBQUU7RUFDbEQsTUFBTUMsV0FBVyxHQUFHRixPQUFPO0VBQzNCLE9BQU9DLElBQUksQ0FBQyxJQUFJLEVBQUVDLFdBQVcsQ0FBQztBQUNoQyxDQUNGLENBQ0YsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FFYTtFQUFFYjtBQUFXLENBQUM7QUFBQWMsT0FBQSxDQUFBQyxPQUFBLEdBQUFGLFFBQUEifQ==","map":{"version":3,"names":["_passport","_interopRequireDefault","require","_passportGoogleOauth","GOOGLE_CLIENT_ID","process","env","GOOGLE_CLIENT_SECRET","googleAuth","passport","use","GoogleStrategy","clientID","clientSecret","callbackURL","GOOGLE_CALLBACK_URL","accessToken","refreshToken","profile","done","userProfile","_default","exports","default"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/","sources":["googleAuth.js"],"sourcesContent":["import passport from \"passport\";\nimport { Strategy as GoogleStrategy } from \"passport-google-oauth\";\n\nconst GOOGLE_CLIENT_ID = process.env.GOOGLE_CLIENT_ID;\nconst GOOGLE_CLIENT_SECRET = process.env.GOOGLE_CLIENT_SECRET;\n\nconst googleAuth = passport.use(\n  new GoogleStrategy(\n    {\n      clientID: GOOGLE_CLIENT_ID,\n      clientSecret: GOOGLE_CLIENT_SECRET,\n      callbackURL: process.env.GOOGLE_CALLBACK_URL,\n    },\n    function (accessToken, refreshToken, profile, done) {\n      const userProfile = profile;\n      return done(null, userProfile);\n    }\n  )\n);\n\nexport default { googleAuth };\n"],"mappings":";;;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,oBAAA,GAAAD,OAAA;AAEA,MAAME,gBAAgB,GAAGC,OAAO,CAACC,GAAG,CAACF,gBAAgB;AACrD,MAAMG,oBAAoB,GAAGF,OAAO,CAACC,GAAG,CAACC,oBAAoB;AAE7D,MAAMC,UAAU,GAAGC,iBAAQ,CAACC,GAAG,CAC7B,IAAIC,6BAAc,CAChB;EACEC,QAAQ,EAAER,gBAAgB;EAC1BS,YAAY,EAAEN,oBAAoB;EAClCO,WAAW,EAAET,OAAO,CAACC,GAAG,CAACS;AAC3B,CAAC,EACD,UAAUC,WAAW,EAAEC,YAAY,EAAEC,OAAO,EAAEC,IAAI,EAAE;EAClD,MAAMC,WAAW,GAAGF,OAAO;EAC3B,OAAOC,IAAI,CAAC,IAAI,EAAEC,WAAW,CAAC;AAChC,CACF,CACF,CAAC;AAAC,IAAAC,QAAA,GAEa;EAAEb;AAAW,CAAC;AAAAc,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1682845694207},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/loginWithGoolge.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIvVXNlcnMvamVhbm5lZGFyY255aXJhbXdpemEvRG93bmxvYWRzL0FjY291bnQtVmVyaWZpY2F0aW9uLUJhY2tlbmQvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsibG9naW5XaXRoR29vbGdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuIl0sIm1hcHBpbmdzIjoiIn0=","map":{"version":3,"names":[],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/","sources":["loginWithGoolge.js"],"sourcesContent":["\n"],"mappings":""}},"mtime":1682834196434},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/googleAuth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _passportGoogleOauth = require(\"passport-google-oauth\");\nconst GOOGLE_CLIENT_ID = process.env.GOOGLE_CLIENT_ID;\nconst GOOGLE_CLIENT_SECRET = process.env.GOOGLE_CLIENT_SECRET;\n_passport.default.use(new _passportGoogleOauth.Strategy({\n  clientID: GOOGLE_CLIENT_ID,\n  clientSecret: GOOGLE_CLIENT_SECRET,\n  callbackURL: process.env.GOOGLE_CALLBACK_URL\n}, function (accessToken, refreshToken, profile, done) {\n  const userProfile = profile;\n  return done(null, userProfile);\n}));\nvar _default = _passport.default;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcGFzc3BvcnQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9wYXNzcG9ydEdvb2dsZU9hdXRoIiwiR09PR0xFX0NMSUVOVF9JRCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX1NFQ1JFVCIsInBhc3Nwb3J0IiwidXNlIiwiR29vZ2xlU3RyYXRlZ3kiLCJjbGllbnRJRCIsImNsaWVudFNlY3JldCIsImNhbGxiYWNrVVJMIiwiR09PR0xFX0NBTExCQUNLX1VSTCIsImFjY2Vzc1Rva2VuIiwicmVmcmVzaFRva2VuIiwicHJvZmlsZSIsImRvbmUiLCJ1c2VyUHJvZmlsZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qZWFubmVkYXJjbnlpcmFtd2l6YS9Eb3dubG9hZHMvQWNjb3VudC1WZXJpZmljYXRpb24tQmFja2VuZC9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsiZ29vZ2xlQXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGFzc3BvcnQgZnJvbSBcInBhc3Nwb3J0XCI7XG5pbXBvcnQgeyBTdHJhdGVneSBhcyBHb29nbGVTdHJhdGVneSB9IGZyb20gXCJwYXNzcG9ydC1nb29nbGUtb2F1dGhcIjtcblxuY29uc3QgR09PR0xFX0NMSUVOVF9JRCA9IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQ7XG5jb25zdCBHT09HTEVfQ0xJRU5UX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfU0VDUkVUO1xuXG5wYXNzcG9ydC51c2UoXG4gIG5ldyBHb29nbGVTdHJhdGVneShcbiAgICB7XG4gICAgICBjbGllbnRJRDogR09PR0xFX0NMSUVOVF9JRCxcbiAgICAgIGNsaWVudFNlY3JldDogR09PR0xFX0NMSUVOVF9TRUNSRVQsXG4gICAgICBjYWxsYmFja1VSTDogcHJvY2Vzcy5lbnYuR09PR0xFX0NBTExCQUNLX1VSTCxcbiAgICB9LFxuICAgIGZ1bmN0aW9uIChhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBwcm9maWxlLCBkb25lKSB7XG4gICAgICBjb25zdCB1c2VyUHJvZmlsZSA9IHByb2ZpbGU7XG4gICAgICByZXR1cm4gZG9uZShudWxsLCB1c2VyUHJvZmlsZSk7XG4gICAgfVxuICApXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBwYXNzcG9ydDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLFNBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLG9CQUFBLEdBQUFELE9BQUE7QUFFQSxNQUFNRSxnQkFBZ0IsR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNGLGdCQUFnQjtBQUNyRCxNQUFNRyxvQkFBb0IsR0FBR0YsT0FBTyxDQUFDQyxHQUFHLENBQUNDLG9CQUFvQjtBQUU3REMsaUJBQVEsQ0FBQ0MsR0FBRyxDQUNWLElBQUlDLDZCQUFjLENBQ2hCO0VBQ0VDLFFBQVEsRUFBRVAsZ0JBQWdCO0VBQzFCUSxZQUFZLEVBQUVMLG9CQUFvQjtFQUNsQ00sV0FBVyxFQUFFUixPQUFPLENBQUNDLEdBQUcsQ0FBQ1E7QUFDM0IsQ0FBQyxFQUNELFVBQVVDLFdBQVcsRUFBRUMsWUFBWSxFQUFFQyxPQUFPLEVBQUVDLElBQUksRUFBRTtFQUNsRCxNQUFNQyxXQUFXLEdBQUdGLE9BQU87RUFDM0IsT0FBT0MsSUFBSSxDQUFDLElBQUksRUFBRUMsV0FBVyxDQUFDO0FBQ2hDLENBQ0YsQ0FDRixDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUVhWixpQkFBUTtBQUFBYSxPQUFBLENBQUFDLE9BQUEsR0FBQUYsUUFBQSJ9","map":{"version":3,"names":["_passport","_interopRequireDefault","require","_passportGoogleOauth","GOOGLE_CLIENT_ID","process","env","GOOGLE_CLIENT_SECRET","passport","use","GoogleStrategy","clientID","clientSecret","callbackURL","GOOGLE_CALLBACK_URL","accessToken","refreshToken","profile","done","userProfile","_default","exports","default"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/","sources":["googleAuth.js"],"sourcesContent":["import passport from \"passport\";\nimport { Strategy as GoogleStrategy } from \"passport-google-oauth\";\n\nconst GOOGLE_CLIENT_ID = process.env.GOOGLE_CLIENT_ID;\nconst GOOGLE_CLIENT_SECRET = process.env.GOOGLE_CLIENT_SECRET;\n\npassport.use(\n  new GoogleStrategy(\n    {\n      clientID: GOOGLE_CLIENT_ID,\n      clientSecret: GOOGLE_CLIENT_SECRET,\n      callbackURL: process.env.GOOGLE_CALLBACK_URL,\n    },\n    function (accessToken, refreshToken, profile, done) {\n      const userProfile = profile;\n      return done(null, userProfile);\n    }\n  )\n);\n\nexport default passport;\n"],"mappings":";;;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,oBAAA,GAAAD,OAAA;AAEA,MAAME,gBAAgB,GAAGC,OAAO,CAACC,GAAG,CAACF,gBAAgB;AACrD,MAAMG,oBAAoB,GAAGF,OAAO,CAACC,GAAG,CAACC,oBAAoB;AAE7DC,iBAAQ,CAACC,GAAG,CACV,IAAIC,6BAAc,CAChB;EACEC,QAAQ,EAAEP,gBAAgB;EAC1BQ,YAAY,EAAEL,oBAAoB;EAClCM,WAAW,EAAER,OAAO,CAACC,GAAG,CAACQ;AAC3B,CAAC,EACD,UAAUC,WAAW,EAAEC,YAAY,EAAEC,OAAO,EAAEC,IAAI,EAAE;EAClD,MAAMC,WAAW,GAAGF,OAAO;EAC3B,OAAOC,IAAI,CAAC,IAAI,EAAEC,WAAW,CAAC;AAChC,CACF,CACF,CAAC;AAAC,IAAAC,QAAA,GAEaZ,iBAAQ;AAAAa,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1682846419174},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/enum/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/enum/accountState.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nconst AccountState = {\n  UNVERIFIED: \"UNVERIFIED\",\n  PENDING: \"PENDING\",\n  VERIFICATION: \"VERIFICATION\",\n  VERIFIED: \"VERIFIED\"\n};\nmodule.exports = {\n  AccountState\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBY2NvdW50U3RhdGUiLCJVTlZFUklGSUVEIiwiUEVORElORyIsIlZFUklGSUNBVElPTiIsIlZFUklGSUVEIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2plYW5uZWRhcmNueWlyYW13aXphL0Rvd25sb2Fkcy9BY2NvdW50LVZlcmlmaWNhdGlvbi1CYWNrZW5kL3NyYy91dGlscy9lbnVtLyIsInNvdXJjZXMiOlsiYWNjb3VudFN0YXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEFjY291bnRTdGF0ZSA9IHtcbiAgVU5WRVJJRklFRDogXCJVTlZFUklGSUVEXCIsXG4gIFBFTkRJTkc6IFwiUEVORElOR1wiLFxuICBWRVJJRklDQVRJT046IFwiVkVSSUZJQ0FUSU9OXCIsXG4gIFZFUklGSUVEOiBcIlZFUklGSUVEXCIsXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHsgQWNjb3VudFN0YXRlIH07XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsWUFBWSxHQUFHO0VBQ25CQyxVQUFVLEVBQUUsWUFBWTtFQUN4QkMsT0FBTyxFQUFFLFNBQVM7RUFDbEJDLFlBQVksRUFBRSxjQUFjO0VBQzVCQyxRQUFRLEVBQUU7QUFDWixDQUFDO0FBRURDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQUVOO0FBQWEsQ0FBQyJ9","map":{"version":3,"names":["AccountState","UNVERIFIED","PENDING","VERIFICATION","VERIFIED","module","exports"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/enum/","sources":["accountState.js"],"sourcesContent":["const AccountState = {\n  UNVERIFIED: \"UNVERIFIED\",\n  PENDING: \"PENDING\",\n  VERIFICATION: \"VERIFICATION\",\n  VERIFIED: \"VERIFIED\",\n};\n\nmodule.exports = { AccountState };\n"],"mappings":";;AAAA,MAAMA,YAAY,GAAG;EACnBC,UAAU,EAAE,YAAY;EACxBC,OAAO,EAAE,SAAS;EAClBC,YAAY,EAAE,cAAc;EAC5BC,QAAQ,EAAE;AACZ,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAG;EAAEN;AAAa,CAAC"}},"mtime":1682800065851},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/enum/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/enum/accountState.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nconst AccountState = {\n  UNVERIFIED: \"UNVERIFIED\",\n  PENDING: \"PENDING\",\n  VERIFICATION: \"VERIFICATION\",\n  VERIFIED: \"VERIFIED\"\n};\nmodule.exports = {\n  AccountState\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBY2NvdW50U3RhdGUiLCJVTlZFUklGSUVEIiwiUEVORElORyIsIlZFUklGSUNBVElPTiIsIlZFUklGSUVEIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2plYW5uZWRhcmNueWlyYW13aXphL0Rvd25sb2Fkcy9BY2NvdW50LVZlcmlmaWNhdGlvbi1CYWNrZW5kL3NyYy91dGlscy9lbnVtLyIsInNvdXJjZXMiOlsiYWNjb3VudFN0YXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEFjY291bnRTdGF0ZSA9IHtcbiAgVU5WRVJJRklFRDogXCJVTlZFUklGSUVEXCIsXG4gIFBFTkRJTkc6IFwiUEVORElOR1wiLFxuICBWRVJJRklDQVRJT046IFwiVkVSSUZJQ0FUSU9OXCIsXG4gIFZFUklGSUVEOiBcIlZFUklGSUVEXCIsXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHsgQWNjb3VudFN0YXRlIH07XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsWUFBWSxHQUFHO0VBQ25CQyxVQUFVLEVBQUUsWUFBWTtFQUN4QkMsT0FBTyxFQUFFLFNBQVM7RUFDbEJDLFlBQVksRUFBRSxjQUFjO0VBQzVCQyxRQUFRLEVBQUU7QUFDWixDQUFDO0FBRURDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQUVOO0FBQWEsQ0FBQyJ9","map":{"version":3,"names":["AccountState","UNVERIFIED","PENDING","VERIFICATION","VERIFIED","module","exports"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/enum/","sources":["accountState.js"],"sourcesContent":["const AccountState = {\n  UNVERIFIED: \"UNVERIFIED\",\n  PENDING: \"PENDING\",\n  VERIFICATION: \"VERIFICATION\",\n  VERIFIED: \"VERIFIED\",\n};\n\nmodule.exports = { AccountState };\n"],"mappings":";;AAAA,MAAMA,YAAY,GAAG;EACnBC,UAAU,EAAE,YAAY;EACxBC,OAAO,EAAE,SAAS;EAClBC,YAAY,EAAE,cAAc;EAC5BC,QAAQ,EAAE;AACZ,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAG;EAAEN;AAAa,CAAC"}},"mtime":1682800065851},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/models/token.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nconst {\n  Schema\n} = _mongoose.default;\nconst tokenSchema = new _mongoose.default.Schema({\n  userId: {\n    type: Schema.Types.ObjectId,\n    ref: \"user\",\n    required: true\n  },\n  token: {\n    type: String,\n    required: true\n  }\n});\nconst Token = _mongoose.default.model(\"token\", tokenSchema);\nmodule.exports = Token;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIlNjaGVtYSIsIm1vbmdvb3NlIiwidG9rZW5TY2hlbWEiLCJ1c2VySWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwidG9rZW4iLCJTdHJpbmciLCJUb2tlbiIsIm1vZGVsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2plYW5uZWRhcmNueWlyYW13aXphL0Rvd25sb2Fkcy9BY2NvdW50LVZlcmlmaWNhdGlvbi1CYWNrZW5kL3NyYy9tb2RlbHMvIiwic291cmNlcyI6WyJ0b2tlbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5jb25zdCB7IFNjaGVtYSB9ID0gbW9uZ29vc2U7XG5cbmNvbnN0IHRva2VuU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIHVzZXJJZDoge1xuICAgIHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICByZWY6IFwidXNlclwiLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICB0b2tlbjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbn0pO1xuXG5jb25zdCBUb2tlbiA9IG1vbmdvb3NlLm1vZGVsKFwidG9rZW5cIiwgdG9rZW5TY2hlbWEpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRva2VuO1xuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFNO0VBQUVDO0FBQU8sQ0FBQyxHQUFHQyxpQkFBUTtBQUUzQixNQUFNQyxXQUFXLEdBQUcsSUFBSUQsaUJBQVEsQ0FBQ0QsTUFBTSxDQUFDO0VBQ3RDRyxNQUFNLEVBQUU7SUFDTkMsSUFBSSxFQUFFSixNQUFNLENBQUNLLEtBQUssQ0FBQ0MsUUFBUTtJQUMzQkMsR0FBRyxFQUFFLE1BQU07SUFDWEMsUUFBUSxFQUFFO0VBQ1osQ0FBQztFQUNEQyxLQUFLLEVBQUU7SUFDTEwsSUFBSSxFQUFFTSxNQUFNO0lBQ1pGLFFBQVEsRUFBRTtFQUNaO0FBQ0YsQ0FBQyxDQUFDO0FBRUYsTUFBTUcsS0FBSyxHQUFHVixpQkFBUSxDQUFDVyxLQUFLLENBQUMsT0FBTyxFQUFFVixXQUFXLENBQUM7QUFFbERXLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHSCxLQUFLIn0=","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","Schema","mongoose","tokenSchema","userId","type","Types","ObjectId","ref","required","token","String","Token","model","module","exports"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/models/","sources":["token.js"],"sourcesContent":["import mongoose from \"mongoose\";\nconst { Schema } = mongoose;\n\nconst tokenSchema = new mongoose.Schema({\n  userId: {\n    type: Schema.Types.ObjectId,\n    ref: \"user\",\n    required: true,\n  },\n  token: {\n    type: String,\n    required: true,\n  },\n});\n\nconst Token = mongoose.model(\"token\", tokenSchema);\n\nmodule.exports = Token;\n"],"mappings":";;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,MAAM;EAAEC;AAAO,CAAC,GAAGC,iBAAQ;AAE3B,MAAMC,WAAW,GAAG,IAAID,iBAAQ,CAACD,MAAM,CAAC;EACtCG,MAAM,EAAE;IACNC,IAAI,EAAEJ,MAAM,CAACK,KAAK,CAACC,QAAQ;IAC3BC,GAAG,EAAE,MAAM;IACXC,QAAQ,EAAE;EACZ,CAAC;EACDC,KAAK,EAAE;IACLL,IAAI,EAAEM,MAAM;IACZF,QAAQ,EAAE;EACZ;AACF,CAAC,CAAC;AAEF,MAAMG,KAAK,GAAGV,iBAAQ,CAACW,KAAK,CAAC,OAAO,EAAEV,WAAW,CAAC;AAElDW,MAAM,CAACC,OAAO,GAAGH,KAAK"}},"mtime":1682837522190},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/models/token.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nconst {\n  Schema\n} = _mongoose.default;\nconst tokenSchema = new _mongoose.default.Schema({\n  userId: {\n    type: Schema.Types.ObjectId,\n    ref: \"user\",\n    required: true\n  },\n  token: {\n    type: String,\n    required: true\n  }\n});\nconst Token = _mongoose.default.model(\"token\", tokenSchema);\nmodule.exports = Token;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIlNjaGVtYSIsIm1vbmdvb3NlIiwidG9rZW5TY2hlbWEiLCJ1c2VySWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwidG9rZW4iLCJTdHJpbmciLCJUb2tlbiIsIm1vZGVsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2plYW5uZWRhcmNueWlyYW13aXphL0Rvd25sb2Fkcy9BY2NvdW50LVZlcmlmaWNhdGlvbi1CYWNrZW5kL3NyYy9tb2RlbHMvIiwic291cmNlcyI6WyJ0b2tlbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5jb25zdCB7IFNjaGVtYSB9ID0gbW9uZ29vc2U7XG5cbmNvbnN0IHRva2VuU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIHVzZXJJZDoge1xuICAgIHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICByZWY6IFwidXNlclwiLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICB0b2tlbjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbn0pO1xuXG5jb25zdCBUb2tlbiA9IG1vbmdvb3NlLm1vZGVsKFwidG9rZW5cIiwgdG9rZW5TY2hlbWEpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRva2VuO1xuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFNO0VBQUVDO0FBQU8sQ0FBQyxHQUFHQyxpQkFBUTtBQUUzQixNQUFNQyxXQUFXLEdBQUcsSUFBSUQsaUJBQVEsQ0FBQ0QsTUFBTSxDQUFDO0VBQ3RDRyxNQUFNLEVBQUU7SUFDTkMsSUFBSSxFQUFFSixNQUFNLENBQUNLLEtBQUssQ0FBQ0MsUUFBUTtJQUMzQkMsR0FBRyxFQUFFLE1BQU07SUFDWEMsUUFBUSxFQUFFO0VBQ1osQ0FBQztFQUNEQyxLQUFLLEVBQUU7SUFDTEwsSUFBSSxFQUFFTSxNQUFNO0lBQ1pGLFFBQVEsRUFBRTtFQUNaO0FBQ0YsQ0FBQyxDQUFDO0FBRUYsTUFBTUcsS0FBSyxHQUFHVixpQkFBUSxDQUFDVyxLQUFLLENBQUMsT0FBTyxFQUFFVixXQUFXLENBQUM7QUFFbERXLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHSCxLQUFLIn0=","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","Schema","mongoose","tokenSchema","userId","type","Types","ObjectId","ref","required","token","String","Token","model","module","exports"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/models/","sources":["token.js"],"sourcesContent":["import mongoose from \"mongoose\";\nconst { Schema } = mongoose;\n\nconst tokenSchema = new mongoose.Schema({\n  userId: {\n    type: Schema.Types.ObjectId,\n    ref: \"user\",\n    required: true,\n  },\n  token: {\n    type: String,\n    required: true,\n  },\n});\n\nconst Token = mongoose.model(\"token\", tokenSchema);\n\nmodule.exports = Token;\n"],"mappings":";;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,MAAM;EAAEC;AAAO,CAAC,GAAGC,iBAAQ;AAE3B,MAAMC,WAAW,GAAG,IAAID,iBAAQ,CAACD,MAAM,CAAC;EACtCG,MAAM,EAAE;IACNC,IAAI,EAAEJ,MAAM,CAACK,KAAK,CAACC,QAAQ;IAC3BC,GAAG,EAAE,MAAM;IACXC,QAAQ,EAAE;EACZ,CAAC;EACDC,KAAK,EAAE;IACLL,IAAI,EAAEM,MAAM;IACZF,QAAQ,EAAE;EACZ;AACF,CAAC,CAAC;AAEF,MAAMG,KAAK,GAAGV,iBAAQ,CAACW,KAAK,CAAC,OAAO,EAAEV,WAAW,CAAC;AAElDW,MAAM,CAACC,OAAO,GAAGH,KAAK"}},"mtime":1682837522190},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/sendMail.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _nodemailer = _interopRequireDefault(require(\"nodemailer\"));\nconst sendEmail = async (email, subject, text) => {\n  try {\n    const transporter = _nodemailer.default.createTransport({\n      host: process.env.MAIL_HOST,\n      service: process.env.MAIL_SERVICE,\n      port: 25,\n      secure: false,\n      auth: {\n        user: process.env.MAIL_USER,\n        pass: process.env.MAIL_PASS\n      }\n    });\n    await transporter.sendMail({\n      from: \"njoanc@gmail.com\",\n      to: email,\n      subject: subject,\n      text: text\n    });\n    console.log(\"email sent sucessfully\");\n  } catch (error) {\n    console.log(\"email not sent\");\n    console.log(error);\n  }\n};\nmodule.exports = sendEmail;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZW1haWxlciIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwic2VuZEVtYWlsIiwiZW1haWwiLCJzdWJqZWN0IiwidGV4dCIsInRyYW5zcG9ydGVyIiwibm9kZW1haWxlciIsImNyZWF0ZVRyYW5zcG9ydCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiTUFJTF9IT1NUIiwic2VydmljZSIsIk1BSUxfU0VSVklDRSIsInBvcnQiLCJzZWN1cmUiLCJhdXRoIiwidXNlciIsIk1BSUxfVVNFUiIsInBhc3MiLCJNQUlMX1BBU1MiLCJzZW5kTWFpbCIsImZyb20iLCJ0byIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qZWFubmVkYXJjbnlpcmFtd2l6YS9Eb3dubG9hZHMvQWNjb3VudC1WZXJpZmljYXRpb24tQmFja2VuZC9zcmMvdXRpbHMvIiwic291cmNlcyI6WyJzZW5kTWFpbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbm9kZW1haWxlciBmcm9tIFwibm9kZW1haWxlclwiO1xuXG5jb25zdCBzZW5kRW1haWwgPSBhc3luYyAoZW1haWwsIHN1YmplY3QsIHRleHQpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcbiAgICAgIGhvc3Q6IHByb2Nlc3MuZW52Lk1BSUxfSE9TVCxcbiAgICAgIHNlcnZpY2U6IHByb2Nlc3MuZW52Lk1BSUxfU0VSVklDRSxcbiAgICAgIHBvcnQ6IDI1LFxuICAgICAgc2VjdXJlOiBmYWxzZSxcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuTUFJTF9VU0VSLFxuICAgICAgICBwYXNzOiBwcm9jZXNzLmVudi5NQUlMX1BBU1MsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwoe1xuICAgICAgZnJvbTogXCJuam9hbmNAZ21haWwuY29tXCIsXG4gICAgICB0bzogZW1haWwsXG4gICAgICBzdWJqZWN0OiBzdWJqZWN0LFxuICAgICAgdGV4dDogdGV4dCxcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhcImVtYWlsIHNlbnQgc3VjZXNzZnVsbHlcIik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coXCJlbWFpbCBub3Qgc2VudFwiKTtcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gc2VuZEVtYWlsO1xuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQSxJQUFBQSxXQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNQyxTQUFTLEdBQUcsTUFBQUEsQ0FBT0MsS0FBSyxFQUFFQyxPQUFPLEVBQUVDLElBQUksS0FBSztFQUNoRCxJQUFJO0lBQ0YsTUFBTUMsV0FBVyxHQUFHQyxtQkFBVSxDQUFDQyxlQUFlLENBQUM7TUFDN0NDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFNBQVM7TUFDM0JDLE9BQU8sRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLFlBQVk7TUFDakNDLElBQUksRUFBRSxFQUFFO01BQ1JDLE1BQU0sRUFBRSxLQUFLO01BQ2JDLElBQUksRUFBRTtRQUNKQyxJQUFJLEVBQUVSLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDUSxTQUFTO1FBQzNCQyxJQUFJLEVBQUVWLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDVTtNQUNwQjtJQUNGLENBQUMsQ0FBQztJQUVGLE1BQU1mLFdBQVcsQ0FBQ2dCLFFBQVEsQ0FBQztNQUN6QkMsSUFBSSxFQUFFLGtCQUFrQjtNQUN4QkMsRUFBRSxFQUFFckIsS0FBSztNQUNUQyxPQUFPLEVBQUVBLE9BQU87TUFDaEJDLElBQUksRUFBRUE7SUFDUixDQUFDLENBQUM7SUFDRm9CLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHdCQUF3QixDQUFDO0VBQ3ZDLENBQUMsQ0FBQyxPQUFPQyxLQUFLLEVBQUU7SUFDZEYsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0JBQWdCLENBQUM7SUFDN0JELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxLQUFLLENBQUM7RUFDcEI7QUFDRixDQUFDO0FBRURDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHM0IsU0FBUyJ9","map":{"version":3,"names":["_nodemailer","_interopRequireDefault","require","sendEmail","email","subject","text","transporter","nodemailer","createTransport","host","process","env","MAIL_HOST","service","MAIL_SERVICE","port","secure","auth","user","MAIL_USER","pass","MAIL_PASS","sendMail","from","to","console","log","error","module","exports"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/","sources":["sendMail.js"],"sourcesContent":["import nodemailer from \"nodemailer\";\n\nconst sendEmail = async (email, subject, text) => {\n  try {\n    const transporter = nodemailer.createTransport({\n      host: process.env.MAIL_HOST,\n      service: process.env.MAIL_SERVICE,\n      port: 25,\n      secure: false,\n      auth: {\n        user: process.env.MAIL_USER,\n        pass: process.env.MAIL_PASS,\n      },\n    });\n\n    await transporter.sendMail({\n      from: \"njoanc@gmail.com\",\n      to: email,\n      subject: subject,\n      text: text,\n    });\n    console.log(\"email sent sucessfully\");\n  } catch (error) {\n    console.log(\"email not sent\");\n    console.log(error);\n  }\n};\n\nmodule.exports = sendEmail;\n"],"mappings":";;;AAAA,IAAAA,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,MAAMC,SAAS,GAAG,MAAAA,CAAOC,KAAK,EAAEC,OAAO,EAAEC,IAAI,KAAK;EAChD,IAAI;IACF,MAAMC,WAAW,GAAGC,mBAAU,CAACC,eAAe,CAAC;MAC7CC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,SAAS;MAC3BC,OAAO,EAAEH,OAAO,CAACC,GAAG,CAACG,YAAY;MACjCC,IAAI,EAAE,EAAE;MACRC,MAAM,EAAE,KAAK;MACbC,IAAI,EAAE;QACJC,IAAI,EAAER,OAAO,CAACC,GAAG,CAACQ,SAAS;QAC3BC,IAAI,EAAEV,OAAO,CAACC,GAAG,CAACU;MACpB;IACF,CAAC,CAAC;IAEF,MAAMf,WAAW,CAACgB,QAAQ,CAAC;MACzBC,IAAI,EAAE,kBAAkB;MACxBC,EAAE,EAAErB,KAAK;MACTC,OAAO,EAAEA,OAAO;MAChBC,IAAI,EAAEA;IACR,CAAC,CAAC;IACFoB,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;EACvC,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdF,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;IAC7BD,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;EACpB;AACF,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAG3B,SAAS"}},"mtime":1682839446141},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/sendMail.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _nodemailer = _interopRequireDefault(require(\"nodemailer\"));\nconst sendEmail = async (email, subject, text) => {\n  try {\n    const transporter = _nodemailer.default.createTransport({\n      host: process.env.MAIL_HOST,\n      service: process.env.MAIL_SERVICE,\n      port: 25,\n      secure: false,\n      auth: {\n        user: process.env.MAIL_USER,\n        pass: process.env.MAIL_PASS\n      }\n    });\n    await transporter.sendMail({\n      from: \"njoanc@gmail.com\",\n      to: email,\n      subject: subject,\n      text: text\n    });\n    console.log(\"email sent sucessfully\");\n  } catch (error) {\n    console.log(\"email not sent\");\n    console.log(error);\n  }\n};\nmodule.exports = sendEmail;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZW1haWxlciIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwic2VuZEVtYWlsIiwiZW1haWwiLCJzdWJqZWN0IiwidGV4dCIsInRyYW5zcG9ydGVyIiwibm9kZW1haWxlciIsImNyZWF0ZVRyYW5zcG9ydCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiTUFJTF9IT1NUIiwic2VydmljZSIsIk1BSUxfU0VSVklDRSIsInBvcnQiLCJzZWN1cmUiLCJhdXRoIiwidXNlciIsIk1BSUxfVVNFUiIsInBhc3MiLCJNQUlMX1BBU1MiLCJzZW5kTWFpbCIsImZyb20iLCJ0byIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qZWFubmVkYXJjbnlpcmFtd2l6YS9Eb3dubG9hZHMvQWNjb3VudC1WZXJpZmljYXRpb24tQmFja2VuZC9zcmMvdXRpbHMvIiwic291cmNlcyI6WyJzZW5kTWFpbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbm9kZW1haWxlciBmcm9tIFwibm9kZW1haWxlclwiO1xuXG5jb25zdCBzZW5kRW1haWwgPSBhc3luYyAoZW1haWwsIHN1YmplY3QsIHRleHQpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcbiAgICAgIGhvc3Q6IHByb2Nlc3MuZW52Lk1BSUxfSE9TVCxcbiAgICAgIHNlcnZpY2U6IHByb2Nlc3MuZW52Lk1BSUxfU0VSVklDRSxcbiAgICAgIHBvcnQ6IDI1LFxuICAgICAgc2VjdXJlOiBmYWxzZSxcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuTUFJTF9VU0VSLFxuICAgICAgICBwYXNzOiBwcm9jZXNzLmVudi5NQUlMX1BBU1MsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwoe1xuICAgICAgZnJvbTogXCJuam9hbmNAZ21haWwuY29tXCIsXG4gICAgICB0bzogZW1haWwsXG4gICAgICBzdWJqZWN0OiBzdWJqZWN0LFxuICAgICAgdGV4dDogdGV4dCxcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhcImVtYWlsIHNlbnQgc3VjZXNzZnVsbHlcIik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coXCJlbWFpbCBub3Qgc2VudFwiKTtcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gc2VuZEVtYWlsO1xuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQSxJQUFBQSxXQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNQyxTQUFTLEdBQUcsTUFBQUEsQ0FBT0MsS0FBSyxFQUFFQyxPQUFPLEVBQUVDLElBQUksS0FBSztFQUNoRCxJQUFJO0lBQ0YsTUFBTUMsV0FBVyxHQUFHQyxtQkFBVSxDQUFDQyxlQUFlLENBQUM7TUFDN0NDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFNBQVM7TUFDM0JDLE9BQU8sRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLFlBQVk7TUFDakNDLElBQUksRUFBRSxFQUFFO01BQ1JDLE1BQU0sRUFBRSxLQUFLO01BQ2JDLElBQUksRUFBRTtRQUNKQyxJQUFJLEVBQUVSLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDUSxTQUFTO1FBQzNCQyxJQUFJLEVBQUVWLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDVTtNQUNwQjtJQUNGLENBQUMsQ0FBQztJQUVGLE1BQU1mLFdBQVcsQ0FBQ2dCLFFBQVEsQ0FBQztNQUN6QkMsSUFBSSxFQUFFLGtCQUFrQjtNQUN4QkMsRUFBRSxFQUFFckIsS0FBSztNQUNUQyxPQUFPLEVBQUVBLE9BQU87TUFDaEJDLElBQUksRUFBRUE7SUFDUixDQUFDLENBQUM7SUFDRm9CLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHdCQUF3QixDQUFDO0VBQ3ZDLENBQUMsQ0FBQyxPQUFPQyxLQUFLLEVBQUU7SUFDZEYsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0JBQWdCLENBQUM7SUFDN0JELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxLQUFLLENBQUM7RUFDcEI7QUFDRixDQUFDO0FBRURDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHM0IsU0FBUyJ9","map":{"version":3,"names":["_nodemailer","_interopRequireDefault","require","sendEmail","email","subject","text","transporter","nodemailer","createTransport","host","process","env","MAIL_HOST","service","MAIL_SERVICE","port","secure","auth","user","MAIL_USER","pass","MAIL_PASS","sendMail","from","to","console","log","error","module","exports"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/utils/","sources":["sendMail.js"],"sourcesContent":["import nodemailer from \"nodemailer\";\n\nconst sendEmail = async (email, subject, text) => {\n  try {\n    const transporter = nodemailer.createTransport({\n      host: process.env.MAIL_HOST,\n      service: process.env.MAIL_SERVICE,\n      port: 25,\n      secure: false,\n      auth: {\n        user: process.env.MAIL_USER,\n        pass: process.env.MAIL_PASS,\n      },\n    });\n\n    await transporter.sendMail({\n      from: \"njoanc@gmail.com\",\n      to: email,\n      subject: subject,\n      text: text,\n    });\n    console.log(\"email sent sucessfully\");\n  } catch (error) {\n    console.log(\"email not sent\");\n    console.log(error);\n  }\n};\n\nmodule.exports = sendEmail;\n"],"mappings":";;;AAAA,IAAAA,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,MAAMC,SAAS,GAAG,MAAAA,CAAOC,KAAK,EAAEC,OAAO,EAAEC,IAAI,KAAK;EAChD,IAAI;IACF,MAAMC,WAAW,GAAGC,mBAAU,CAACC,eAAe,CAAC;MAC7CC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,SAAS;MAC3BC,OAAO,EAAEH,OAAO,CAACC,GAAG,CAACG,YAAY;MACjCC,IAAI,EAAE,EAAE;MACRC,MAAM,EAAE,KAAK;MACbC,IAAI,EAAE;QACJC,IAAI,EAAER,OAAO,CAACC,GAAG,CAACQ,SAAS;QAC3BC,IAAI,EAAEV,OAAO,CAACC,GAAG,CAACU;MACpB;IACF,CAAC,CAAC;IAEF,MAAMf,WAAW,CAACgB,QAAQ,CAAC;MACzBC,IAAI,EAAE,kBAAkB;MACxBC,EAAE,EAAErB,KAAK;MACTC,OAAO,EAAEA,OAAO;MAChBC,IAAI,EAAEA;IACR,CAAC,CAAC;IACFoB,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;EACvC,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdF,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;IAC7BD,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;EACpB;AACF,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAG3B,SAAS"}},"mtime":1682839446141},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/passport.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _passportGoogleOauth = require(\"passport-google-oauth20\");\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n_dotenv.default.config();\n_passport.default.use(new _passportGoogleOauth.Strategy({\n  clientID: process.env.GOOGLE_CLIENT_ID,\n  clientSecret: process.env.GOOGLE_CLIENT_SECRET,\n  callbackURL: \"http://127.0.0.1:4002/users/auth/google/callback\"\n}, function (accessToken, refreshToken, profile, done) {\n  const userProfile = profile;\n  return done(null, userProfile);\n}));\nvar _default = _passport.default;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcGFzc3BvcnQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9wYXNzcG9ydEdvb2dsZU9hdXRoIiwiX2RvdGVudiIsImRvdGVudiIsImNvbmZpZyIsInBhc3Nwb3J0IiwidXNlIiwiR29vZ2xlU3RyYXRlZ3kiLCJjbGllbnRJRCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJjYWxsYmFja1VSTCIsImFjY2Vzc1Rva2VuIiwicmVmcmVzaFRva2VuIiwicHJvZmlsZSIsImRvbmUiLCJ1c2VyUHJvZmlsZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qZWFubmVkYXJjbnlpcmFtd2l6YS9Eb3dubG9hZHMvQWNjb3VudC1WZXJpZmljYXRpb24tQmFja2VuZC9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsicGFzc3BvcnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xuaW1wb3J0IHsgU3RyYXRlZ3kgYXMgR29vZ2xlU3RyYXRlZ3kgfSBmcm9tIFwicGFzc3BvcnQtZ29vZ2xlLW9hdXRoMjBcIjtcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xuZG90ZW52LmNvbmZpZygpO1xuXG5wYXNzcG9ydC51c2UoXG4gIG5ldyBHb29nbGVTdHJhdGVneShcbiAgICB7XG4gICAgICBjbGllbnRJRDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCxcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9TRUNSRVQsXG4gICAgICBjYWxsYmFja1VSTDogXCJodHRwOi8vMTI3LjAuMC4xOjQwMDIvdXNlcnMvYXV0aC9nb29nbGUvY2FsbGJhY2tcIixcbiAgICB9LFxuICAgIGZ1bmN0aW9uIChhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBwcm9maWxlLCBkb25lKSB7XG4gICAgICBjb25zdCB1c2VyUHJvZmlsZSA9IHByb2ZpbGU7XG4gICAgICByZXR1cm4gZG9uZShudWxsLCB1c2VyUHJvZmlsZSk7XG4gICAgfVxuICApXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBwYXNzcG9ydDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLFNBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLG9CQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQUcsZUFBTSxDQUFDQyxNQUFNLENBQUMsQ0FBQztBQUVmQyxpQkFBUSxDQUFDQyxHQUFHLENBQ1YsSUFBSUMsNkJBQWMsQ0FDaEI7RUFDRUMsUUFBUSxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsZ0JBQWdCO0VBQ3RDQyxZQUFZLEVBQUVILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxvQkFBb0I7RUFDOUNDLFdBQVcsRUFBRTtBQUNmLENBQUMsRUFDRCxVQUFVQyxXQUFXLEVBQUVDLFlBQVksRUFBRUMsT0FBTyxFQUFFQyxJQUFJLEVBQUU7RUFDbEQsTUFBTUMsV0FBVyxHQUFHRixPQUFPO0VBQzNCLE9BQU9DLElBQUksQ0FBQyxJQUFJLEVBQUVDLFdBQVcsQ0FBQztBQUNoQyxDQUNGLENBQ0YsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FFYWYsaUJBQVE7QUFBQWdCLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBIn0=","map":{"version":3,"names":["_passport","_interopRequireDefault","require","_passportGoogleOauth","_dotenv","dotenv","config","passport","use","GoogleStrategy","clientID","process","env","GOOGLE_CLIENT_ID","clientSecret","GOOGLE_CLIENT_SECRET","callbackURL","accessToken","refreshToken","profile","done","userProfile","_default","exports","default"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/config/","sources":["passport.js"],"sourcesContent":["import passport from \"passport\";\nimport { Strategy as GoogleStrategy } from \"passport-google-oauth20\";\nimport dotenv from \"dotenv\";\ndotenv.config();\n\npassport.use(\n  new GoogleStrategy(\n    {\n      clientID: process.env.GOOGLE_CLIENT_ID,\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET,\n      callbackURL: \"http://127.0.0.1:4002/users/auth/google/callback\",\n    },\n    function (accessToken, refreshToken, profile, done) {\n      const userProfile = profile;\n      return done(null, userProfile);\n    }\n  )\n);\n\nexport default passport;\n"],"mappings":";;;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,oBAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AACAG,eAAM,CAACC,MAAM,CAAC,CAAC;AAEfC,iBAAQ,CAACC,GAAG,CACV,IAAIC,6BAAc,CAChB;EACEC,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC,gBAAgB;EACtCC,YAAY,EAAEH,OAAO,CAACC,GAAG,CAACG,oBAAoB;EAC9CC,WAAW,EAAE;AACf,CAAC,EACD,UAAUC,WAAW,EAAEC,YAAY,EAAEC,OAAO,EAAEC,IAAI,EAAE;EAClD,MAAMC,WAAW,GAAGF,OAAO;EAC3B,OAAOC,IAAI,CAAC,IAAI,EAAEC,WAAW,CAAC;AAChC,CACF,CACF,CAAC;AAAC,IAAAC,QAAA,GAEaf,iBAAQ;AAAAgB,OAAA,CAAAC,OAAA,GAAAF,QAAA"}},"mtime":1682849015989},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/resetPassword.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetPassword = void 0;\nvar _user = _interopRequireDefault(require(\"../models/user\"));\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\nvar _token = _interopRequireDefault(require(\"../models/token\"));\nvar _moment = _interopRequireDefault(require(\"moment\"));\nconst resetPassword = async (req, res) => {\n  const {\n    email\n  } = req.body;\n  // Find the user with the provided email\n  const user = await _user.default.findOne({\n    email\n  }, (err, user) => {\n    if (err) throw err;\n    if (!user) {\n      // User not found\n      res.status(400).json({\n        message: \"User not found\"\n      });\n      return;\n    }\n  });\n  const newToken = await new _token.default({\n    // Use the correct variable name\n    userId: newUser._id,\n    token: _crypto.default.randomBytes(32).toString(\"hex\")\n  }).save();\n  const resetExpires = (0, _moment.default)().add(1, \"hour\").toDate();\n  // Store the reset token in the database\n  user.resetToken = newToken;\n  user.resetExpires = resetExpires;\n  user.save(err => {\n    if (err) throw err;\n\n    // Send an email to the user with the reset link\n    const resetLink = `${process.env.BASE_URL}/users/reset-password/${newToken}`;\n    const message = `Hello,\\n\\nYou have requested to reset your password. Please click the following link to reset your password:\\n\\n${resetLink}\\n\\nThis link will expire in 1 hour.\\n`;\n    sendMail(user.email, \"Password Reset Request\", message);\n    res.status(200).json({\n      message: \"Reset email sent\"\n    });\n  });\n};\nexports.resetPassword = resetPassword;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdXNlciIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2NyeXB0byIsIl90b2tlbiIsIl9tb21lbnQiLCJyZXNldFBhc3N3b3JkIiwicmVxIiwicmVzIiwiZW1haWwiLCJib2R5IiwidXNlciIsIlVzZXIiLCJmaW5kT25lIiwiZXJyIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJuZXdUb2tlbiIsIlRva2VuIiwidXNlcklkIiwibmV3VXNlciIsIl9pZCIsInRva2VuIiwiY3J5cHRvIiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyIsInNhdmUiLCJyZXNldEV4cGlyZXMiLCJtb21lbnQiLCJhZGQiLCJ0b0RhdGUiLCJyZXNldFRva2VuIiwicmVzZXRMaW5rIiwicHJvY2VzcyIsImVudiIsIkJBU0VfVVJMIiwic2VuZE1haWwiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvamVhbm5lZGFyY255aXJhbXdpemEvRG93bmxvYWRzL0FjY291bnQtVmVyaWZpY2F0aW9uLUJhY2tlbmQvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsicmVzZXRQYXNzd29yZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWxzL3VzZXJcIjtcbmltcG9ydCBjcnlwdG8gZnJvbSBcImNyeXB0b1wiO1xuaW1wb3J0IFRva2VuIGZyb20gXCIuLi9tb2RlbHMvdG9rZW5cIjtcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xuXG5jb25zdCByZXNldFBhc3N3b3JkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgZW1haWwgfSA9IHJlcS5ib2R5O1xuICAvLyBGaW5kIHRoZSB1c2VyIHdpdGggdGhlIHByb3ZpZGVkIGVtYWlsXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9LCAoZXJyLCB1c2VyKSA9PiB7XG4gICAgaWYgKGVycikgdGhyb3cgZXJyO1xuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICAvLyBVc2VyIG5vdCBmb3VuZFxuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIlVzZXIgbm90IGZvdW5kXCIgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBuZXdUb2tlbiA9IGF3YWl0IG5ldyBUb2tlbih7XG4gICAgLy8gVXNlIHRoZSBjb3JyZWN0IHZhcmlhYmxlIG5hbWVcbiAgICB1c2VySWQ6IG5ld1VzZXIuX2lkLFxuICAgIHRva2VuOiBjcnlwdG8ucmFuZG9tQnl0ZXMoMzIpLnRvU3RyaW5nKFwiaGV4XCIpLFxuICB9KS5zYXZlKCk7XG4gIGNvbnN0IHJlc2V0RXhwaXJlcyA9IG1vbWVudCgpLmFkZCgxLCBcImhvdXJcIikudG9EYXRlKCk7XG4gIC8vIFN0b3JlIHRoZSByZXNldCB0b2tlbiBpbiB0aGUgZGF0YWJhc2VcbiAgdXNlci5yZXNldFRva2VuID0gbmV3VG9rZW47XG4gIHVzZXIucmVzZXRFeHBpcmVzID0gcmVzZXRFeHBpcmVzO1xuICB1c2VyLnNhdmUoKGVycikgPT4ge1xuICAgIGlmIChlcnIpIHRocm93IGVycjtcblxuICAgIC8vIFNlbmQgYW4gZW1haWwgdG8gdGhlIHVzZXIgd2l0aCB0aGUgcmVzZXQgbGlua1xuICAgIGNvbnN0IHJlc2V0TGluayA9IGAke3Byb2Nlc3MuZW52LkJBU0VfVVJMfS91c2Vycy9yZXNldC1wYXNzd29yZC8ke25ld1Rva2VufWA7XG4gICAgY29uc3QgbWVzc2FnZSA9IGBIZWxsbyxcXG5cXG5Zb3UgaGF2ZSByZXF1ZXN0ZWQgdG8gcmVzZXQgeW91ciBwYXNzd29yZC4gUGxlYXNlIGNsaWNrIHRoZSBmb2xsb3dpbmcgbGluayB0byByZXNldCB5b3VyIHBhc3N3b3JkOlxcblxcbiR7cmVzZXRMaW5rfVxcblxcblRoaXMgbGluayB3aWxsIGV4cGlyZSBpbiAxIGhvdXIuXFxuYDtcbiAgICBzZW5kTWFpbCh1c2VyLmVtYWlsLCBcIlBhc3N3b3JkIFJlc2V0IFJlcXVlc3RcIiwgbWVzc2FnZSk7XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiUmVzZXQgZW1haWwgc2VudFwiIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCB7IHJlc2V0UGFzc3dvcmQgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLEtBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLE1BQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLE9BQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQU1JLGFBQWEsR0FBRyxNQUFBQSxDQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN4QyxNQUFNO0lBQUVDO0VBQU0sQ0FBQyxHQUFHRixHQUFHLENBQUNHLElBQUk7RUFDMUI7RUFDQSxNQUFNQyxJQUFJLEdBQUcsTUFBTUMsYUFBSSxDQUFDQyxPQUFPLENBQUM7SUFBRUo7RUFBTSxDQUFDLEVBQUUsQ0FBQ0ssR0FBRyxFQUFFSCxJQUFJLEtBQUs7SUFDeEQsSUFBSUcsR0FBRyxFQUFFLE1BQU1BLEdBQUc7SUFFbEIsSUFBSSxDQUFDSCxJQUFJLEVBQUU7TUFDVDtNQUNBSCxHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLE9BQU8sRUFBRTtNQUFpQixDQUFDLENBQUM7TUFDbkQ7SUFDRjtFQUNGLENBQUMsQ0FBQztFQUVGLE1BQU1DLFFBQVEsR0FBRyxNQUFNLElBQUlDLGNBQUssQ0FBQztJQUMvQjtJQUNBQyxNQUFNLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRztJQUNuQkMsS0FBSyxFQUFFQyxlQUFNLENBQUNDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQ0MsUUFBUSxDQUFDLEtBQUs7RUFDOUMsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDO0VBQ1QsTUFBTUMsWUFBWSxHQUFHLElBQUFDLGVBQU0sRUFBQyxDQUFDLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0VBQ3JEO0VBQ0FwQixJQUFJLENBQUNxQixVQUFVLEdBQUdkLFFBQVE7RUFDMUJQLElBQUksQ0FBQ2lCLFlBQVksR0FBR0EsWUFBWTtFQUNoQ2pCLElBQUksQ0FBQ2dCLElBQUksQ0FBRWIsR0FBRyxJQUFLO0lBQ2pCLElBQUlBLEdBQUcsRUFBRSxNQUFNQSxHQUFHOztJQUVsQjtJQUNBLE1BQU1tQixTQUFTLEdBQUksR0FBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVMseUJBQXdCbEIsUUFBUyxFQUFDO0lBQzVFLE1BQU1ELE9BQU8sR0FBSSxtSEFBa0hnQixTQUFVLHdDQUF1QztJQUNwTEksUUFBUSxDQUFDMUIsSUFBSSxDQUFDRixLQUFLLEVBQUUsd0JBQXdCLEVBQUVRLE9BQU8sQ0FBQztJQUV2RFQsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxPQUFPLEVBQUU7SUFBbUIsQ0FBQyxDQUFDO0VBQ3ZELENBQUMsQ0FBQztBQUNKLENBQUM7QUFBQ3FCLE9BQUEsQ0FBQWhDLGFBQUEsR0FBQUEsYUFBQSJ9","map":{"version":3,"names":["_user","_interopRequireDefault","require","_crypto","_token","_moment","resetPassword","req","res","email","body","user","User","findOne","err","status","json","message","newToken","Token","userId","newUser","_id","token","crypto","randomBytes","toString","save","resetExpires","moment","add","toDate","resetToken","resetLink","process","env","BASE_URL","sendMail","exports"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/controllers/","sources":["resetPassword.js"],"sourcesContent":["import User from \"../models/user\";\nimport crypto from \"crypto\";\nimport Token from \"../models/token\";\nimport moment from \"moment\";\n\nconst resetPassword = async (req, res) => {\n  const { email } = req.body;\n  // Find the user with the provided email\n  const user = await User.findOne({ email }, (err, user) => {\n    if (err) throw err;\n\n    if (!user) {\n      // User not found\n      res.status(400).json({ message: \"User not found\" });\n      return;\n    }\n  });\n\n  const newToken = await new Token({\n    // Use the correct variable name\n    userId: newUser._id,\n    token: crypto.randomBytes(32).toString(\"hex\"),\n  }).save();\n  const resetExpires = moment().add(1, \"hour\").toDate();\n  // Store the reset token in the database\n  user.resetToken = newToken;\n  user.resetExpires = resetExpires;\n  user.save((err) => {\n    if (err) throw err;\n\n    // Send an email to the user with the reset link\n    const resetLink = `${process.env.BASE_URL}/users/reset-password/${newToken}`;\n    const message = `Hello,\\n\\nYou have requested to reset your password. Please click the following link to reset your password:\\n\\n${resetLink}\\n\\nThis link will expire in 1 hour.\\n`;\n    sendMail(user.email, \"Password Reset Request\", message);\n\n    res.status(200).json({ message: \"Reset email sent\" });\n  });\n};\n\nexport { resetPassword };\n"],"mappings":";;;;;;;AAAA,IAAAA,KAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,MAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,OAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAEA,MAAMI,aAAa,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;EACxC,MAAM;IAAEC;EAAM,CAAC,GAAGF,GAAG,CAACG,IAAI;EAC1B;EACA,MAAMC,IAAI,GAAG,MAAMC,aAAI,CAACC,OAAO,CAAC;IAAEJ;EAAM,CAAC,EAAE,CAACK,GAAG,EAAEH,IAAI,KAAK;IACxD,IAAIG,GAAG,EAAE,MAAMA,GAAG;IAElB,IAAI,CAACH,IAAI,EAAE;MACT;MACAH,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAAiB,CAAC,CAAC;MACnD;IACF;EACF,CAAC,CAAC;EAEF,MAAMC,QAAQ,GAAG,MAAM,IAAIC,cAAK,CAAC;IAC/B;IACAC,MAAM,EAAEC,OAAO,CAACC,GAAG;IACnBC,KAAK,EAAEC,eAAM,CAACC,WAAW,CAAC,EAAE,CAAC,CAACC,QAAQ,CAAC,KAAK;EAC9C,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;EACT,MAAMC,YAAY,GAAG,IAAAC,eAAM,EAAC,CAAC,CAACC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAACC,MAAM,CAAC,CAAC;EACrD;EACApB,IAAI,CAACqB,UAAU,GAAGd,QAAQ;EAC1BP,IAAI,CAACiB,YAAY,GAAGA,YAAY;EAChCjB,IAAI,CAACgB,IAAI,CAAEb,GAAG,IAAK;IACjB,IAAIA,GAAG,EAAE,MAAMA,GAAG;;IAElB;IACA,MAAMmB,SAAS,GAAI,GAAEC,OAAO,CAACC,GAAG,CAACC,QAAS,yBAAwBlB,QAAS,EAAC;IAC5E,MAAMD,OAAO,GAAI,mHAAkHgB,SAAU,wCAAuC;IACpLI,QAAQ,CAAC1B,IAAI,CAACF,KAAK,EAAE,wBAAwB,EAAEQ,OAAO,CAAC;IAEvDT,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAmB,CAAC,CAAC;EACvD,CAAC,CAAC;AACJ,CAAC;AAACqB,OAAA,CAAAhC,aAAA,GAAAA,aAAA"}},"mtime":1682855359723},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/middleware/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/middleware/authMiddleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isAuthenticated = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nconst isAuthenticated = (req, res, next) => {\n  const authHeader = req.headers.authorization;\n  if (!authHeader) {\n    return res.status(401).json({\n      message: \"Unauthorized\"\n    });\n  }\n  const token = authHeader.split(\" \")[1];\n  try {\n    const decodedToken = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET_KEY);\n    req.userId = decodedToken.userId;\n    return next();\n  } catch (err) {\n    return res.status(401).json({\n      message: \"Invalid token\"\n    });\n  }\n};\nexports.isAuthenticated = isAuthenticated;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJpc0F1dGhlbnRpY2F0ZWQiLCJyZXEiLCJyZXMiLCJuZXh0IiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJ0b2tlbiIsInNwbGl0IiwiZGVjb2RlZFRva2VuIiwiand0IiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVRfS0VZIiwidXNlcklkIiwiZXJyIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2plYW5uZWRhcmNueWlyYW13aXphL0Rvd25sb2Fkcy9BY2NvdW50LVZlcmlmaWNhdGlvbi1CYWNrZW5kL3NyYy9taWRkbGV3YXJlLyIsInNvdXJjZXMiOlsiYXV0aE1pZGRsZXdhcmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5cbmNvbnN0IGlzQXV0aGVudGljYXRlZCA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcbiAgaWYgKCFhdXRoSGVhZGVyKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogXCJVbmF1dGhvcml6ZWRcIiB9KTtcbiAgfVxuXG4gIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zcGxpdChcIiBcIilbMV07XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBkZWNvZGVkVG9rZW4gPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUX0tFWSk7XG4gICAgcmVxLnVzZXJJZCA9IGRlY29kZWRUb2tlbi51c2VySWQ7XG4gICAgcmV0dXJuIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogXCJJbnZhbGlkIHRva2VuXCIgfSk7XG4gIH1cbn07XG5cbmV4cG9ydCB7IGlzQXV0aGVudGljYXRlZCB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsYUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTUMsZUFBZSxHQUFHQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQzFDLE1BQU1DLFVBQVUsR0FBR0gsR0FBRyxDQUFDSSxPQUFPLENBQUNDLGFBQWE7RUFDNUMsSUFBSSxDQUFDRixVQUFVLEVBQUU7SUFDZixPQUFPRixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRTtJQUFlLENBQUMsQ0FBQztFQUMxRDtFQUVBLE1BQU1DLEtBQUssR0FBR04sVUFBVSxDQUFDTyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBRXRDLElBQUk7SUFDRixNQUFNQyxZQUFZLEdBQUdDLHFCQUFHLENBQUNDLE1BQU0sQ0FBQ0osS0FBSyxFQUFFSyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsY0FBYyxDQUFDO0lBQ2xFaEIsR0FBRyxDQUFDaUIsTUFBTSxHQUFHTixZQUFZLENBQUNNLE1BQU07SUFDaEMsT0FBT2YsSUFBSSxDQUFDLENBQUM7RUFDZixDQUFDLENBQUMsT0FBT2dCLEdBQUcsRUFBRTtJQUNaLE9BQU9qQixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRTtJQUFnQixDQUFDLENBQUM7RUFDM0Q7QUFDRixDQUFDO0FBQUNXLE9BQUEsQ0FBQXBCLGVBQUEsR0FBQUEsZUFBQSJ9","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","isAuthenticated","req","res","next","authHeader","headers","authorization","status","json","message","token","split","decodedToken","jwt","verify","process","env","JWT_SECRET_KEY","userId","err","exports"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/middleware/","sources":["authMiddleware.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\n\nconst isAuthenticated = (req, res, next) => {\n  const authHeader = req.headers.authorization;\n  if (!authHeader) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const token = authHeader.split(\" \")[1];\n\n  try {\n    const decodedToken = jwt.verify(token, process.env.JWT_SECRET_KEY);\n    req.userId = decodedToken.userId;\n    return next();\n  } catch (err) {\n    return res.status(401).json({ message: \"Invalid token\" });\n  }\n};\n\nexport { isAuthenticated };\n"],"mappings":";;;;;;;AAAA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,MAAMC,eAAe,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC1C,MAAMC,UAAU,GAAGH,GAAG,CAACI,OAAO,CAACC,aAAa;EAC5C,IAAI,CAACF,UAAU,EAAE;IACf,OAAOF,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAe,CAAC,CAAC;EAC1D;EAEA,MAAMC,KAAK,GAAGN,UAAU,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAEtC,IAAI;IACF,MAAMC,YAAY,GAAGC,qBAAG,CAACC,MAAM,CAACJ,KAAK,EAAEK,OAAO,CAACC,GAAG,CAACC,cAAc,CAAC;IAClEhB,GAAG,CAACiB,MAAM,GAAGN,YAAY,CAACM,MAAM;IAChC,OAAOf,IAAI,CAAC,CAAC;EACf,CAAC,CAAC,OAAOgB,GAAG,EAAE;IACZ,OAAOjB,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAgB,CAAC,CAAC;EAC3D;AACF,CAAC;AAACW,OAAA,CAAApB,eAAA,GAAAA,eAAA"}},"mtime":1682860549875},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/middleware/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"filename\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/middleware/authMiddleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.21.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isAuthenticated = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nconst isAuthenticated = (req, res, next) => {\n  const authHeader = req.headers.authorization;\n  if (!authHeader) {\n    return res.status(401).json({\n      message: \"Unauthorized\"\n    });\n  }\n  const token = authHeader.split(\" \")[1];\n  try {\n    const decodedToken = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET_KEY);\n    req.userId = decodedToken.userId;\n    return next();\n  } catch (err) {\n    return res.status(401).json({\n      message: \"Invalid token\"\n    });\n  }\n};\nexports.isAuthenticated = isAuthenticated;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJpc0F1dGhlbnRpY2F0ZWQiLCJyZXEiLCJyZXMiLCJuZXh0IiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJ0b2tlbiIsInNwbGl0IiwiZGVjb2RlZFRva2VuIiwiand0IiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVRfS0VZIiwidXNlcklkIiwiZXJyIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2plYW5uZWRhcmNueWlyYW13aXphL0Rvd25sb2Fkcy9BY2NvdW50LVZlcmlmaWNhdGlvbi1CYWNrZW5kL3NyYy9taWRkbGV3YXJlLyIsInNvdXJjZXMiOlsiYXV0aE1pZGRsZXdhcmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5cbmNvbnN0IGlzQXV0aGVudGljYXRlZCA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcbiAgaWYgKCFhdXRoSGVhZGVyKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogXCJVbmF1dGhvcml6ZWRcIiB9KTtcbiAgfVxuXG4gIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zcGxpdChcIiBcIilbMV07XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBkZWNvZGVkVG9rZW4gPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUX0tFWSk7XG4gICAgcmVxLnVzZXJJZCA9IGRlY29kZWRUb2tlbi51c2VySWQ7XG4gICAgcmV0dXJuIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogXCJJbnZhbGlkIHRva2VuXCIgfSk7XG4gIH1cbn07XG5cbmV4cG9ydCB7IGlzQXV0aGVudGljYXRlZCB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsYUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTUMsZUFBZSxHQUFHQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQzFDLE1BQU1DLFVBQVUsR0FBR0gsR0FBRyxDQUFDSSxPQUFPLENBQUNDLGFBQWE7RUFDNUMsSUFBSSxDQUFDRixVQUFVLEVBQUU7SUFDZixPQUFPRixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRTtJQUFlLENBQUMsQ0FBQztFQUMxRDtFQUVBLE1BQU1DLEtBQUssR0FBR04sVUFBVSxDQUFDTyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBRXRDLElBQUk7SUFDRixNQUFNQyxZQUFZLEdBQUdDLHFCQUFHLENBQUNDLE1BQU0sQ0FBQ0osS0FBSyxFQUFFSyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsY0FBYyxDQUFDO0lBQ2xFaEIsR0FBRyxDQUFDaUIsTUFBTSxHQUFHTixZQUFZLENBQUNNLE1BQU07SUFDaEMsT0FBT2YsSUFBSSxDQUFDLENBQUM7RUFDZixDQUFDLENBQUMsT0FBT2dCLEdBQUcsRUFBRTtJQUNaLE9BQU9qQixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRTtJQUFnQixDQUFDLENBQUM7RUFDM0Q7QUFDRixDQUFDO0FBQUNXLE9BQUEsQ0FBQXBCLGVBQUEsR0FBQUEsZUFBQSJ9","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","isAuthenticated","req","res","next","authHeader","headers","authorization","status","json","message","token","split","decodedToken","jwt","verify","process","env","JWT_SECRET_KEY","userId","err","exports"],"sourceRoot":"/Users/jeannedarcnyiramwiza/Downloads/Account-Verification-Backend/src/middleware/","sources":["authMiddleware.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\n\nconst isAuthenticated = (req, res, next) => {\n  const authHeader = req.headers.authorization;\n  if (!authHeader) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const token = authHeader.split(\" \")[1];\n\n  try {\n    const decodedToken = jwt.verify(token, process.env.JWT_SECRET_KEY);\n    req.userId = decodedToken.userId;\n    return next();\n  } catch (err) {\n    return res.status(401).json({ message: \"Invalid token\" });\n  }\n};\n\nexport { isAuthenticated };\n"],"mappings":";;;;;;;AAAA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,MAAMC,eAAe,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC1C,MAAMC,UAAU,GAAGH,GAAG,CAACI,OAAO,CAACC,aAAa;EAC5C,IAAI,CAACF,UAAU,EAAE;IACf,OAAOF,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAe,CAAC,CAAC;EAC1D;EAEA,MAAMC,KAAK,GAAGN,UAAU,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAEtC,IAAI;IACF,MAAMC,YAAY,GAAGC,qBAAG,CAACC,MAAM,CAACJ,KAAK,EAAEK,OAAO,CAACC,GAAG,CAACC,cAAc,CAAC;IAClEhB,GAAG,CAACiB,MAAM,GAAGN,YAAY,CAACM,MAAM;IAChC,OAAOf,IAAI,CAAC,CAAC;EACf,CAAC,CAAC,OAAOgB,GAAG,EAAE;IACZ,OAAOjB,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAgB,CAAC,CAAC;EAC3D;AACF,CAAC;AAACW,OAAA,CAAApB,eAAA,GAAAA,eAAA"}},"mtime":1682860549875}}